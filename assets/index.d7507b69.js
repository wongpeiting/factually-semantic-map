(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function zt(){}function Vr(t){return t()}function Wn(){return Object.create(null)}function Gt(t){t.forEach(Vr)}function qr(t){return typeof t=="function"}function sn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Mi(t){return Object.keys(t).length===0}function R(t,e){t.appendChild(e)}function nt(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function Ln(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function B(t){return document.createElement(t)}function Ei(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function St(t){return document.createTextNode(t)}function at(){return St(" ")}function Br(){return St("")}function kt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function E(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ci(t){return t===""?null:+t}function Ai(t){return Array.from(t.childNodes)}function Ot(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Kn(t,e){t.value=e==null?"":e}function It(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function jn(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function Di(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function Ri(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}class Ti{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,r=null){this.e||(this.is_svg?this.e=Ei(n.nodeName):this.e=B(n.nodeName),this.t=n,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)nt(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}let xe;function ke(t){xe=t}function Hr(){if(!xe)throw new Error("Function called outside component initialization");return xe}function In(t){Hr().$$.on_mount.push(t)}function Xr(){const t=Hr();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=Ri(e,n,{cancelable:r});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const ye=[],Xt=[],ze=[],gn=[],Ni=Promise.resolve();let _n=!1;function Li(){_n||(_n=!0,Ni.then(Ur))}function He(t){ze.push(t)}function Xe(t){gn.push(t)}const hn=new Set;let De=0;function Ur(){const t=xe;do{for(;De<ye.length;){const e=ye[De];De++,ke(e),Ii(e.$$)}for(ke(null),ye.length=0,De=0;Xt.length;)Xt.pop()();for(let e=0;e<ze.length;e+=1){const n=ze[e];hn.has(n)||(hn.add(n),n())}ze.length=0}while(ye.length);for(;gn.length;)gn.pop()();_n=!1,hn.clear(),ke(t)}function Ii(t){if(t.fragment!==null){t.update(),Gt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(He)}}const Oe=new Set;let te;function zi(){te={r:0,c:[],p:te}}function Oi(){te.r||Gt(te.c),te=te.p}function se(t,e){t&&t.i&&(Oe.delete(t),t.i(e))}function we(t,e,n,r){if(t&&t.o){if(Oe.has(t))return;Oe.add(t),te.c.push(()=>{Oe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Ue(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function yn(t){t&&t.c()}function Ye(t,e,n,r){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,n),r||He(()=>{const o=t.$$.on_mount.map(Vr).filter(qr);t.$$.on_destroy?t.$$.on_destroy.push(...o):Gt(o),t.$$.on_mount=[]}),s.forEach(He)}function We(t,e){const n=t.$$;n.fragment!==null&&(Gt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Pi(t,e){t.$$.dirty[0]===-1&&(ye.push(t),Li(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function on(t,e,n,r,i,s,o,a=[-1]){const u=xe;ke(t);const l=t.$$={fragment:null,ctx:[],props:s,update:zt,not_equal:i,bound:Wn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Wn(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};o&&o(l.root);let c=!1;if(l.ctx=n?n(t,e.props||{},(h,m,...g)=>{const T=g.length?g[0]:m;return l.ctx&&i(l.ctx[h],l.ctx[h]=T)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](T),c&&Pi(t,h)),m}):[],l.update(),c=!0,Gt(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const h=Ai(e.target);l.fragment&&l.fragment.l(h),h.forEach($)}else l.fragment&&l.fragment.c();e.intro&&se(t.$$.fragment),Ye(t,e.target,e.anchor,e.customElement),Ur()}ke(u)}class ln{$destroy(){We(this,1),this.$destroy=zt}$on(e,n){if(!qr(n))return zt;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Mi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Fi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yr={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){((n,r)=>{t.exports=r()})(Fi,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,s=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,a={},u=0,l={};function c(f){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(d){var y=O(d);y.chunkSize=parseInt(y.chunkSize),d.step||d.chunk||(y.chunkSize=null),this._handle=new L(y),(this._handle.streamer=this)._config=y}.call(this,f),this.parseChunk=function(d,y){var S=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<S){let H=this._config.newline;H||(p=this._config.quoteChar||'"',H=this._handle.guessLineEndings(d,p)),d=[...d.split(H).slice(S)].join(H)}this.isFirstChunk&&V(this._config.beforeFirstChunk)&&(p=this._config.beforeFirstChunk(d))!==void 0&&(d=p),this.isFirstChunk=!1,this._halted=!1;var S=this._partialLine+d,p=(this._partialLine="",this._handle.parse(S,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(d=p.meta.cursor,S=(this._finished||(this._partialLine=S.substring(d-this._baseIndex),this._baseIndex=d),p&&p.data&&(this._rowCount+=p.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:p,workerId:l.WORKER_ID,finished:S});else if(V(this._config.chunk)&&!y){if(this._config.chunk(p,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=p=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(p.data),this._completeResults.errors=this._completeResults.errors.concat(p.errors),this._completeResults.meta=p.meta),this._completed||!S||!V(this._config.complete)||p&&p.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),S||p&&p.meta.paused||this._nextChunk(),p}this._halted=!0},this._sendError=function(d){V(this._config.error)?this._config.error(d):o&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:d,finished:!1})}}function h(f){var d;(f=f||{}).chunkSize||(f.chunkSize=l.RemoteChunkSize),c.call(this,f),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(y){this._input=y,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(d=new XMLHttpRequest,this._config.withCredentials&&(d.withCredentials=this._config.withCredentials),s||(d.onload=W(this._chunkLoaded,this),d.onerror=W(this._chunkError,this)),d.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var y,S=this._config.downloadRequestHeaders;for(y in S)d.setRequestHeader(y,S[y])}var p;this._config.chunkSize&&(p=this._start+this._config.chunkSize-1,d.setRequestHeader("Range","bytes="+this._start+"-"+p));try{d.send(this._config.downloadRequestBody)}catch(H){this._chunkError(H.message)}s&&d.status===0&&this._chunkError()}},this._chunkLoaded=function(){d.readyState===4&&(d.status<200||400<=d.status?this._chunkError():(this._start+=this._config.chunkSize||d.responseText.length,this._finished=!this._config.chunkSize||this._start>=(y=>(y=y.getResponseHeader("Content-Range"))!==null?parseInt(y.substring(y.lastIndexOf("/")+1)):-1)(d),this.parseChunk(d.responseText)))},this._chunkError=function(y){y=d.statusText||y,this._sendError(new Error(y))}}function m(f){(f=f||{}).chunkSize||(f.chunkSize=l.LocalChunkSize),c.call(this,f);var d,y,S=typeof FileReader<"u";this.stream=function(p){this._input=p,y=p.slice||p.webkitSlice||p.mozSlice,S?((d=new FileReader).onload=W(this._chunkLoaded,this),d.onerror=W(this._chunkError,this)):d=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var p=this._input,H=(this._config.chunkSize&&(H=Math.min(this._start+this._config.chunkSize,this._input.size),p=y.call(p,this._start,H)),d.readAsText(p,this._config.encoding));S||this._chunkLoaded({target:{result:H}})},this._chunkLoaded=function(p){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(p.target.result)},this._chunkError=function(){this._sendError(d.error)}}function g(f){var d;c.call(this,f=f||{}),this.stream=function(y){return d=y,this._nextChunk()},this._nextChunk=function(){var y,S;if(!this._finished)return y=this._config.chunkSize,d=y?(S=d.substring(0,y),d.substring(y)):(S=d,""),this._finished=!d,this.parseChunk(S)}}function T(f){c.call(this,f=f||{});var d=[],y=!0,S=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(p){this._input=p,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){S&&d.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),d.length?this.parseChunk(d.shift()):y=!0},this._streamData=W(function(p){try{d.push(typeof p=="string"?p:p.toString(this._config.encoding)),y&&(y=!1,this._checkIsFinished(),this.parseChunk(d.shift()))}catch(H){this._streamError(H)}},this),this._streamError=W(function(p){this._streamCleanUp(),this._sendError(p)},this),this._streamEnd=W(function(){this._streamCleanUp(),S=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function L(f){var d,y,S,p,H=Math.pow(2,53),_=-H,N=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,w=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,v=this,b=0,k=0,X=!1,I=!1,F=[],P={data:[],errors:[],meta:{}};function Z(J){return f.skipEmptyLines==="greedy"?J.join("").trim()==="":J.length===1&&J[0].length===0}function tt(){if(P&&S&&(ut("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),S=!1),f.skipEmptyLines&&(P.data=P.data.filter(function(_t){return!Z(_t)})),st()){let _t=function(bt,dt){V(f.transformHeader)&&(bt=f.transformHeader(bt,dt)),F.push(bt)};var ot=_t;if(P)if(Array.isArray(P.data[0])){for(var J=0;st()&&J<P.data.length;J++)P.data[J].forEach(_t);P.data.splice(0,1)}else P.data.forEach(_t)}function Q(_t,bt){for(var dt=f.header?{}:[],mt=0;mt<_t.length;mt++){var et=mt,Et=_t[mt],Et=((ft,vt)=>(x=>(f.dynamicTypingFunction&&f.dynamicTyping[x]===void 0&&(f.dynamicTyping[x]=f.dynamicTypingFunction(x)),(f.dynamicTyping[x]||f.dynamicTyping)===!0))(ft)?vt==="true"||vt==="TRUE"||vt!=="false"&&vt!=="FALSE"&&((x=>{if(N.test(x)&&(x=parseFloat(x),_<x&&x<H))return 1})(vt)?parseFloat(vt):w.test(vt)?new Date(vt):vt===""?null:vt):vt)(et=f.header?mt>=F.length?"__parsed_extra":F[mt]:et,Et=f.transform?f.transform(Et,et):Et);et==="__parsed_extra"?(dt[et]=dt[et]||[],dt[et].push(Et)):dt[et]=Et}return f.header&&(mt>F.length?ut("FieldMismatch","TooManyFields","Too many fields: expected "+F.length+" fields but parsed "+mt,k+bt):mt<F.length&&ut("FieldMismatch","TooFewFields","Too few fields: expected "+F.length+" fields but parsed "+mt,k+bt)),dt}var wt;P&&(f.header||f.dynamicTyping||f.transform)&&(wt=1,!P.data.length||Array.isArray(P.data[0])?(P.data=P.data.map(Q),wt=P.data.length):P.data=Q(P.data,0),f.header&&P.meta&&(P.meta.fields=F),k+=wt)}function st(){return f.header&&F.length===0}function ut(J,Q,wt,ot){J={type:J,code:Q,message:wt},ot!==void 0&&(J.row=ot),P.errors.push(J)}V(f.step)&&(p=f.step,f.step=function(J){P=J,st()?tt():(tt(),P.data.length!==0&&(b+=J.data.length,f.preview&&b>f.preview?y.abort():(P.data=P.data[0],p(P,v))))}),this.parse=function(J,Q,wt){var ot=f.quoteChar||'"',ot=(f.newline||(f.newline=this.guessLineEndings(J,ot)),S=!1,f.delimiter?V(f.delimiter)&&(f.delimiter=f.delimiter(J),P.meta.delimiter=f.delimiter):((ot=((_t,bt,dt,mt,et)=>{var Et,ft,vt,x;et=et||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var G=0;G<et.length;G++){for(var Y,yt=et[G],lt=0,ht=0,it=0,M=(vt=void 0,new A({comments:mt,delimiter:yt,newline:bt,preview:10}).parse(_t)),q=0;q<M.data.length;q++)dt&&Z(M.data[q])?it++:(Y=M.data[q].length,ht+=Y,vt===void 0?vt=Y:0<Y&&(lt+=Math.abs(Y-vt),vt=Y));0<M.data.length&&(ht/=M.data.length-it),(ft===void 0||lt<=ft)&&(x===void 0||x<ht)&&1.99<ht&&(ft=lt,Et=yt,x=ht)}return{successful:!!(f.delimiter=Et),bestDelimiter:Et}})(J,f.newline,f.skipEmptyLines,f.comments,f.delimitersToGuess)).successful?f.delimiter=ot.bestDelimiter:(S=!0,f.delimiter=l.DefaultDelimiter),P.meta.delimiter=f.delimiter),O(f));return f.preview&&f.header&&ot.preview++,d=J,y=new A(ot),P=y.parse(d,Q,wt),tt(),X?{meta:{paused:!0}}:P||{meta:{paused:!1}}},this.paused=function(){return X},this.pause=function(){X=!0,y.abort(),d=V(f.chunk)?"":d.substring(y.getCharIndex())},this.resume=function(){v.streamer._halted?(X=!1,v.streamer.parseChunk(d,!0)):setTimeout(v.resume,3)},this.aborted=function(){return I},this.abort=function(){I=!0,y.abort(),P.meta.aborted=!0,V(f.complete)&&f.complete(P),d=""},this.guessLineEndings=function(_t,ot){_t=_t.substring(0,1048576);var ot=new RegExp(z(ot)+"([^]*?)"+z(ot),"gm"),wt=(_t=_t.replace(ot,"")).split("\r"),ot=_t.split(`
`),_t=1<ot.length&&ot[0].length<wt[0].length;if(wt.length===1||_t)return`
`;for(var bt=0,dt=0;dt<wt.length;dt++)wt[dt][0]===`
`&&bt++;return bt>=wt.length/2?`\r
`:"\r"}}function z(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(f){var d=(f=f||{}).delimiter,y=f.newline,S=f.comments,p=f.step,H=f.preview,_=f.fastMode,N=null,w=!1,v=f.quoteChar==null?'"':f.quoteChar,b=v;if(f.escapeChar!==void 0&&(b=f.escapeChar),(typeof d!="string"||-1<l.BAD_DELIMITERS.indexOf(d))&&(d=","),S===d)throw new Error("Comment character same as delimiter");S===!0?S="#":(typeof S!="string"||-1<l.BAD_DELIMITERS.indexOf(S))&&(S=!1),y!==`
`&&y!=="\r"&&y!==`\r
`&&(y=`
`);var k=0,X=!1;this.parse=function(I,F,P){if(typeof I!="string")throw new Error("Input must be a string");var Z=I.length,tt=d.length,st=y.length,ut=S.length,J=V(p),Q=[],wt=[],ot=[],_t=k=0;if(!I)return lt();if(_||_!==!1&&I.indexOf(v)===-1){for(var bt=I.split(y),dt=0;dt<bt.length;dt++){if(ot=bt[dt],k+=ot.length,dt!==bt.length-1)k+=y.length;else if(P)return lt();if(!S||ot.substring(0,ut)!==S){if(J){if(Q=[],x(ot.split(d)),ht(),X)return lt()}else x(ot.split(d));if(H&&H<=dt)return Q=Q.slice(0,H),lt(!0)}}return lt()}for(var mt=I.indexOf(d,k),et=I.indexOf(y,k),Et=new RegExp(z(b)+z(v),"g"),ft=I.indexOf(v,k);;)if(I[k]===v)for(ft=k,k++;;){if((ft=I.indexOf(v,ft+1))===-1)return P||wt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Q.length,index:k}),Y();if(ft===Z-1)return Y(I.substring(k,ft).replace(Et,v));if(v===b&&I[ft+1]===b)ft++;else if(v===b||ft===0||I[ft-1]!==b){mt!==-1&&mt<ft+1&&(mt=I.indexOf(d,ft+1));var vt=G((et=et!==-1&&et<ft+1?I.indexOf(y,ft+1):et)===-1?mt:Math.min(mt,et));if(I.substr(ft+1+vt,tt)===d){ot.push(I.substring(k,ft).replace(Et,v)),I[k=ft+1+vt+tt]!==v&&(ft=I.indexOf(v,k)),mt=I.indexOf(d,k),et=I.indexOf(y,k);break}if(vt=G(et),I.substring(ft+1+vt,ft+1+vt+st)===y){if(ot.push(I.substring(k,ft).replace(Et,v)),yt(ft+1+vt+st),mt=I.indexOf(d,k),ft=I.indexOf(v,k),J&&(ht(),X))return lt();if(H&&Q.length>=H)return lt(!0);break}wt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Q.length,index:k}),ft++}}else if(S&&ot.length===0&&I.substring(k,k+ut)===S){if(et===-1)return lt();k=et+st,et=I.indexOf(y,k),mt=I.indexOf(d,k)}else if(mt!==-1&&(mt<et||et===-1))ot.push(I.substring(k,mt)),k=mt+tt,mt=I.indexOf(d,k);else{if(et===-1)break;if(ot.push(I.substring(k,et)),yt(et+st),J&&(ht(),X))return lt();if(H&&Q.length>=H)return lt(!0)}return Y();function x(it){Q.push(it),_t=k}function G(it){var M=0;return M=it!==-1&&(it=I.substring(ft+1,it))&&it.trim()===""?it.length:M}function Y(it){return P||(it===void 0&&(it=I.substring(k)),ot.push(it),k=Z,x(ot),J&&ht()),lt()}function yt(it){k=it,x(ot),ot=[],et=I.indexOf(y,k)}function lt(it){if(f.header&&!F&&Q.length&&!w){var M=Q[0],q={},C=new Set(M);let U=!1;for(let ct=0;ct<M.length;ct++){let pt=M[ct];if(q[pt=V(f.transformHeader)?f.transformHeader(pt,ct):pt]){let Mt,At=q[pt];for(;Mt=pt+"_"+At,At++,C.has(Mt););C.add(Mt),M[ct]=Mt,q[pt]++,U=!0,(N=N===null?{}:N)[Mt]=pt}else q[pt]=1,M[ct]=pt;C.add(pt)}U&&console.warn("Duplicate headers found and renamed."),w=!0}return{data:Q,errors:wt,meta:{delimiter:d,linebreak:y,aborted:X,truncated:!!it,cursor:_t+(F||0),renamedHeaders:N}}}function ht(){p(lt()),Q=[],wt=[]}},this.abort=function(){X=!0},this.getCharIndex=function(){return k}}function rt(f){var d=f.data,y=a[d.workerId],S=!1;if(d.error)y.userError(d.error,d.file);else if(d.results&&d.results.data){var p={abort:function(){S=!0,D(d.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(V(y.userStep)){for(var H=0;H<d.results.data.length&&(y.userStep({data:d.results.data[H],errors:d.results.errors,meta:d.results.meta},p),!S);H++);delete d.results}else V(y.userChunk)&&(y.userChunk(d.results,p,d.file),delete d.results)}d.finished&&!S&&D(d.workerId,d.results)}function D(f,d){var y=a[f];V(y.userComplete)&&y.userComplete(d),y.terminate(),delete a[f]}function j(){throw new Error("Not implemented.")}function O(f){if(typeof f!="object"||f===null)return f;var d,y=Array.isArray(f)?[]:{};for(d in f)y[d]=O(f[d]);return y}function W(f,d){return function(){f.apply(d,arguments)}}function V(f){return typeof f=="function"}return l.parse=function(f,d){var y=(d=d||{}).dynamicTyping||!1;if(V(y)&&(d.dynamicTypingFunction=y,y={}),d.dynamicTyping=y,d.transform=!!V(d.transform)&&d.transform,!d.worker||!l.WORKERS_SUPPORTED)return y=null,l.NODE_STREAM_INPUT,typeof f=="string"?(f=(S=>S.charCodeAt(0)!==65279?S:S.slice(1))(f),y=new(d.download?h:g)(d)):f.readable===!0&&V(f.read)&&V(f.on)?y=new T(d):(r.File&&f instanceof File||f instanceof Object)&&(y=new m(d)),y.stream(f);(y=(()=>{var S;return!!l.WORKERS_SUPPORTED&&(S=(()=>{var p=r.URL||r.webkitURL||null,H=n.toString();return l.BLOB_URL||(l.BLOB_URL=p.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",H,")();"],{type:"text/javascript"})))})(),(S=new r.Worker(S)).onmessage=rt,S.id=u++,a[S.id]=S)})()).userStep=d.step,y.userChunk=d.chunk,y.userComplete=d.complete,y.userError=d.error,d.step=V(d.step),d.chunk=V(d.chunk),d.complete=V(d.complete),d.error=V(d.error),delete d.worker,y.postMessage({input:f,config:d,workerId:y.id})},l.unparse=function(f,d){var y=!1,S=!0,p=",",H=`\r
`,_='"',N=_+_,w=!1,v=null,b=!1,k=((()=>{if(typeof d=="object"){if(typeof d.delimiter!="string"||l.BAD_DELIMITERS.filter(function(F){return d.delimiter.indexOf(F)!==-1}).length||(p=d.delimiter),typeof d.quotes!="boolean"&&typeof d.quotes!="function"&&!Array.isArray(d.quotes)||(y=d.quotes),typeof d.skipEmptyLines!="boolean"&&typeof d.skipEmptyLines!="string"||(w=d.skipEmptyLines),typeof d.newline=="string"&&(H=d.newline),typeof d.quoteChar=="string"&&(_=d.quoteChar),typeof d.header=="boolean"&&(S=d.header),Array.isArray(d.columns)){if(d.columns.length===0)throw new Error("Option columns is empty");v=d.columns}d.escapeChar!==void 0&&(N=d.escapeChar+_),d.escapeFormulae instanceof RegExp?b=d.escapeFormulae:typeof d.escapeFormulae=="boolean"&&d.escapeFormulae&&(b=/^[=+\-@\t\r].*$/)}})(),new RegExp(z(_),"g"));if(typeof f=="string"&&(f=JSON.parse(f)),Array.isArray(f)){if(!f.length||Array.isArray(f[0]))return X(null,f,w);if(typeof f[0]=="object")return X(v||Object.keys(f[0]),f,w)}else if(typeof f=="object")return typeof f.data=="string"&&(f.data=JSON.parse(f.data)),Array.isArray(f.data)&&(f.fields||(f.fields=f.meta&&f.meta.fields||v),f.fields||(f.fields=Array.isArray(f.data[0])?f.fields:typeof f.data[0]=="object"?Object.keys(f.data[0]):[]),Array.isArray(f.data[0])||typeof f.data[0]=="object"||(f.data=[f.data])),X(f.fields||[],f.data||[],w);throw new Error("Unable to serialize unrecognized input");function X(F,P,Z){var tt="",st=(typeof F=="string"&&(F=JSON.parse(F)),typeof P=="string"&&(P=JSON.parse(P)),Array.isArray(F)&&0<F.length),ut=!Array.isArray(P[0]);if(st&&S){for(var J=0;J<F.length;J++)0<J&&(tt+=p),tt+=I(F[J],J);0<P.length&&(tt+=H)}for(var Q=0;Q<P.length;Q++){var wt=(st?F:P[Q]).length,ot=!1,_t=st?Object.keys(P[Q]).length===0:P[Q].length===0;if(Z&&!st&&(ot=Z==="greedy"?P[Q].join("").trim()==="":P[Q].length===1&&P[Q][0].length===0),Z==="greedy"&&st){for(var bt=[],dt=0;dt<wt;dt++){var mt=ut?F[dt]:dt;bt.push(P[Q][mt])}ot=bt.join("").trim()===""}if(!ot){for(var et=0;et<wt;et++){0<et&&!_t&&(tt+=p);var Et=st&&ut?F[et]:et;tt+=I(P[Q][Et],et)}Q<P.length-1&&(!Z||0<wt&&!_t)&&(tt+=H)}}return tt}function I(F,P){var Z,tt;return F==null?"":F.constructor===Date?JSON.stringify(F).slice(1,25):(tt=!1,b&&typeof F=="string"&&b.test(F)&&(F="'"+F,tt=!0),Z=F.toString().replace(k,N),(tt=tt||y===!0||typeof y=="function"&&y(F,P)||Array.isArray(y)&&y[P]||((st,ut)=>{for(var J=0;J<ut.length;J++)if(-1<st.indexOf(ut[J]))return!0;return!1})(Z,l.BAD_DELIMITERS)||-1<Z.indexOf(p)||Z.charAt(0)===" "||Z.charAt(Z.length-1)===" ")?_+Z+_:Z)}},l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!s&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=A,l.ParserHandle=L,l.NetworkStreamer=h,l.FileStreamer=m,l.StringStreamer=g,l.ReadableStreamStreamer=T,r.jQuery&&((i=r.jQuery).fn.parse=function(f){var d=f.config||{},y=[];return this.each(function(H){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var _=0;_<this.files.length;_++)y.push({file:this.files[_],inputElem:this,instanceConfig:i.extend({},d)})}),S(),this;function S(){if(y.length===0)V(f.complete)&&f.complete();else{var H,_,N,w,v=y[0];if(V(f.before)){var b=f.before(v.file,v.inputElem);if(typeof b=="object"){if(b.action==="abort")return H="AbortError",_=v.file,N=v.inputElem,w=b.reason,void(V(f.error)&&f.error({name:H},_,N,w));if(b.action==="skip")return void p();typeof b.config=="object"&&(v.instanceConfig=i.extend(v.instanceConfig,b.config))}else if(b==="skip")return void p()}var k=v.instanceConfig.complete;v.instanceConfig.complete=function(X){V(k)&&k(X,v.file,v.inputElem),p()},l.parse(v.file,v.instanceConfig)}}function p(){y.splice(0,1),S()}}),o&&(r.onmessage=function(f){f=f.data,l.WORKER_ID===void 0&&f&&(l.WORKER_ID=f.workerId),typeof f.input=="string"?r.postMessage({workerId:l.WORKER_ID,results:l.parse(f.input,f.config),finished:!0}):(r.File&&f.input instanceof File||f.input instanceof Object)&&(f=l.parse(f.input,f.config))&&r.postMessage({workerId:l.WORKER_ID,results:f,finished:!0})}),(h.prototype=Object.create(c.prototype)).constructor=h,(m.prototype=Object.create(c.prototype)).constructor=m,(g.prototype=Object.create(g.prototype)).constructor=g,(T.prototype=Object.create(c.prototype)).constructor=T,l})})(Yr);const Vi=Yr.exports;function Pe(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qi(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wr(t){let e,n,r;t.length!==2?(e=Pe,n=(a,u)=>Pe(t(a),u),r=(a,u)=>t(a)-u):(e=t===Pe||t===qi?t:Bi,n=t,r=t);function i(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{const h=l+c>>>1;n(a[h],u)<0?l=h+1:c=h}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{const h=l+c>>>1;n(a[h],u)<=0?l=h+1:c=h}while(l<c)}return l}function o(a,u,l=0,c=a.length){const h=i(a,u,l,c-1);return h>l&&r(a[h-1],u)>-r(a[h],u)?h-1:h}return{left:i,center:o,right:s}}function Bi(){return 0}function Hi(t){return t===null?NaN:+t}const Xi=Wr(Pe),Ui=Xi.right;Wr(Hi).center;const Yi=Ui;class Qn extends Map{constructor(e,n=ji){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Gn(this,e))}has(e){return super.has(Gn(this,e))}set(e,n){return super.set(Wi(this,e),n)}delete(e){return super.delete(Ki(this,e))}}function Gn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Wi({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Ki({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ji(t){return t!==null&&typeof t=="object"?t.valueOf():t}var wn=Math.sqrt(50),vn=Math.sqrt(10),bn=Math.sqrt(2);function Qi(t,e,n){var r,i=-1,s,o,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(s=t,t=e,e=s),(a=Kr(t,e,n))===0||!isFinite(a))return[];if(a>0){let u=Math.round(t/a),l=Math.round(e/a);for(u*a<t&&++u,l*a>e&&--l,o=new Array(s=l-u+1);++i<s;)o[i]=(u+i)*a}else{a=-a;let u=Math.round(t*a),l=Math.round(e*a);for(u/a<t&&++u,l/a>e&&--l,o=new Array(s=l-u+1);++i<s;)o[i]=(u+i)/a}return r&&o.reverse(),o}function Kr(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=wn?10:s>=vn?5:s>=bn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=wn?10:s>=vn?5:s>=bn?2:1)}function Gi(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=wn?i*=10:s>=vn?i*=5:s>=bn&&(i*=2),e<t?-i:i}function Zn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Jn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function jr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const $n=Symbol("implicit");function zn(){var t=new Qn,e=[],n=[],r=$n;function i(s){let o=t.get(s);if(o===void 0){if(r!==$n)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Qn;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return zn(e,n).unknown(r)},jr.apply(i,arguments),i}function On(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Qr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ce(){}var Se=.7,Ke=1/Se,ue="\\s*([+-]?\\d+)\\s*",Me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Zi=/^#([0-9a-f]{3,8})$/,Ji=new RegExp(`^rgb\\(${ue},${ue},${ue}\\)$`),$i=new RegExp(`^rgb\\(${Yt},${Yt},${Yt}\\)$`),ts=new RegExp(`^rgba\\(${ue},${ue},${ue},${Me}\\)$`),es=new RegExp(`^rgba\\(${Yt},${Yt},${Yt},${Me}\\)$`),ns=new RegExp(`^hsl\\(${Me},${Yt},${Yt}\\)$`),rs=new RegExp(`^hsla\\(${Me},${Yt},${Yt},${Me}\\)$`),tr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};On(Ce,re,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:er,formatHex:er,formatHex8:is,formatHsl:ss,formatRgb:nr,toString:nr});function er(){return this.rgb().formatHex()}function is(){return this.rgb().formatHex8()}function ss(){return Gr(this).formatHsl()}function nr(){return this.rgb().formatRgb()}function re(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Zi.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rr(e):n===3?new Pt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Re(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Re(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ji.exec(t))?new Pt(e[1],e[2],e[3],1):(e=$i.exec(t))?new Pt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ts.exec(t))?Re(e[1],e[2],e[3],e[4]):(e=es.exec(t))?Re(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ns.exec(t))?or(e[1],e[2]/100,e[3]/100,1):(e=rs.exec(t))?or(e[1],e[2]/100,e[3]/100,e[4]):tr.hasOwnProperty(t)?rr(tr[t]):t==="transparent"?new Pt(NaN,NaN,NaN,0):null}function rr(t){return new Pt(t>>16&255,t>>8&255,t&255,1)}function Re(t,e,n,r){return r<=0&&(t=e=n=NaN),new Pt(t,e,n,r)}function os(t){return t instanceof Ce||(t=re(t)),t?(t=t.rgb(),new Pt(t.r,t.g,t.b,t.opacity)):new Pt}function kn(t,e,n,r){return arguments.length===1?os(t):new Pt(t,e,n,r==null?1:r)}function Pt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}On(Pt,kn,Qr(Ce,{brighter(t){return t=t==null?Ke:Math.pow(Ke,t),new Pt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Se:Math.pow(Se,t),new Pt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Pt(ne(this.r),ne(this.g),ne(this.b),je(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ir,formatHex:ir,formatHex8:ls,formatRgb:sr,toString:sr}));function ir(){return`#${ee(this.r)}${ee(this.g)}${ee(this.b)}`}function ls(){return`#${ee(this.r)}${ee(this.g)}${ee(this.b)}${ee((isNaN(this.opacity)?1:this.opacity)*255)}`}function sr(){const t=je(this.opacity);return`${t===1?"rgb(":"rgba("}${ne(this.r)}, ${ne(this.g)}, ${ne(this.b)}${t===1?")":`, ${t})`}`}function je(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ne(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ee(t){return t=ne(t),(t<16?"0":"")+t.toString(16)}function or(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ht(t,e,n,r)}function Gr(t){if(t instanceof Ht)return new Ht(t.h,t.s,t.l,t.opacity);if(t instanceof Ce||(t=re(t)),!t)return new Ht;if(t instanceof Ht)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(e===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-e)/a+2:o=(e-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Ht(o,a,u,t.opacity)}function as(t,e,n,r){return arguments.length===1?Gr(t):new Ht(t,e,n,r==null?1:r)}function Ht(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}On(Ht,as,Qr(Ce,{brighter(t){return t=t==null?Ke:Math.pow(Ke,t),new Ht(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Se:Math.pow(Se,t),new Ht(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Pt(dn(t>=240?t-240:t+120,i,r),dn(t,i,r),dn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ht(lr(this.h),Te(this.s),Te(this.l),je(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=je(this.opacity);return`${t===1?"hsl(":"hsla("}${lr(this.h)}, ${Te(this.s)*100}%, ${Te(this.l)*100}%${t===1?")":`, ${t})`}`}}));function lr(t){return t=(t||0)%360,t<0?t+360:t}function Te(t){return Math.max(0,Math.min(1,t||0))}function dn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Pn=t=>()=>t;function us(t,e){return function(n){return t+n*e}}function fs(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function cs(t){return(t=+t)==1?Zr:function(e,n){return n-e?fs(e,n,t):Pn(isNaN(e)?n:e)}}function Zr(t,e){var n=e-t;return n?us(t,n):Pn(isNaN(t)?e:t)}const Qe=function t(e){var n=cs(e);function r(i,s){var o=n((i=kn(i)).r,(s=kn(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Zr(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function hs(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function ds(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ms(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Fn(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function ps(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Bt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function gs(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Fn(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var xn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mn=new RegExp(xn.source,"g");function _s(t){return function(){return t}}function ys(t){return function(e){return t(e)+""}}function Jr(t,e){var n=xn.lastIndex=mn.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(t=t+"",e=e+"";(r=xn.exec(t))&&(i=mn.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Bt(r,i)})),n=mn.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?ys(u[0].x):_s(e):(e=u.length,function(l){for(var c=0,h;c<e;++c)a[(h=u[c]).i]=h.x(l);return a.join("")})}function Fn(t,e){var n=typeof e,r;return e==null||n==="boolean"?Pn(e):(n==="number"?Bt:n==="string"?(r=re(e))?(e=r,Qe):Jr:e instanceof re?Qe:e instanceof Date?ps:ds(e)?hs:Array.isArray(e)?ms:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gs:Bt)(t,e)}function ws(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var ar=180/Math.PI,Sn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $r(t,e,n,r,i,s){var o,a,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*ar,skewX:Math.atan(u)*ar,scaleX:o,scaleY:a}}var Ne;function vs(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Sn:$r(e.a,e.b,e.c,e.d,e.e,e.f)}function bs(t){return t==null||(Ne||(Ne=document.createElementNS("http://www.w3.org/2000/svg","g")),Ne.setAttribute("transform",t),!(t=Ne.transform.baseVal.consolidate()))?Sn:(t=t.matrix,$r(t.a,t.b,t.c,t.d,t.e,t.f))}function ti(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,h,m,g,T){if(l!==h||c!==m){var L=g.push("translate(",null,e,null,n);T.push({i:L-4,x:Bt(l,h)},{i:L-2,x:Bt(c,m)})}else(h||m)&&g.push("translate("+h+e+m+n)}function o(l,c,h,m){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),m.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Bt(l,c)})):c&&h.push(i(h)+"rotate("+c+r)}function a(l,c,h,m){l!==c?m.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Bt(l,c)}):c&&h.push(i(h)+"skewX("+c+r)}function u(l,c,h,m,g,T){if(l!==h||c!==m){var L=g.push(i(g)+"scale(",null,",",null,")");T.push({i:L-4,x:Bt(l,h)},{i:L-2,x:Bt(c,m)})}else(h!==1||m!==1)&&g.push(i(g)+"scale("+h+","+m+")")}return function(l,c){var h=[],m=[];return l=t(l),c=t(c),s(l.translateX,l.translateY,c.translateX,c.translateY,h,m),o(l.rotate,c.rotate,h,m),a(l.skewX,c.skewX,h,m),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,h,m),l=c=null,function(g){for(var T=-1,L=m.length,z;++T<L;)h[(z=m[T]).i]=z.x(g);return h.join("")}}}var ks=ti(vs,"px, ","px)","deg)"),xs=ti(bs,", ",")",")"),Ss=1e-12;function ur(t){return((t=Math.exp(t))+1/t)/2}function Ms(t){return((t=Math.exp(t))-1/t)/2}function Es(t){return((t=Math.exp(2*t))-1)/(t+1)}const Cs=function t(e,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],h=o[1],m=o[2],g=c-a,T=h-u,L=g*g+T*T,z,A;if(L<Ss)A=Math.log(m/l)/e,z=function(V){return[a+V*g,u+V*T,l*Math.exp(e*V*A)]};else{var rt=Math.sqrt(L),D=(m*m-l*l+r*L)/(2*l*n*rt),j=(m*m-l*l-r*L)/(2*m*n*rt),O=Math.log(Math.sqrt(D*D+1)-D),W=Math.log(Math.sqrt(j*j+1)-j);A=(W-O)/e,z=function(V){var f=V*A,d=ur(O),y=l/(n*rt)*(d*Es(e*f+O)-Ms(O));return[a+y*g,u+y*T,l*d/ur(e*f+O)]}}return z.duration=A*1e3*e/Math.SQRT2,z}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return t(o,a,u)},i}(Math.SQRT2,2,4);function As(t){return function(){return t}}function Ds(t){return+t}var fr=[0,1];function oe(t){return t}function Mn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:As(isNaN(e)?NaN:.5)}function Rs(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ts(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=Mn(i,r),s=n(o,s)):(r=Mn(r,i),s=n(s,o)),function(a){return s(r(a))}}function Ns(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Mn(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var u=Yi(t,a,1,r)-1;return s[u](i[u](a))}}function Ls(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Is(){var t=fr,e=fr,n=Fn,r,i,s,o=oe,a,u,l;function c(){var m=Math.min(t.length,e.length);return o!==oe&&(o=Rs(t[0],t[m-1])),a=m>2?Ns:Ts,u=l=null,h}function h(m){return m==null||isNaN(m=+m)?s:(u||(u=a(t.map(r),e,n)))(r(o(m)))}return h.invert=function(m){return o(i((l||(l=a(e,t.map(r),Bt)))(m)))},h.domain=function(m){return arguments.length?(t=Array.from(m,Ds),c()):t.slice()},h.range=function(m){return arguments.length?(e=Array.from(m),c()):e.slice()},h.rangeRound=function(m){return e=Array.from(m),n=ws,c()},h.clamp=function(m){return arguments.length?(o=m?!0:oe,c()):o!==oe},h.interpolate=function(m){return arguments.length?(n=m,c()):n},h.unknown=function(m){return arguments.length?(s=m,h):s},function(m,g){return r=m,i=g,c()}}function zs(){return Is()(oe,oe)}function Os(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ge(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function fe(t){return t=Ge(Math.abs(t)),t?t[1]:NaN}function Ps(t,e){return function(n,r){for(var i=n.length,s=[],o=0,a=t[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Fs(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Vs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ze(t){if(!(e=Vs.exec(t)))throw new Error("invalid format: "+t);var e;return new Vn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ze.prototype=Vn.prototype;function Vn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Vn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qs(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ei;function Bs(t,e){var n=Ge(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(ei=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Ge(t,Math.max(0,e+s-1))[0]}function cr(t,e){var n=Ge(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const hr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Os,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>cr(t*100,e),r:cr,s:Bs,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function dr(t){return t}var mr=Array.prototype.map,pr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Hs(t){var e=t.grouping===void 0||t.thousands===void 0?dr:Ps(mr.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?dr:Fs(mr.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(h){h=Ze(h);var m=h.fill,g=h.align,T=h.sign,L=h.symbol,z=h.zero,A=h.width,rt=h.comma,D=h.precision,j=h.trim,O=h.type;O==="n"?(rt=!0,O="g"):hr[O]||(D===void 0&&(D=12),j=!0,O="g"),(z||m==="0"&&g==="=")&&(z=!0,m="0",g="=");var W=L==="$"?n:L==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",V=L==="$"?r:/[%p]/.test(O)?o:"",f=hr[O],d=/[defgprs%]/.test(O);D=D===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function y(S){var p=W,H=V,_,N,w;if(O==="c")H=f(S)+H,S="";else{S=+S;var v=S<0||1/S<0;if(S=isNaN(S)?u:f(Math.abs(S),D),j&&(S=qs(S)),v&&+S==0&&T!=="+"&&(v=!1),p=(v?T==="("?T:a:T==="-"||T==="("?"":T)+p,H=(O==="s"?pr[8+ei/3]:"")+H+(v&&T==="("?")":""),d){for(_=-1,N=S.length;++_<N;)if(w=S.charCodeAt(_),48>w||w>57){H=(w===46?i+S.slice(_+1):S.slice(_))+H,S=S.slice(0,_);break}}}rt&&!z&&(S=e(S,1/0));var b=p.length+S.length+H.length,k=b<A?new Array(A-b+1).join(m):"";switch(rt&&z&&(S=e(k+S,k.length?A-H.length:1/0),k=""),g){case"<":S=p+S+H+k;break;case"=":S=p+k+S+H;break;case"^":S=k.slice(0,b=k.length>>1)+p+S+H+k.slice(b);break;default:S=k+p+S+H;break}return s(S)}return y.toString=function(){return h+""},y}function c(h,m){var g=l((h=Ze(h),h.type="f",h)),T=Math.max(-8,Math.min(8,Math.floor(fe(m)/3)))*3,L=Math.pow(10,-T),z=pr[8+T/3];return function(A){return g(L*A)+z}}return{format:l,formatPrefix:c}}var Le,ni,ri;Xs({thousands:",",grouping:[3],currency:["$",""]});function Xs(t){return Le=Hs(t),ni=Le.format,ri=Le.formatPrefix,Le}function Us(t){return Math.max(0,-fe(Math.abs(t)))}function Ys(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fe(e)/3)))*3-fe(Math.abs(t)))}function Ws(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,fe(e)-fe(t))+1}function Ks(t,e,n,r){var i=Gi(t,e,n),s;switch(r=Ze(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Ys(i,o))&&(r.precision=s),ri(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Ws(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Us(i))&&(r.precision=s-(r.type==="%")*2);break}}return ni(r)}function js(t){var e=t.domain;return t.ticks=function(n){var r=e();return Qi(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return Ks(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=Kr(o,a,n),l===u)return r[i]=o,r[s]=a,e(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return t},t}function En(){var t=zs();return t.copy=function(){return Ls(t,En())},jr.apply(t,arguments),js(t)}function Qs(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const ii=Qs("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Gs={value:()=>{}};function qn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Fe(n)}function Fe(t){this._=t}function Zs(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Fe.prototype=qn.prototype={constructor:Fe,on:function(t,e){var n=this._,r=Zs(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Js(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=gr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=gr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Fe(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Js(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function gr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Gs,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Cn="http://www.w3.org/1999/xhtml";const _r={svg:"http://www.w3.org/2000/svg",xhtml:Cn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function an(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),_r.hasOwnProperty(e)?{space:_r[e],local:t}:t}function $s(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Cn&&e.documentElement.namespaceURI===Cn?e.createElement(t):e.createElementNS(n,t)}}function to(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function si(t){var e=an(t);return(e.local?to:$s)(e)}function eo(){}function Bn(t){return t==null?eo:function(){return this.querySelector(t)}}function no(t){typeof t!="function"&&(t=Bn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=t.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ft(r,this._parents)}function ro(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function io(){return[]}function oi(t){return t==null?io:function(){return this.querySelectorAll(t)}}function so(t){return function(){return ro(t.apply(this,arguments))}}function oo(t){typeof t=="function"?t=so(t):t=oi(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(t.call(u,u.__data__,l,o)),i.push(u));return new Ft(r,i)}function li(t){return function(){return this.matches(t)}}function ai(t){return function(e){return e.matches(t)}}var lo=Array.prototype.find;function ao(t){return function(){return lo.call(this.children,t)}}function uo(){return this.firstElementChild}function fo(t){return this.select(t==null?uo:ao(typeof t=="function"?t:ai(t)))}var co=Array.prototype.filter;function ho(){return Array.from(this.children)}function mo(t){return function(){return co.call(this.children,t)}}function po(t){return this.selectAll(t==null?ho:mo(typeof t=="function"?t:ai(t)))}function go(t){typeof t!="function"&&(t=li(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&a.push(u);return new Ft(r,this._parents)}function ui(t){return new Array(t.length)}function _o(){return new Ft(this._enter||this._groups.map(ui),this._parents)}function Je(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Je.prototype={constructor:Je,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function yo(t){return function(){return t}}function wo(t,e,n,r,i,s){for(var o=0,a,u=e.length,l=s.length;o<l;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):n[o]=new Je(t,s[o]);for(;o<u;++o)(a=e[o])&&(i[o]=a)}function vo(t,e,n,r,i,s,o){var a,u,l=new Map,c=e.length,h=s.length,m=new Array(c),g;for(a=0;a<c;++a)(u=e[a])&&(m[a]=g=o.call(u,u.__data__,a,e)+"",l.has(g)?i[a]=u:l.set(g,u));for(a=0;a<h;++a)g=o.call(t,s[a],a,s)+"",(u=l.get(g))?(r[a]=u,u.__data__=s[a],l.delete(g)):n[a]=new Je(t,s[a]);for(a=0;a<c;++a)(u=e[a])&&l.get(m[a])===u&&(i[a]=u)}function bo(t){return t.__data__}function ko(t,e){if(!arguments.length)return Array.from(this,bo);var n=e?vo:wo,r=this._parents,i=this._groups;typeof t!="function"&&(t=yo(t));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],h=i[l],m=h.length,g=xo(t.call(c,c&&c.__data__,l,r)),T=g.length,L=a[l]=new Array(T),z=o[l]=new Array(T),A=u[l]=new Array(m);n(c,h,L,z,A,g,e);for(var rt=0,D=0,j,O;rt<T;++rt)if(j=L[rt]){for(rt>=D&&(D=rt+1);!(O=z[D])&&++D<T;);j._next=O||null}}return o=new Ft(o,r),o._enter=a,o._exit=u,o}function xo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function So(){return new Ft(this._exit||this._groups.map(ui),this._parents)}function Mo(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Eo(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],h=l.length,m=a[u]=new Array(h),g,T=0;T<h;++T)(g=l[T]||c[T])&&(m[T]=g);for(;u<i;++u)a[u]=n[u];return new Ft(a,this._parents)}function Co(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Ao(t){t||(t=Do);function e(h,m){return h&&m?t(h.__data__,m.__data__):!h-!m}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(e)}return new Ft(i,this._parents).order()}function Do(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ro(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function To(){return Array.from(this)}function No(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Lo(){let t=0;for(const e of this)++t;return t}function Io(){return!this.node()}function zo(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&t.call(a,a.__data__,s,i);return this}function Oo(t){return function(){this.removeAttribute(t)}}function Po(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fo(t,e){return function(){this.setAttribute(t,e)}}function Vo(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function qo(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Bo(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ho(t,e){var n=an(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Po:Oo:typeof e=="function"?n.local?Bo:qo:n.local?Vo:Fo)(n,e))}function fi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Xo(t){return function(){this.style.removeProperty(t)}}function Uo(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Yo(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Wo(t,e,n){return arguments.length>1?this.each((e==null?Xo:typeof e=="function"?Yo:Uo)(t,e,n==null?"":n)):ce(this.node(),t)}function ce(t,e){return t.style.getPropertyValue(e)||fi(t).getComputedStyle(t,null).getPropertyValue(e)}function Ko(t){return function(){delete this[t]}}function jo(t,e){return function(){this[t]=e}}function Qo(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Go(t,e){return arguments.length>1?this.each((e==null?Ko:typeof e=="function"?Qo:jo)(t,e)):this.node()[t]}function ci(t){return t.trim().split(/^|\s+/)}function Hn(t){return t.classList||new hi(t)}function hi(t){this._node=t,this._names=ci(t.getAttribute("class")||"")}hi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function di(t,e){for(var n=Hn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function mi(t,e){for(var n=Hn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Zo(t){return function(){di(this,t)}}function Jo(t){return function(){mi(this,t)}}function $o(t,e){return function(){(e.apply(this,arguments)?di:mi)(this,t)}}function tl(t,e){var n=ci(t+"");if(arguments.length<2){for(var r=Hn(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?$o:e?Zo:Jo)(n,e))}function el(){this.textContent=""}function nl(t){return function(){this.textContent=t}}function rl(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function il(t){return arguments.length?this.each(t==null?el:(typeof t=="function"?rl:nl)(t)):this.node().textContent}function sl(){this.innerHTML=""}function ol(t){return function(){this.innerHTML=t}}function ll(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function al(t){return arguments.length?this.each(t==null?sl:(typeof t=="function"?ll:ol)(t)):this.node().innerHTML}function ul(){this.nextSibling&&this.parentNode.appendChild(this)}function fl(){return this.each(ul)}function cl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hl(){return this.each(cl)}function dl(t){var e=typeof t=="function"?t:si(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ml(){return null}function pl(t,e){var n=typeof t=="function"?t:si(t),r=e==null?ml:typeof e=="function"?e:Bn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function gl(){var t=this.parentNode;t&&t.removeChild(this)}function _l(){return this.each(gl)}function yl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vl(t){return this.select(t?wl:yl)}function bl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function kl(t){return function(e){t.call(this,e,this.__data__)}}function xl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Sl(t){return function(){var e=this.__on;if(!!e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Ml(t,e,n){return function(){var r=this.__on,i,s=kl(e);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function El(t,e,n){var r=xl(t+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=e?Ml:Sl,i=0;i<s;++i)this.each(a(r[i],e,n));return this}function pi(t,e,n){var r=fi(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Cl(t,e){return function(){return pi(this,t,e)}}function Al(t,e){return function(){return pi(this,t,e.apply(this,arguments))}}function Dl(t,e){return this.each((typeof e=="function"?Al:Cl)(t,e))}function*Rl(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var gi=[null];function Ft(t,e){this._groups=t,this._parents=e}function Ae(){return new Ft([[document.documentElement]],gi)}function Tl(){return this}Ft.prototype=Ae.prototype={constructor:Ft,select:no,selectAll:oo,selectChild:fo,selectChildren:po,filter:go,data:ko,enter:_o,exit:So,join:Mo,merge:Eo,selection:Tl,order:Co,sort:Ao,call:Ro,nodes:To,node:No,size:Lo,empty:Io,each:zo,attr:Ho,style:Wo,property:Go,classed:tl,text:il,html:al,raise:fl,lower:hl,append:dl,insert:pl,remove:_l,clone:vl,datum:bl,on:El,dispatch:Dl,[Symbol.iterator]:Rl};function Jt(t){return typeof t=="string"?new Ft([[document.querySelector(t)]],[document.documentElement]):new Ft([[t]],gi)}function Nl(t){let e;for(;e=t.sourceEvent;)t=e;return t}function $t(t,e){if(t=Nl(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const An={capture:!0,passive:!1};function Dn(t){t.preventDefault(),t.stopImmediatePropagation()}function Ll(t){var e=t.document.documentElement,n=Jt(t).on("dragstart.drag",Dn,An);"onselectstart"in e?n.on("selectstart.drag",Dn,An):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Il(t,e){var n=t.document.documentElement,r=Jt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Dn,An),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var he=0,ve=0,pe=0,_i=1e3,$e,be,tn=0,ie=0,un=0,Ee=typeof performance=="object"&&performance.now?performance:Date,yi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xn(){return ie||(yi(zl),ie=Ee.now()+un)}function zl(){ie=0}function en(){this._call=this._time=this._next=null}en.prototype=wi.prototype={constructor:en,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Xn():+n)+(e==null?0:+e),!this._next&&be!==this&&(be?be._next=this:$e=this,be=this),this._call=t,this._time=n,Rn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rn())}};function wi(t,e,n){var r=new en;return r.restart(t,e,n),r}function Ol(){Xn(),++he;for(var t=$e,e;t;)(e=ie-t._time)>=0&&t._call.call(void 0,e),t=t._next;--he}function yr(){ie=(tn=Ee.now())+un,he=ve=0;try{Ol()}finally{he=0,Fl(),ie=0}}function Pl(){var t=Ee.now(),e=t-tn;e>_i&&(un-=e,tn=t)}function Fl(){for(var t,e=$e,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:$e=n);be=t,Rn(r)}function Rn(t){if(!he){ve&&(ve=clearTimeout(ve));var e=t-ie;e>24?(t<1/0&&(ve=setTimeout(yr,t-Ee.now()-un)),pe&&(pe=clearInterval(pe))):(pe||(tn=Ee.now(),pe=setInterval(Pl,_i)),he=1,yi(yr))}}function wr(t,e,n){var r=new en;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Vl=qn("start","end","cancel","interrupt"),ql=[],vi=0,vr=1,Tn=2,Ve=3,br=4,Nn=5,qe=6;function fn(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Bl(t,n,{name:e,index:r,group:i,on:Vl,tween:ql,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:vi})}function Un(t,e){var n=Ut(t,e);if(n.state>vi)throw new Error("too late; already scheduled");return n}function Wt(t,e){var n=Ut(t,e);if(n.state>Ve)throw new Error("too late; already running");return n}function Ut(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Bl(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=wi(s,0,n.time);function s(l){n.state=vr,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,h,m,g;if(n.state!==vr)return u();for(c in r)if(g=r[c],g.name===n.name){if(g.state===Ve)return wr(o);g.state===br?(g.state=qe,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[c]):+c<e&&(g.state=qe,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[c])}if(wr(function(){n.state===Ve&&(n.state=br,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Tn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Tn){for(n.state=Ve,i=new Array(m=n.tween.length),c=0,h=-1;c<m;++c)(g=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=g);i.length=h+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Nn,1),h=-1,m=i.length;++h<m;)i[h].call(t,c);n.state===Nn&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=qe,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Be(t,e){var n=t.__transition,r,i,s=!0,o;if(!!n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>Tn&&r.state<Nn,r.state=qe,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Hl(t){return this.each(function(){Be(this,t)})}function Xl(t,e){var n,r;return function(){var i=Wt(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Ul(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Wt(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Yl(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ut(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Xl:Ul)(n,t,e))}function Yn(t,e,n){var r=t._id;return t.each(function(){var i=Wt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Ut(i,r).value[e]}}function bi(t,e){var n;return(typeof e=="number"?Bt:e instanceof re?Qe:(n=re(e))?(e=n,Qe):Jr)(t,e)}function Wl(t){return function(){this.removeAttribute(t)}}function Kl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function jl(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function Ql(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function Gl(t,e,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a)))}}function Zl(t,e,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a)))}}function Jl(t,e){var n=an(t),r=n==="transform"?xs:bi;return this.attrTween(t,typeof e=="function"?(n.local?Zl:Gl)(n,r,Yn(this,"attr."+t,e)):e==null?(n.local?Kl:Wl)(n):(n.local?Ql:jl)(n,r,e))}function $l(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ta(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ea(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&ta(t,s)),n}return i._value=e,i}function na(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&$l(t,s)),n}return i._value=e,i}function ra(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=an(t);return this.tween(n,(r.local?ea:na)(r,e))}function ia(t,e){return function(){Un(this,t).delay=+e.apply(this,arguments)}}function sa(t,e){return e=+e,function(){Un(this,t).delay=e}}function oa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ia:sa)(e,t)):Ut(this.node(),e).delay}function la(t,e){return function(){Wt(this,t).duration=+e.apply(this,arguments)}}function aa(t,e){return e=+e,function(){Wt(this,t).duration=e}}function ua(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?la:aa)(e,t)):Ut(this.node(),e).duration}function fa(t,e){if(typeof e!="function")throw new Error;return function(){Wt(this,t).ease=e}}function ca(t){var e=this._id;return arguments.length?this.each(fa(e,t)):Ut(this.node(),e).ease}function ha(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Wt(this,t).ease=n}}function da(t){if(typeof t!="function")throw new Error;return this.each(ha(this._id,t))}function ma(t){typeof t!="function"&&(t=li(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&t.call(u,u.__data__,l,s)&&a.push(u);return new Qt(r,this._parents,this._name,this._id)}function pa(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=e[a],l=n[a],c=u.length,h=o[a]=new Array(c),m,g=0;g<c;++g)(m=u[g]||l[g])&&(h[g]=m);for(;a<r;++a)o[a]=e[a];return new Qt(o,this._parents,this._name,this._id)}function ga(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function _a(t,e,n){var r,i,s=ga(e)?Un:Wt;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}function ya(t,e){var n=this._id;return arguments.length<2?Ut(this.node(),n).on.on(t):this.each(_a(n,t,e))}function wa(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function va(){return this.on("end.remove",wa(this._id))}function ba(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Bn(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,h,m=0;m<u;++m)(c=a[m])&&(h=t.call(c,c.__data__,m,a))&&("__data__"in c&&(h.__data__=c.__data__),l[m]=h,fn(l[m],e,n,m,l,Ut(c,n)));return new Qt(s,this._parents,e,n)}function ka(t){var e=this._name,n=this._id;typeof t!="function"&&(t=oi(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,h=0;h<l;++h)if(c=u[h]){for(var m=t.call(c,c.__data__,h,u),g,T=Ut(c,n),L=0,z=m.length;L<z;++L)(g=m[L])&&fn(g,e,n,L,m,T);s.push(m),o.push(c)}return new Qt(s,o,e,n)}var xa=Ae.prototype.constructor;function Sa(){return new xa(this._groups,this._parents)}function Ma(t,e){var n,r,i;return function(){var s=ce(this,t),o=(this.style.removeProperty(t),ce(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function ki(t){return function(){this.style.removeProperty(t)}}function Ea(t,e,n){var r,i=n+"",s;return function(){var o=ce(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function Ca(t,e,n){var r,i,s;return function(){var o=ce(this,t),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),ce(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a))}}function Aa(t,e){var n,r,i,s="style."+e,o="end."+s,a;return function(){var u=Wt(this,t),l=u.on,c=u.value[s]==null?a||(a=ki(e)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Da(t,e,n){var r=(t+="")=="transform"?ks:bi;return e==null?this.styleTween(t,Ma(t,r)).on("end.style."+t,ki(t)):typeof e=="function"?this.styleTween(t,Ca(t,r,Yn(this,"style."+t,e))).each(Aa(this._id,t)):this.styleTween(t,Ea(t,r,e),n).on("end.style."+t,null)}function Ra(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Ta(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Ra(t,o,n)),r}return s._value=e,s}function Na(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Ta(t,e,n==null?"":n))}function La(t){return function(){this.textContent=t}}function Ia(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function za(t){return this.tween("text",typeof t=="function"?Ia(Yn(this,"text",t)):La(t==null?"":t+""))}function Oa(t){return function(e){this.textContent=t.call(this,e)}}function Pa(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Oa(i)),e}return r._value=t,r}function Fa(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Pa(t))}function Va(){for(var t=this._name,e=this._id,n=xi(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Ut(u,e);fn(u,t,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Qt(r,this._parents,t,n)}function qa(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Wt(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),l.on=e}),i===0&&s()})}var Ba=0;function Qt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function xi(){return++Ba}var Kt=Ae.prototype;Qt.prototype={constructor:Qt,select:ba,selectAll:ka,selectChild:Kt.selectChild,selectChildren:Kt.selectChildren,filter:ma,merge:pa,selection:Sa,transition:Va,call:Kt.call,nodes:Kt.nodes,node:Kt.node,size:Kt.size,empty:Kt.empty,each:Kt.each,on:ya,attr:Jl,attrTween:ra,style:Da,styleTween:Na,text:za,textTween:Fa,remove:va,tween:Yl,delay:oa,duration:ua,ease:ca,easeVarying:da,end:qa,[Symbol.iterator]:Kt[Symbol.iterator]};function Ha(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Xa={time:null,delay:0,duration:250,ease:Ha};function Ua(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Ya(t){var e,n;t instanceof Qt?(e=t._id,t=t._name):(e=xi(),(n=Xa).time=Xn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&fn(u,t,e,l,o,n||Ua(u,e));return new Qt(r,this._parents,t,e)}Ae.prototype.interrupt=Hl;Ae.prototype.transition=Ya;const Ie=t=>()=>t;function Wa(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function jt(t,e,n){this.k=t,this.x=e,this.y=n}jt.prototype={constructor:jt,scale:function(t){return t===1?this:new jt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new jt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var nn=new jt(1,0,0);jt.prototype;function pn(t){t.stopImmediatePropagation()}function ge(t){t.preventDefault(),t.stopImmediatePropagation()}function Ka(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function ja(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function kr(){return this.__zoom||nn}function Qa(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ga(){return navigator.maxTouchPoints||"ontouchstart"in this}function Za(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Ja(){var t=Ka,e=ja,n=Za,r=Qa,i=Ga,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Cs,l=qn("start","zoom","end"),c,h,m,g=500,T=150,L=0,z=10;function A(_){_.property("__zoom",kr).on("wheel.zoom",f,{passive:!1}).on("mousedown.zoom",d).on("dblclick.zoom",y).filter(i).on("touchstart.zoom",S).on("touchmove.zoom",p).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}A.transform=function(_,N,w,v){var b=_.selection?_.selection():_;b.property("__zoom",kr),_!==b?O(_,N,w,v):b.interrupt().each(function(){W(this,arguments).event(v).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},A.scaleBy=function(_,N,w,v){A.scaleTo(_,function(){var b=this.__zoom.k,k=typeof N=="function"?N.apply(this,arguments):N;return b*k},w,v)},A.scaleTo=function(_,N,w,v){A.transform(_,function(){var b=e.apply(this,arguments),k=this.__zoom,X=w==null?j(b):typeof w=="function"?w.apply(this,arguments):w,I=k.invert(X),F=typeof N=="function"?N.apply(this,arguments):N;return n(D(rt(k,F),X,I),b,o)},w,v)},A.translateBy=function(_,N,w,v){A.transform(_,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof w=="function"?w.apply(this,arguments):w),e.apply(this,arguments),o)},null,v)},A.translateTo=function(_,N,w,v,b){A.transform(_,function(){var k=e.apply(this,arguments),X=this.__zoom,I=v==null?j(k):typeof v=="function"?v.apply(this,arguments):v;return n(nn.translate(I[0],I[1]).scale(X.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof w=="function"?-w.apply(this,arguments):-w),k,o)},v,b)};function rt(_,N){return N=Math.max(s[0],Math.min(s[1],N)),N===_.k?_:new jt(N,_.x,_.y)}function D(_,N,w){var v=N[0]-w[0]*_.k,b=N[1]-w[1]*_.k;return v===_.x&&b===_.y?_:new jt(_.k,v,b)}function j(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function O(_,N,w,v){_.on("start.zoom",function(){W(this,arguments).event(v).start()}).on("interrupt.zoom end.zoom",function(){W(this,arguments).event(v).end()}).tween("zoom",function(){var b=this,k=arguments,X=W(b,k).event(v),I=e.apply(b,k),F=w==null?j(I):typeof w=="function"?w.apply(b,k):w,P=Math.max(I[1][0]-I[0][0],I[1][1]-I[0][1]),Z=b.__zoom,tt=typeof N=="function"?N.apply(b,k):N,st=u(Z.invert(F).concat(P/Z.k),tt.invert(F).concat(P/tt.k));return function(ut){if(ut===1)ut=tt;else{var J=st(ut),Q=P/J[2];ut=new jt(Q,F[0]-J[0]*Q,F[1]-J[1]*Q)}X.zoom(null,ut)}})}function W(_,N,w){return!w&&_.__zooming||new V(_,N)}function V(_,N){this.that=_,this.args=N,this.active=0,this.sourceEvent=null,this.extent=e.apply(_,N),this.taps=0}V.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,N){return this.mouse&&_!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var N=Jt(this.that).datum();l.call(_,this.that,new Wa(_,{sourceEvent:this.sourceEvent,target:A,type:_,transform:this.that.__zoom,dispatch:l}),N)}};function f(_,...N){if(!t.apply(this,arguments))return;var w=W(this,N).event(_),v=this.__zoom,b=Math.max(s[0],Math.min(s[1],v.k*Math.pow(2,r.apply(this,arguments)))),k=$t(_);if(w.wheel)(w.mouse[0][0]!==k[0]||w.mouse[0][1]!==k[1])&&(w.mouse[1]=v.invert(w.mouse[0]=k)),clearTimeout(w.wheel);else{if(v.k===b)return;w.mouse=[k,v.invert(k)],Be(this),w.start()}ge(_),w.wheel=setTimeout(X,T),w.zoom("mouse",n(D(rt(v,b),w.mouse[0],w.mouse[1]),w.extent,o));function X(){w.wheel=null,w.end()}}function d(_,...N){if(m||!t.apply(this,arguments))return;var w=_.currentTarget,v=W(this,N,!0).event(_),b=Jt(_.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",P,!0),k=$t(_,w),X=_.clientX,I=_.clientY;Ll(_.view),pn(_),v.mouse=[k,this.__zoom.invert(k)],Be(this),v.start();function F(Z){if(ge(Z),!v.moved){var tt=Z.clientX-X,st=Z.clientY-I;v.moved=tt*tt+st*st>L}v.event(Z).zoom("mouse",n(D(v.that.__zoom,v.mouse[0]=$t(Z,w),v.mouse[1]),v.extent,o))}function P(Z){b.on("mousemove.zoom mouseup.zoom",null),Il(Z.view,v.moved),ge(Z),v.event(Z).end()}}function y(_,...N){if(!!t.apply(this,arguments)){var w=this.__zoom,v=$t(_.changedTouches?_.changedTouches[0]:_,this),b=w.invert(v),k=w.k*(_.shiftKey?.5:2),X=n(D(rt(w,k),v,b),e.apply(this,N),o);ge(_),a>0?Jt(this).transition().duration(a).call(O,X,v,_):Jt(this).call(A.transform,X,v,_)}}function S(_,...N){if(!!t.apply(this,arguments)){var w=_.touches,v=w.length,b=W(this,N,_.changedTouches.length===v).event(_),k,X,I,F;for(pn(_),X=0;X<v;++X)I=w[X],F=$t(I,this),F=[F,this.__zoom.invert(F),I.identifier],b.touch0?!b.touch1&&b.touch0[2]!==F[2]&&(b.touch1=F,b.taps=0):(b.touch0=F,k=!0,b.taps=1+!!c);c&&(c=clearTimeout(c)),k&&(b.taps<2&&(h=F[0],c=setTimeout(function(){c=null},g)),Be(this),b.start())}}function p(_,...N){if(!!this.__zooming){var w=W(this,N).event(_),v=_.changedTouches,b=v.length,k,X,I,F;for(ge(_),k=0;k<b;++k)X=v[k],I=$t(X,this),w.touch0&&w.touch0[2]===X.identifier?w.touch0[0]=I:w.touch1&&w.touch1[2]===X.identifier&&(w.touch1[0]=I);if(X=w.that.__zoom,w.touch1){var P=w.touch0[0],Z=w.touch0[1],tt=w.touch1[0],st=w.touch1[1],ut=(ut=tt[0]-P[0])*ut+(ut=tt[1]-P[1])*ut,J=(J=st[0]-Z[0])*J+(J=st[1]-Z[1])*J;X=rt(X,Math.sqrt(ut/J)),I=[(P[0]+tt[0])/2,(P[1]+tt[1])/2],F=[(Z[0]+st[0])/2,(Z[1]+st[1])/2]}else if(w.touch0)I=w.touch0[0],F=w.touch0[1];else return;w.zoom("touch",n(D(X,I,F),w.extent,o))}}function H(_,...N){if(!!this.__zooming){var w=W(this,N).event(_),v=_.changedTouches,b=v.length,k,X;for(pn(_),m&&clearTimeout(m),m=setTimeout(function(){m=null},g),k=0;k<b;++k)X=v[k],w.touch0&&w.touch0[2]===X.identifier?delete w.touch0:w.touch1&&w.touch1[2]===X.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(X=$t(X,this),Math.hypot(h[0]-X[0],h[1]-X[1])<z)){var I=Jt(this).on("dblclick.zoom");I&&I.apply(this,arguments)}}}return A.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:Ie(+_),A):r},A.filter=function(_){return arguments.length?(t=typeof _=="function"?_:Ie(!!_),A):t},A.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:Ie(!!_),A):i},A.extent=function(_){return arguments.length?(e=typeof _=="function"?_:Ie([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),A):e},A.scaleExtent=function(_){return arguments.length?(s[0]=+_[0],s[1]=+_[1],A):[s[0],s[1]]},A.translateExtent=function(_){return arguments.length?(o[0][0]=+_[0][0],o[1][0]=+_[1][0],o[0][1]=+_[0][1],o[1][1]=+_[1][1],A):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},A.constrain=function(_){return arguments.length?(n=_,A):n},A.duration=function(_){return arguments.length?(a=+_,A):a},A.interpolate=function(_){return arguments.length?(u=_,A):u},A.on=function(){var _=l.on.apply(l,arguments);return _===l?A:_},A.clickDistance=function(_){return arguments.length?(L=(_=+_)*_,A):Math.sqrt(L)},A.tapDistance=function(_){return arguments.length?(z=+_,A):z},A}function $a(t){let e,n,r,i,s,o,a,u,l,c,h;return{c(){e=B("div"),n=B("div"),r=B("button"),r.textContent="+",i=at(),s=B("button"),s.textContent="\u2212",o=at(),a=B("button"),a.textContent="\u27F2",u=at(),l=B("canvas"),E(r,"class","zoom-btn svelte-1q7voxg"),E(r,"aria-label","Zoom in"),E(r,"title","Zoom in"),E(s,"class","zoom-btn svelte-1q7voxg"),E(s,"aria-label","Zoom out"),E(s,"title","Zoom out"),E(a,"class","zoom-btn svelte-1q7voxg"),E(a,"aria-label","Reset zoom"),E(a,"title","Reset zoom"),E(n,"class","zoom-controls svelte-1q7voxg"),E(n,"aria-label","Zoom controls"),E(l,"width",t[0]),E(l,"height",t[1]),E(l,"class","svelte-1q7voxg"),E(e,"class","chart-container svelte-1q7voxg")},m(m,g){nt(m,e,g),R(e,n),R(n,r),R(n,i),R(n,s),R(n,o),R(n,a),R(e,u),R(e,l),t[31](l),t[32](e),c||(h=[kt(r,"click",t[7]),kt(s,"click",t[8]),kt(a,"click",t[9]),kt(l,"mousemove",t[4]),kt(l,"mouseleave",t[6]),kt(l,"click",t[5])],c=!0)},p(m,g){g[0]&1&&E(l,"width",m[0]),g[0]&2&&E(l,"height",m[1])},i:zt,o:zt,d(m){m&&$(e),t[31](null),t[32](null),c=!1,Gt(h)}}}const _e=10,tu=.5,eu=20,xr=800;function Zt(t,e){if(!e||!t)return!1;try{return new RegExp(e,"i").test(t)}catch{return t.toLowerCase().includes(e.toLowerCase())}}function nu(t,e,n){let r,i,s,o,a,u,l,c,h,{data:m=[]}=e,{domainColumn:g="category"}=e,{opacity:T=1}=e,{selectedValues:L=new Set}=e,{searchQuery:z=""}=e,{showAnnotations:A=!0}=e,{highlightedData:rt=[]}=e,{startDate:D=null}=e,{endDate:j=null}=e,{uniqueValues:O=[]}=e,{hoveredData:W=null}=e,{selectedData:V=null}=e,{clusterLabels:f=[]}=e,d=[],y,S,p,H=800,_=600;const N={top:40,right:80,bottom:40,left:120};let w=null,v=nn,b=!1,k=0,X=null,I="";function F(){b=!0,k=performance.now(),X&&cancelAnimationFrame(X),P()}function P(){performance.now()-k<xr?(Q(),X=requestAnimationFrame(P)):(b=!1,Q())}let Z,tt,st,ut=1;function J(){if(!y||!S)return;const x=S.getBoundingClientRect();x.width>0&&x.height>0&&(n(0,H=Math.floor(x.width)),n(1,_=Math.floor(x.height))),ut=Math.max(window.devicePixelRatio||1,1),n(2,y.style.width="100%",y),n(2,y.style.height="100%",y),n(2,y.width=Math.max(1,Math.floor(H*ut)),y),n(2,y.height=Math.max(1,Math.floor(_*ut)),y),n(23,p=y.getContext("2d")),p.setTransform(ut,0,0,ut,0,0)}function Q(){if(console.log("Scatterplot draw() called, data.length:",m.length),!p||!m.length)return;p.clearRect(0,0,H,_),p.save(),p.translate(v.x,v.y),p.scale(v.k,v.k);let x=0,G=1;if(b){const yt=(performance.now()-k)/xr,lt=Math.max(0,1-yt),ht=Math.sin(yt*Math.PI*8);x=ht*lt*4,G=1+ht*lt*.3}if(m.forEach(Y=>{p.beginPath();let yt=N.left+u(Y.x),lt=N.top+h(Y.y),ht=Math.max(.5,_e/v.k);b&&Y.isActive&&(yt+=x/v.k,lt+=x*.5/v.k,ht*=G),p.arc(yt,lt,ht,0,Math.PI*2);const it=Y[g]||"",M=it.includes(";")?it.split(";")[0].trim():it;n(23,p.fillStyle=st(M),p);const q=.9,C=Math.max(0,Math.min(1,T));n(23,p.globalAlpha=Y.isActive?q:C,p),p.fill(),n(23,p.globalAlpha=.2,p)}),f&&f.length>0&&(n(23,p.globalAlpha=.85,p),n(23,p.textAlign="center",p),f.forEach(Y=>{const yt=N.left+u(Y.x),lt=N.top+h(Y.y),ht=Y.label.match(/^(.+?)\s*\(Read:\s*(.+?)\)\s*$/),it=ht?ht[1].trim():Y.label,M=ht?ht[2].trim():null,q=Math.max(12,15/v.k);if(n(23,p.font=`bold ${q}px Arial`,p),n(23,p.textBaseline=M?"bottom":"middle",p),n(23,p.strokeStyle="white",p),n(23,p.lineWidth=Math.max(2,3/v.k),p),p.strokeText(it,yt,lt),n(23,p.fillStyle="#333",p),p.fillText(it,yt,lt),M){const C=Math.max(9,11/v.k);n(23,p.font=`${C}px Arial`,p),n(23,p.textBaseline="top",p);const U=lt+2/v.k;n(23,p.strokeStyle="white",p),n(23,p.lineWidth=Math.max(1.5,2.5/v.k),p),p.strokeText(M,yt,U),n(23,p.fillStyle="#555",p),p.fillText(M,yt,U)}})),A&&d.forEach(Y=>{n(23,p.globalAlpha=1,p),p.beginPath(),p.arc(Y.x,Y.y,Y.radius,0,Math.PI*2),n(23,p.strokeStyle="red",p),n(23,p.lineWidth=2,p),p.setLineDash([5,5]),p.stroke();const yt=180,lt=12;n(23,p.font="16px Arial",p);const ht=Y.x+Y.label_x,it=Y.y+Y.label_y;let M=0,q=0,C=[];if(Y.label){const Tt=Y.label.split(" ");let K="";Tt.forEach((gt,Nt)=>{const xt=K+gt+" ";p.measureText(xt).width>yt&&Nt>0?(C.push(K),M=Math.max(M,p.measureText(K).width),K=gt+" "):K=xt}),C.push(K),M=Math.max(M,p.measureText(K).width),q=lt*C.length}const U=ht,ct=it-lt,pt=M,Mt=q;let At,Rt;Y.x<U?At=U:Y.x>U+pt?At=U+pt:At=Y.x,Y.y<ct?Rt=ct:Y.y>ct+Mt?Rt=ct+Mt:Rt=Y.y;const Dt=Math.atan2(Rt-Y.y,At-Y.x),qt=Y.x+Y.radius*Math.cos(Dt),Ct=Y.y+Y.radius*Math.sin(Dt);if(p.setLineDash([]),p.beginPath(),p.moveTo(qt,Ct),p.lineTo(At,Rt),n(23,p.strokeStyle="red",p),n(23,p.lineWidth=1,p),p.stroke(),Y.label){n(23,p.font="16px Arial",p),n(23,p.fillStyle="red",p);const Tt=16;C.forEach((K,gt)=>{p.fillText(K,ht,it+gt*Tt)})}}),p.setLineDash([]),V){const Y=N.left+u(V.x),yt=N.top+h(V.y);p.beginPath(),p.arc(Y,yt,Math.max(.5,(_e+2)/v.k),0,Math.PI*2),n(23,p.fillStyle=st(V[g]),p),n(23,p.globalAlpha=1,p),p.fill(),n(23,p.strokeStyle="#1976d2",p),n(23,p.lineWidth=Math.max(1,3/v.k),p),p.stroke()}if(W&&W!==V){const Y=N.left+u(W.x),yt=N.top+h(W.y);p.beginPath(),p.arc(Y,yt,Math.max(.5,_e/v.k),0,Math.PI*2),n(23,p.fillStyle=st(W[g]),p),n(23,p.globalAlpha=1,p),p.fill(),n(23,p.strokeStyle="black",p),n(23,p.lineWidth=Math.max(1,2/v.k),p),p.stroke()}p.restore()}function wt(x){const G=y.getBoundingClientRect(),Y=H/G.width,yt=_/G.height,lt=(x.clientX-G.left)*Y,ht=(x.clientY-G.top)*yt,[it,M]=v.invert([lt,ht]),q=m.find(C=>{var Nt,xt,Lt,de,me;const U=N.left+u(C.x),ct=N.top+h(C.y),pt=U-it,Mt=ct-M,At=Math.sqrt(pt*pt+Mt*Mt)<(_e+3)/v.k,Dt=!!(z&&String(z).trim().length)?Zt((Nt=C.title)!=null?Nt:"",z)||Zt((xt=C.text)!=null?xt:"",z)||Zt((Lt=C.article_text)!=null?Lt:"",z)||Zt((de=C.summary)!=null?de:"",z):!0,qt=L&&L.size>0&&L.size<r,Ct=(me=C[g])!=null?me:"";let Tt=!0;qt&&(Ct.startsWith("No target;")?Tt=L.has(Ct):Tt=L.has(Ct)||[...L].some(cn=>Ct.includes(cn)));const K=D&&j?C.date>=D&&C.date<=j:!0;return At&&(Dt&&Tt&&K)});q?(n(11,W=q),w=q,n(2,y.style.cursor="pointer",y)):(n(11,W=null),w=null,n(2,y.style.cursor="crosshair",y)),Q()}function ot(x){const G=y.getBoundingClientRect(),Y=H/G.width,yt=_/G.height,lt=(x.clientX-G.left)*Y,ht=(x.clientY-G.top)*yt,[it,M]=v.invert([lt,ht]),q=m.find(C=>{var Nt,xt,Lt,de,me;const U=N.left+u(C.x),ct=N.top+h(C.y),pt=U-it,Mt=ct-M,At=Math.sqrt(pt*pt+Mt*Mt)<(_e+3)/v.k,Dt=!!(z&&String(z).trim().length)?Zt((Nt=C.title)!=null?Nt:"",z)||Zt((xt=C.text)!=null?xt:"",z)||Zt((Lt=C.article_text)!=null?Lt:"",z)||Zt((de=C.summary)!=null?de:"",z):!0,qt=L&&L.size>0&&L.size<r,Ct=(me=C[g])!=null?me:"";let Tt=!0;qt&&(Ct.startsWith("No target;")?Tt=L.has(Ct):Tt=L.has(Ct)||[...L].some(cn=>Ct.includes(cn)));const K=D&&j?C.date>=D&&C.date<=j:!0;return At&&(Dt&&Tt&&K)});if(!q){n(10,V=null),Q();return}if(x.ctrlKey||x.metaKey){const C=q.url||q.link||q.href||q.permalink||q.item_url;C&&typeof window<"u"&&window.open(C,"_blank","noopener,noreferrer");return}V===q?n(10,V=null):n(10,V=q),Q()}function _t(){n(11,W=w),Q()}let bt;In(()=>(console.log("Scatterplot mounted, canvas:",y),n(23,p=y.getContext("2d")),console.log("Canvas context:",p),J(),window.ResizeObserver&&(bt=new ResizeObserver(()=>{J(),Q()}),bt.observe(S)),Z=Ja().scaleExtent([tu,eu]).filter(x=>{const G=x;return G.type==="wheel"||G.type==="touchstart"||G.type==="touchmove"?!0:G.type==="mousedown"?G.button===0&&!G.ctrlKey&&!G.metaKey&&!G.shiftKey:!G.ctrlKey&&!G.metaKey&&!G.shiftKey}).on("zoom",x=>{v=x.transform,Q()}),tt=Jt(y),tt.call(Z),Q(),()=>{bt&&bt.disconnect()}));function dt(x,G){var lt;if((lt=G==null?void 0:G.stopPropagation)==null||lt.call(G),!tt||!Z)return;const Y=H/2,yt=_/2;tt.transition().duration(200).call(Z.scaleBy,x,[Y,yt])}function mt(x){dt(1.25,x)}function et(x){dt(1/1.25,x)}function Et(x){var G;(G=x==null?void 0:x.stopPropagation)==null||G.call(x),!(!tt||!Z)&&tt.transition().duration(200).call(Z.transform,nn)}function ft(x){Xt[x?"unshift":"push"](()=>{y=x,n(2,y)})}function vt(x){Xt[x?"unshift":"push"](()=>{S=x,n(3,S)})}return t.$$set=x=>{"data"in x&&n(12,m=x.data),"domainColumn"in x&&n(13,g=x.domainColumn),"opacity"in x&&n(14,T=x.opacity),"selectedValues"in x&&n(15,L=x.selectedValues),"searchQuery"in x&&n(16,z=x.searchQuery),"showAnnotations"in x&&n(17,A=x.showAnnotations),"highlightedData"in x&&n(18,rt=x.highlightedData),"startDate"in x&&n(19,D=x.startDate),"endDate"in x&&n(20,j=x.endDate),"uniqueValues"in x&&n(21,O=x.uniqueValues),"hoveredData"in x&&n(11,W=x.hoveredData),"selectedData"in x&&n(10,V=x.selectedData),"clusterLabels"in x&&n(22,f=x.clusterLabels)},t.$$.update=()=>{if(t.$$.dirty[0]&262144&&new Set(rt.map(x=>x.id)),t.$$.dirty[0]&12288&&(r=new Set(m.map(x=>x[g])).size),t.$$.dirty[0]&16809984){const x=[...L].sort().join("|");x!==I&&(n(24,I=x),L.size>0&&F())}t.$$.dirty[0]&1&&n(28,i=H-N.left-N.right),t.$$.dirty[0]&2&&n(25,s=_-N.top-N.bottom),t.$$.dirty[0]&4096&&n(30,o=[Jn(m,x=>x.x),Zn(m,x=>x.x)]),t.$$.dirty[0]&1073741824&&n(29,a=o[0]===o[1]?[o[0]-1,o[1]+1]:o),t.$$.dirty[0]&805306368&&(u=En().domain(a).range([0,i])),t.$$.dirty[0]&4096&&n(27,l=[Jn(m,x=>x.y),Zn(m,x=>x.y)]),t.$$.dirty[0]&134217728&&n(26,c=l[0]===l[1]?[l[0]-1,l[1]+1]:l),t.$$.dirty[0]&100663296&&(h=En().domain(c).range([s,0])),t.$$.dirty[0]&2105344&&(st=zn(ii).domain(g?O:[])),t.$$.dirty[0]&4096&&m.length&&new Date(Math.min(...m.map(x=>x.date.getTime()))),t.$$.dirty[0]&4096&&m.length&&new Date(Math.max(...m.map(x=>x.date.getTime()))),t.$$.dirty[0]&14414848&&p&&m.length&&Q()},[H,_,y,S,wt,ot,_t,mt,et,Et,V,W,m,g,T,L,z,A,rt,D,j,O,f,p,I,s,c,l,i,a,o,ft,vt]}class ru extends ln{constructor(e){super(),on(this,e,nu,$a,sn,{data:12,domainColumn:13,opacity:14,selectedValues:15,searchQuery:16,showAnnotations:17,highlightedData:18,startDate:19,endDate:20,uniqueValues:21,hoveredData:11,selectedData:10,clusterLabels:22},null,[-1,-1])}}function Sr(t,e,n){const r=t.slice();return r[31]=e[n],r}function Mr(t){let e,n,r,i,s=t[31].label+"",o,a;return{c(){e=B("div"),n=B("div"),r=at(),i=B("div"),o=St(s),E(n,"class","marker-line svelte-1ype02c"),E(i,"class","marker-label svelte-1ype02c"),E(e,"class","marker svelte-1ype02c"),It(e,"left",t[31].percent+"%"),E(e,"title",a=t[31].label)},m(u,l){nt(u,e,l),R(e,n),R(e,r),R(e,i),R(i,o)},p(u,l){l[0]&8&&s!==(s=u[31].label+"")&&Ot(o,s),l[0]&8&&It(e,"left",u[31].percent+"%"),l[0]&8&&a!==(a=u[31].label)&&E(e,"title",a)},d(u){u&&$(e)}}}function iu(t){let e,n,r,i,s,o,a,u,l,c,h=t[3],m=[];for(let g=0;g<h.length;g+=1)m[g]=Mr(Sr(t,h,g));return{c(){e=B("div"),n=B("div"),r=B("div"),i=at();for(let g=0;g<m.length;g+=1)m[g].c();s=at(),o=B("div"),a=at(),u=B("div"),E(r,"class","track-inner svelte-1ype02c"),E(n,"class","track svelte-1ype02c"),E(o,"class","thumb start-thumb svelte-1ype02c"),It(o,"left",t[5]+"%"),E(u,"class","thumb end-thumb svelte-1ype02c"),It(u,"left",t[4]+"%"),E(e,"class","range-slider svelte-1ype02c"),It(e,"--start-percent",t[5]+"%"),It(e,"--end-percent",t[4]+"%")},m(g,T){nt(g,e,T),R(e,n),R(n,r),R(e,i);for(let L=0;L<m.length;L+=1)m[L].m(e,null);R(e,s),R(e,o),t[15](o),R(e,a),R(e,u),t[18](u),t[21](e),l||(c=[kt(r,"mousedown",t[13]),kt(r,"touchstart",t[14]),kt(o,"mousedown",t[16]),kt(o,"touchstart",t[17]),kt(u,"mousedown",t[19]),kt(u,"touchstart",t[20])],l=!0)},p(g,T){if(T[0]&8){h=g[3];let L;for(L=0;L<h.length;L+=1){const z=Sr(g,h,L);m[L]?m[L].p(z,T):(m[L]=Mr(z),m[L].c(),m[L].m(e,s))}for(;L<m.length;L+=1)m[L].d(1);m.length=h.length}T[0]&32&&It(o,"left",g[5]+"%"),T[0]&16&&It(u,"left",g[4]+"%"),T[0]&32&&It(e,"--start-percent",g[5]+"%"),T[0]&16&&It(e,"--end-percent",g[4]+"%")},i:zt,o:zt,d(g){g&&$(e),Ln(m,g),t[15](null),t[18](null),t[21](null),l=!1,Gt(c)}}}function su(t,e,n){let r,i,s,{min:o=0}=e,{max:a=100}=e,{startValue:u}=e,{endValue:l}=e,{markers:c=[]}=e;const h=Xr();let m,g,T,L=!1,z=null,A=null,rt=0;function D(b,k){L=!0,z=k,A=m.getBoundingClientRect(),k==="range"&&(rt=l-u),window.addEventListener("mousemove",j),window.addEventListener("mouseup",O)}function j(b){if(!L)return;const k=Math.min(Math.max(0,(b.clientX-A.left)/A.width),1),X=Math.round(k*(a-o)+o);if(z==="start")n(8,u=Math.min(X,l)),h("startChange",u);else if(z==="end")n(9,l=Math.max(X,u)),h("endChange",l);else if(z==="range"){let I=X-Math.floor(rt/2),F=X+Math.ceil(rt/2);I<o&&(I=o,F=o+rt),F>a&&(F=a,I=a-rt),I=Math.max(o,I),F=Math.min(a,F),n(8,u=I),n(9,l=F),h("startChange",u),h("endChange",l)}}function O(){L=!1,window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",O)}function W(b,k){b.preventDefault(),L=!0,z=k,A=m.getBoundingClientRect(),k==="range"&&(rt=l-u),window.addEventListener("touchmove",V,{passive:!1}),window.addEventListener("touchend",f)}function V(b){if(b.preventDefault(),!L)return;const k=b.touches[0],X=Math.min(Math.max(0,(k.clientX-A.left)/A.width),1),I=Math.round(X*(a-o)+o);if(z==="start")n(8,u=Math.min(I,l)),h("startChange",u);else if(z==="end")n(9,l=Math.max(I,u)),h("endChange",l);else if(z==="range"){let F=I-Math.floor(rt/2),P=I+Math.ceil(rt/2);F<o&&(F=o,P=o+rt),P>a&&(P=a,F=a-rt),F=Math.max(o,F),P=Math.min(a,P),n(8,u=F),n(9,l=P),h("startChange",u),h("endChange",l)}}function f(){L=!1,window.removeEventListener("touchmove",V),window.removeEventListener("touchend",f)}const d=b=>D(b,"range"),y=b=>W(b,"range");function S(b){Xt[b?"unshift":"push"](()=>{g=b,n(1,g)})}const p=b=>D(b,"start"),H=b=>W(b,"start");function _(b){Xt[b?"unshift":"push"](()=>{T=b,n(2,T)})}const N=b=>D(b,"end"),w=b=>W(b,"end");function v(b){Xt[b?"unshift":"push"](()=>{m=b,n(0,m)})}return t.$$set=b=>{"min"in b&&n(10,o=b.min),"max"in b&&n(11,a=b.max),"startValue"in b&&n(8,u=b.startValue),"endValue"in b&&n(9,l=b.endValue),"markers"in b&&n(12,c=b.markers)},t.$$.update=()=>{t.$$.dirty[0]&3328&&n(5,r=a>o?(u-o)/(a-o)*100:0),t.$$.dirty[0]&3584&&n(4,i=a>o?(l-o)/(a-o)*100:100),t.$$.dirty[0]&7168&&n(3,s=c.map(b=>({...b,percent:a>o?(b.index-o)/(a-o)*100:0})))},[m,g,T,s,i,r,D,W,u,l,o,a,c,d,y,S,p,H,_,N,w,v]}class ou extends ln{constructor(e){super(),on(this,e,su,iu,sn,{min:10,max:11,startValue:8,endValue:9,markers:12},null,[-1,-1])}}function lu(t){const e=t.slice(),n=Si(e[0][e[1]]);return e[13]=n,e}function au(t){let e,n=t[4]?"Click on a circle to pin it here.":"Hover over a circle to see details here.",r;return{c(){e=B("p"),r=St(n),E(e,"class","placeholder-text svelte-rhnfcj")},m(i,s){nt(i,e,s),R(e,r)},p(i,s){s&16&&n!==(n=i[4]?"Click on a circle to pin it here.":"Hover over a circle to see details here.")&&Ot(r,n)},d(i){i&&$(e)}}}function uu(t){let e,n,r=le(t[0].title,t[3])+"",i,s,o,a,u,l=t[0].date.toISOString().split("T")[0]+"",c,h,m,g,T,L=le(t[0].text||t[0].article_text,t[3])+"",z=t[4]&&Er(t),A=(t[0].url||t[0].link||t[0].href||t[0].permalink||t[0].item_url)&&Cr(t);function rt(f,d){return d&3&&(o=null),o==null&&(o=!!(f[1]==="topic"&&Si(f[0][f[1]]).sub)),o?Ar:fu}function D(f,d){return d===Ar?lu(f):f}let j=rt(t,-1),O=j(D(t,j)),W=t[6]&&Dr(t),V=t[0].summary&&Tr(t);return{c(){z&&z.c(),e=at(),n=B("h1"),i=at(),A&&A.c(),s=at(),O.c(),a=at(),u=B("h2"),c=St(l),h=at(),W&&W.c(),m=at(),V&&V.c(),g=at(),T=B("p"),E(n,"class","svelte-rhnfcj"),E(u,"class","svelte-rhnfcj"),E(T,"class","svelte-rhnfcj")},m(f,d){z&&z.m(f,d),nt(f,e,d),nt(f,n,d),n.innerHTML=r,nt(f,i,d),A&&A.m(f,d),nt(f,s,d),O.m(f,d),nt(f,a,d),nt(f,u,d),R(u,c),nt(f,h,d),W&&W.m(f,d),nt(f,m,d),V&&V.m(f,d),nt(f,g,d),nt(f,T,d),T.innerHTML=L},p(f,d){f[4]?z?z.p(f,d):(z=Er(f),z.c(),z.m(e.parentNode,e)):z&&(z.d(1),z=null),d&9&&r!==(r=le(f[0].title,f[3])+"")&&(n.innerHTML=r),f[0].url||f[0].link||f[0].href||f[0].permalink||f[0].item_url?A?A.p(f,d):(A=Cr(f),A.c(),A.m(s.parentNode,s)):A&&(A.d(1),A=null),j===(j=rt(f,d))&&O?O.p(D(f,j),d):(O.d(1),O=j(D(f,j)),O&&(O.c(),O.m(a.parentNode,a))),d&1&&l!==(l=f[0].date.toISOString().split("T")[0]+"")&&Ot(c,l),f[6]?W?W.p(f,d):(W=Dr(f),W.c(),W.m(m.parentNode,m)):W&&(W.d(1),W=null),f[0].summary?V?V.p(f,d):(V=Tr(f),V.c(),V.m(g.parentNode,g)):V&&(V.d(1),V=null),d&9&&L!==(L=le(f[0].text||f[0].article_text,f[3])+"")&&(T.innerHTML=L)},d(f){z&&z.d(f),f&&$(e),f&&$(n),f&&$(i),A&&A.d(f),f&&$(s),O.d(f),f&&$(a),f&&$(u),f&&$(h),W&&W.d(f),f&&$(m),V&&V.d(f),f&&$(g),f&&$(T)}}}function Er(t){let e,n,r,i,s,o;return{c(){e=B("div"),n=B("span"),n.textContent="\u{1F4CC} Pinned",r=at(),i=B("button"),i.textContent="\u2715",E(n,"class","pin-indicator svelte-rhnfcj"),E(i,"class","unpin-btn svelte-rhnfcj"),E(e,"class","pin-header svelte-rhnfcj")},m(a,u){nt(a,e,u),R(e,n),R(e,r),R(e,i),s||(o=kt(i,"click",t[9]),s=!0)},p:zt,d(a){a&&$(e),s=!1,o()}}}function Cr(t){let e,n,r;return{c(){e=B("a"),n=St("View on Factually"),E(e,"class","article-link svelte-rhnfcj"),E(e,"href",r=t[0].url||t[0].link||t[0].href||t[0].permalink||t[0].item_url),E(e,"target","_blank"),E(e,"rel","noopener noreferrer")},m(i,s){nt(i,e,s),R(e,n)},p(i,s){s&1&&r!==(r=i[0].url||i[0].link||i[0].href||i[0].permalink||i[0].item_url)&&E(e,"href",r)},d(i){i&&$(e)}}}function fu(t){let e,n=(t[5]?t[5](t[1],t[0][t[1]]):t[0][t[1]])+"",r;return{c(){e=B("span"),r=St(n),It(e,"background",t[2](rn(t[0][t[1]]))),E(e,"class","svelte-rhnfcj")},m(i,s){nt(i,e,s),R(e,r)},p(i,s){s&35&&n!==(n=(i[5]?i[5](i[1],i[0][i[1]]):i[0][i[1]])+"")&&Ot(r,n),s&7&&It(e,"background",i[2](rn(i[0][i[1]])))},d(i){i&&$(e)}}}function Ar(t){let e,n,r=t[13].main+"",i,s,o,a=t[13].sub+"",u;return{c(){e=B("span"),n=B("span"),i=St(r),s=at(),o=B("span"),u=St(a),E(n,"class","topic-main svelte-rhnfcj"),E(o,"class","topic-sub svelte-rhnfcj"),E(e,"class","topic-badge svelte-rhnfcj"),It(e,"background",t[2](rn(t[0][t[1]])))},m(l,c){nt(l,e,c),R(e,n),R(n,i),R(e,s),R(e,o),R(o,u)},p(l,c){c&3&&r!==(r=l[13].main+"")&&Ot(i,r),c&3&&a!==(a=l[13].sub+"")&&Ot(u,a),c&7&&It(e,"background",l[2](rn(l[0][l[1]])))},d(l){l&&$(e)}}}function Dr(t){let e=t[6](t[1],t[0][t[1]]),n,r=e&&Rr(t);return{c(){r&&r.c(),n=Br()},m(i,s){r&&r.m(i,s),nt(i,n,s)},p(i,s){s&67&&(e=i[6](i[1],i[0][i[1]])),e?r?r.p(i,s):(r=Rr(i),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(i){r&&r.d(i),i&&$(n)}}}function Rr(t){let e,n,r=t[6](t[1],t[0][t[1]])+"",i;return{c(){e=B("p"),n=B("em"),i=St(r),E(e,"class","svelte-rhnfcj")},m(s,o){nt(s,e,o),R(e,n),R(n,i)},p(s,o){o&67&&r!==(r=s[6](s[1],s[0][s[1]])+"")&&Ot(i,r)},d(s){s&&$(e)}}}function Tr(t){let e,n,r,i,s=le(t[0].summary,t[3])+"";return{c(){e=B("p"),n=B("strong"),n.textContent="Summary:",r=at(),i=new Ti(!1),i.a=null,E(e,"class","summary svelte-rhnfcj")},m(o,a){nt(o,e,a),R(e,n),R(e,r),i.m(s,e)},p(o,a){a&9&&s!==(s=le(o[0].summary,o[3])+"")&&i.p(s)},d(o){o&&$(e)}}}function cu(t){let e;function n(s,o){return s[0]?uu:au}let r=n(t),i=r(t);return{c(){e=B("div"),i.c(),E(e,"class","detail-card svelte-rhnfcj")},m(s,o){nt(s,e,o),i.m(e,null)},p(s,[o]){r===(r=n(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(e,null)))},i:zt,o:zt,d(s){s&&$(e),i.d()}}}function rn(t){if(!t)return"";const e=String(t);return e.includes(";")?e.split(";")[0].trim():e}function Si(t){if(!t)return{main:"",sub:""};const e=String(t),n=e.match(/^(.+?)\s*\(Read:\s*(.+?)\)\s*$/);return n?{main:n[1].trim(),sub:n[2].trim()}:{main:e,sub:""}}function le(t,e){if(!e||!t)return t;try{const n=new RegExp(`(${e})`,"gi");return t.replace(n,"<mark>$1</mark>")}catch{const r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`(${r})`,"gi");return t.replace(i,"<mark>$1</mark>")}}function hu(t,e,n){const r=Xr();let{hoveredData:i}=e,{domainColumn:s}=e,{data:o}=e,{colorScale:a}=e,{searchQuery:u=""}=e,{isPinned:l=!1}=e,{labelOverride:c=null}=e,{descriptionOverride:h=null}=e;In(()=>{a.domain(o.map(g=>g[s]))});const m=()=>r("unpin");return t.$$set=g=>{"hoveredData"in g&&n(0,i=g.hoveredData),"domainColumn"in g&&n(1,s=g.domainColumn),"data"in g&&n(8,o=g.data),"colorScale"in g&&n(2,a=g.colorScale),"searchQuery"in g&&n(3,u=g.searchQuery),"isPinned"in g&&n(4,l=g.isPinned),"labelOverride"in g&&n(5,c=g.labelOverride),"descriptionOverride"in g&&n(6,h=g.descriptionOverride)},[i,s,a,u,l,c,h,r,o,m]}class du extends ln{constructor(e){super(),on(this,e,hu,cu,sn,{hoveredData:0,domainColumn:1,data:8,colorScale:2,searchQuery:3,isPinned:4,labelOverride:5,descriptionOverride:6})}}function Nr(t,e,n){const r=t.slice();return r[66]=e[n],r}function Lr(t,e,n){const r=t.slice();return r[69]=e[n],r}function Ir(t){let e,n,r,i,s,o,a=t[13],u=[];for(let l=0;l<a.length;l+=1)u[l]=zr(Lr(t,a,l));return{c(){e=B("label"),e.textContent="\u{1F3A8} Color by:",n=at(),r=B("select"),i=B("option"),i.textContent="Select column";for(let l=0;l<u.length;l+=1)u[l].c();E(e,"for","domain-column"),E(e,"class","svelte-1tb07i0"),i.__value="",i.value=i.__value,i.disabled=!0,E(r,"id","domain-column"),E(r,"class","svelte-1tb07i0"),t[1]===void 0&&He(()=>t[40].call(r))},m(l,c){nt(l,e,c),nt(l,n,c),nt(l,r,c),R(r,i);for(let h=0;h<u.length;h+=1)u[h].m(r,null);jn(r,t[1]),s||(o=[kt(r,"change",t[29]),kt(r,"change",t[40])],s=!0)},p(l,c){if(c[0]&268443648){a=l[13];let h;for(h=0;h<a.length;h+=1){const m=Lr(l,a,h);u[h]?u[h].p(m,c):(u[h]=zr(m),u[h].c(),u[h].m(r,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}c[0]&8194&&jn(r,l[1])},d(l){l&&$(e),l&&$(n),l&&$(r),Ln(u,l),s=!1,Gt(o)}}}function zr(t){let e,n=(t[28][t[69]]||t[69])+"",r,i;return{c(){e=B("option"),r=St(n),e.__value=i=t[69],e.value=e.__value},m(s,o){nt(s,e,o),R(e,r)},p(s,o){o[0]&8192&&n!==(n=(s[28][s[69]]||s[69])+"")&&Ot(r,n),o[0]&8192&&i!==(i=s[69])&&(e.__value=i,e.value=e.__value)},d(s){s&&$(e)}}}function Or(t){let e,n,r,i,s,o,a,u,l=t[2],c=[];for(let h=0;h<l.length;h+=1)c[h]=Pr(Nr(t,l,h));return{c(){e=B("label"),e.textContent="\u2728 Highlight Values:",n=at(),r=B("select"),i=B("option"),s=St("\u2014 Show All \u2014");for(let h=0;h<c.length;h+=1)c[h].c();E(e,"for","value-select"),E(e,"class","svelte-1tb07i0"),i.__value="__ALL__",i.value=i.__value,i.selected=o=t[3].size===0,E(r,"id","value-select"),r.multiple=!0,E(r,"size","6"),E(r,"class","multi-select svelte-1tb07i0")},m(h,m){nt(h,e,m),nt(h,n,m),nt(h,r,m),R(r,i),R(i,s);for(let g=0;g<c.length;g+=1)c[g].m(r,null);a||(u=kt(r,"change",t[30]),a=!0)},p(h,m){if(m[0]&8&&o!==(o=h[3].size===0)&&(i.selected=o),m[0]&12){l=h[2];let g;for(g=0;g<l.length;g+=1){const T=Nr(h,l,g);c[g]?c[g].p(T,m):(c[g]=Pr(T),c[g].c(),c[g].m(r,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=l.length}},d(h){h&&$(e),h&&$(n),h&&$(r),Ln(c,h),a=!1,u()}}}function Pr(t){let e,n=Fr(t[66])+"",r,i,s;return{c(){e=B("option"),r=St(n),e.__value=i=t[66],e.value=e.__value,e.selected=s=t[3].has(t[66])},m(o,a){nt(o,e,a),R(e,r)},p(o,a){a[0]&4&&n!==(n=Fr(o[66])+"")&&Ot(r,n),a[0]&4&&i!==(i=o[66])&&(e.__value=i,e.value=e.__value),a[0]&12&&s!==(s=o[3].has(o[66]))&&(e.selected=s)},d(o){o&&$(e)}}}function mu(t){let e;return{c(){e=St("\u25B6")},m(n,r){nt(n,e,r)},d(n){n&&$(e)}}}function pu(t){let e;return{c(){e=St("\u275A\u275A")},m(n,r){nt(n,e,r)},d(n){n&&$(e)}}}function gu(t){let e;return{c(){e=B("p"),e.textContent="Waiting for data"},m(n,r){nt(n,e,r)},p:zt,i:zt,o:zt,d(n){n&&$(e)}}}function _u(t){let e,n,r;function i(c,h){return c[19]==="downloading"?bu:c[19]==="parsing"?vu:wu}let s=i(t),o=s(t);function a(c,h){return c[19]==="downloading"?xu:ku}let u=a(t),l=u(t);return{c(){e=B("div"),n=B("div"),o.c(),r=at(),l.c(),E(n,"class","progress-header svelte-1tb07i0"),E(e,"class","progress-wrap svelte-1tb07i0")},m(c,h){nt(c,e,h),R(e,n),o.m(n,null),R(e,r),l.m(e,null)},p(c,h){s!==(s=i(c))&&(o.d(1),o=s(c),o&&(o.c(),o.m(n,null))),u===(u=a(c))&&l?l.p(c,h):(l.d(1),l=u(c),l&&(l.c(),l.m(e,null)))},i:zt,o:zt,d(c){c&&$(e),o.d(),l.d()}}}function yu(t){let e,n,r,i;function s(u){t[52](u)}function o(u){t[53](u)}let a={data:t[6],domainColumn:t[1],selectedValues:t[3],opacity:t[14],searchQuery:t[10],showAnnotations:t[16],highlightedData:t[9],startDate:t[4],endDate:t[5],uniqueValues:t[2],clusterLabels:t[17]};return t[11]!==void 0&&(a.hoveredData=t[11]),t[12]!==void 0&&(a.selectedData=t[12]),e=new ru({props:a}),Xt.push(()=>Ue(e,"hoveredData",s)),Xt.push(()=>Ue(e,"selectedData",o)),{c(){yn(e.$$.fragment)},m(u,l){Ye(e,u,l),i=!0},p(u,l){const c={};l[0]&64&&(c.data=u[6]),l[0]&2&&(c.domainColumn=u[1]),l[0]&8&&(c.selectedValues=u[3]),l[0]&16384&&(c.opacity=u[14]),l[0]&1024&&(c.searchQuery=u[10]),l[0]&65536&&(c.showAnnotations=u[16]),l[0]&512&&(c.highlightedData=u[9]),l[0]&16&&(c.startDate=u[4]),l[0]&32&&(c.endDate=u[5]),l[0]&4&&(c.uniqueValues=u[2]),l[0]&131072&&(c.clusterLabels=u[17]),!n&&l[0]&2048&&(n=!0,c.hoveredData=u[11],Xe(()=>n=!1)),!r&&l[0]&4096&&(r=!0,c.selectedData=u[12],Xe(()=>r=!1)),e.$set(c)},i(u){i||(se(e.$$.fragment,u),i=!0)},o(u){we(e.$$.fragment,u),i=!1},d(u){We(e,u)}}}function wu(t){let e;return{c(){e=St("Loading...")},m(n,r){nt(n,e,r)},d(n){n&&$(e)}}}function vu(t){let e;return{c(){e=St("Parsing CSV...")},m(n,r){nt(n,e,r)},d(n){n&&$(e)}}}function bu(t){let e;return{c(){e=St("Downloading CSV...")},m(n,r){nt(n,e,r)},d(n){n&&$(e)}}}function ku(t){let e;return{c(){e=B("div"),E(e,"class","progress-bar indeterminate svelte-1tb07i0")},m(n,r){nt(n,e,r)},p:zt,d(n){n&&$(e)}}}function xu(t){let e;function n(s,o){return s[21]?Mu:Su}let r=n(t),i=r(t);return{c(){i.c(),e=Br()},m(s,o){i.m(s,o),nt(s,e,o)},p(s,o){r===(r=n(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i.d(s),s&&$(e)}}}function Su(t){let e,n,r,i=ae(t[20])+"",s;return{c(){e=B("div"),n=at(),r=B("div"),s=St(i),E(e,"class","progress-bar indeterminate svelte-1tb07i0"),E(r,"class","progress-label svelte-1tb07i0")},m(o,a){nt(o,e,a),nt(o,n,a),nt(o,r,a),R(r,s)},p(o,a){a[0]&1048576&&i!==(i=ae(o[20])+"")&&Ot(s,i)},d(o){o&&$(e),o&&$(n),o&&$(r)}}}function Mu(t){let e,n,r,i,s,o,a=ae(t[20])+"",u,l,c=ae(t[21])+"",h,m;return{c(){e=B("div"),n=B("div"),r=at(),i=B("div"),s=St(t[22]),o=St("% ("),u=St(a),l=St(" / "),h=St(c),m=St(")"),E(n,"class","progress-fill svelte-1tb07i0"),It(n,"width",t[22]+"%"),E(e,"class","progress-bar svelte-1tb07i0"),E(i,"class","progress-label svelte-1tb07i0")},m(g,T){nt(g,e,T),R(e,n),nt(g,r,T),nt(g,i,T),R(i,s),R(i,o),R(i,u),R(i,l),R(i,h),R(i,m)},p(g,T){T[0]&4194304&&It(n,"width",g[22]+"%"),T[0]&4194304&&Ot(s,g[22]),T[0]&1048576&&a!==(a=ae(g[20])+"")&&Ot(u,a),T[0]&2097152&&c!==(c=ae(g[21])+"")&&Ot(h,c)},d(g){g&&$(e),g&&$(r),g&&$(i)}}}function Eu(t){let e,n,r,i,s,o,a,u,l,c,h,m,g,T,L,z,A,rt,D,j,O,W,V,f,d,y,S,p,H,_,N,w,v,b,k,X,I,F=Vt(t[4])+"",P,Z,tt,st=Vt(t[5])+"",ut,J,Q,wt,ot,_t,bt,dt,mt,et,Et,ft,vt,x,G,Y,yt,lt,ht,it,M,q,C=t[13].length&&Ir(t),U=t[2].length&&Or(t);function ct(K){t[44](K)}function pt(K){t[45](K)}let Mt={min:0,max:t[23],markers:t[24]};t[7]!==void 0&&(Mt.startValue=t[7]),t[8]!==void 0&&(Mt.endValue=t[8]),w=new ou({props:Mt}),Xt.push(()=>Ue(w,"startValue",ct)),Xt.push(()=>Ue(w,"endValue",pt)),w.$on("startChange",t[46]),w.$on("endChange",t[47]);function At(K,gt){return K[15]?pu:mu}let Rt=At(t),Dt=Rt(t);const qt=[yu,_u,gu],Ct=[];function Tt(K,gt){return K[6].length?0:K[18]?1:2}return G=Tt(t),Y=Ct[G]=qt[G](t),ht=new du({props:{hoveredData:t[27],data:t[0],domainColumn:t[1],colorScale:t[26],searchQuery:t[10],isPinned:!!t[12]}}),ht.$on("unpin",t[54]),{c(){e=B("div"),n=B("div"),n.innerHTML=`<h1 class="title svelte-1tb07i0">What Gets Corrected</h1> 
    <p class="subtitle svelte-1tb07i0">A semantic map of the claims the Singapore government has publicly challenged as of Feb 5, 2026. Each dot represents a disputed claim, grouped by linguistic similarity. Together, they reveal the themes most likely to prompt official clarification.</p>`,r=at(),i=B("div"),s=B("div"),o=B("div"),a=B("button"),a.textContent="Reset filters",u=at(),l=B("div"),l.innerHTML=`<details class="svelte-1tb07i0"><summary class="svelte-1tb07i0"><span class="toggle-icon svelte-1tb07i0">+</span> What is a Semantic Map?</summary> 
          <div class="nerd-box-content svelte-1tb07i0"><p class="svelte-1tb07i0">This semantic map visualizes fact-check articles from Singapore&#39;s
              Factually.gov.sg. Articles addressing similar misinformation themes
              (e.g., COVID-19, political claims, economic policies) appear closer together.</p> 
            <p class="svelte-1tb07i0">Use this map to:</p> 
            <ul class="svelte-1tb07i0"><li class="svelte-1tb07i0">Explore patterns in misinformation topics over time.</li> 
              <li class="svelte-1tb07i0">Identify recurring themes in false claims.</li> 
              <li class="svelte-1tb07i0">Search for specific topics using keywords.</li></ul></div></details>`,c=at(),h=B("label"),h.textContent="\u{1F50D} Search:",m=at(),g=B("input"),T=at(),C&&C.c(),L=at(),U&&U.c(),z=at(),A=B("label"),A.textContent="\u{1F4A1} Adjust Opacity:",rt=at(),D=B("input"),j=at(),O=B("div"),W=B("label"),W.textContent="\u{1F4C5} Date Range:",V=at(),f=B("input"),S=at(),p=B("input"),N=at(),yn(w.$$.fragment),k=at(),X=B("div"),I=B("span"),P=St(F),Z=at(),tt=B("span"),ut=St(st),J=at(),Q=B("div"),wt=B("button"),wt.textContent="-1W",ot=at(),_t=B("button"),_t.textContent="-1D",bt=at(),dt=B("button"),Dt.c(),mt=at(),et=B("button"),et.textContent="+1D",Et=at(),ft=B("button"),ft.textContent="+1W",vt=at(),x=B("div"),Y.c(),yt=at(),lt=B("div"),yn(ht.$$.fragment),E(n,"class","title-section svelte-1tb07i0"),E(a,"class","reset-btn svelte-1tb07i0"),E(o,"class","filter-actions svelte-1tb07i0"),E(l,"class","nerd-box svelte-1tb07i0"),E(h,"for","search-input"),E(h,"class","svelte-1tb07i0"),E(g,"id","search-input"),E(g,"type","text"),E(g,"placeholder","Search keywords..."),E(g,"class","svelte-1tb07i0"),E(A,"for","opacity-slider"),E(A,"class","svelte-1tb07i0"),E(D,"id","opacity-slider"),E(D,"type","range"),E(D,"min","0"),E(D,"max",".3"),E(D,"step","0.01"),E(D,"class","svelte-1tb07i0"),E(W,"for","start-date"),E(W,"class","svelte-1tb07i0"),E(f,"id","start-date"),E(f,"type","date"),f.value=d=Vt(t[4]),E(f,"max",y=Vt(t[25])),E(f,"class","svelte-1tb07i0"),E(p,"id","end-date"),E(p,"type","date"),p.value=H=Vt(t[5]),E(p,"max",_=Vt(t[25])),E(p,"class","svelte-1tb07i0"),E(X,"class","date-range-labels svelte-1tb07i0"),E(wt,"class","svelte-1tb07i0"),E(_t,"class","svelte-1tb07i0"),E(dt,"class","play-button svelte-1tb07i0"),E(et,"class","svelte-1tb07i0"),E(ft,"class","svelte-1tb07i0"),E(Q,"class","date-navigation svelte-1tb07i0"),E(O,"class","date-controls svelte-1tb07i0"),E(s,"class","filter-panel left-panel svelte-1tb07i0"),E(x,"class","scatterplot-container svelte-1tb07i0"),E(lt,"class","detail-panel svelte-1tb07i0"),E(i,"class","content svelte-1tb07i0"),E(e,"class","container svelte-1tb07i0")},m(K,gt){nt(K,e,gt),R(e,n),R(e,r),R(e,i),R(i,s),R(s,o),R(o,a),R(s,u),R(s,l),R(s,c),R(s,h),R(s,m),R(s,g),R(s,T),C&&C.m(s,null),R(s,L),U&&U.m(s,null),R(s,z),R(s,A),R(s,rt),R(s,D),Kn(D,t[14]),R(s,j),R(s,O),R(O,W),R(O,V),R(O,f),R(O,S),R(O,p),R(O,N),Ye(w,O,null),R(O,k),R(O,X),R(X,I),R(I,P),R(X,Z),R(X,tt),R(tt,ut),R(O,J),R(O,Q),R(Q,wt),R(Q,ot),R(Q,_t),R(Q,bt),R(Q,dt),Dt.m(dt,null),R(Q,mt),R(Q,et),R(Q,Et),R(Q,ft),R(i,vt),R(i,x),Ct[G].m(x,null),R(i,yt),R(i,lt),Ye(ht,lt,null),it=!0,M||(q=[kt(a,"click",t[36]),kt(g,"input",t[34]),kt(D,"change",t[41]),kt(D,"input",t[41]),kt(D,"input",t[35]),kt(f,"change",t[42]),kt(p,"change",t[43]),kt(wt,"click",t[48]),kt(_t,"click",t[49]),kt(dt,"click",t[33]),kt(et,"click",t[50]),kt(ft,"click",t[51])],M=!0)},p(K,gt){K[13].length?C?C.p(K,gt):(C=Ir(K),C.c(),C.m(s,L)):C&&(C.d(1),C=null),K[2].length?U?U.p(K,gt):(U=Or(K),U.c(),U.m(s,z)):U&&(U.d(1),U=null),gt[0]&16384&&Kn(D,K[14]),(!it||gt[0]&16&&d!==(d=Vt(K[4])))&&(f.value=d),(!it||gt[0]&33554432&&y!==(y=Vt(K[25])))&&E(f,"max",y),(!it||gt[0]&32&&H!==(H=Vt(K[5])))&&(p.value=H),(!it||gt[0]&33554432&&_!==(_=Vt(K[25])))&&E(p,"max",_);const Nt={};gt[0]&8388608&&(Nt.max=K[23]),gt[0]&16777216&&(Nt.markers=K[24]),!v&&gt[0]&128&&(v=!0,Nt.startValue=K[7],Xe(()=>v=!1)),!b&&gt[0]&256&&(b=!0,Nt.endValue=K[8],Xe(()=>b=!1)),w.$set(Nt),(!it||gt[0]&16)&&F!==(F=Vt(K[4])+"")&&Ot(P,F),(!it||gt[0]&32)&&st!==(st=Vt(K[5])+"")&&Ot(ut,st),Rt!==(Rt=At(K))&&(Dt.d(1),Dt=Rt(K),Dt&&(Dt.c(),Dt.m(dt,null)));let xt=G;G=Tt(K),G===xt?Ct[G].p(K,gt):(zi(),we(Ct[xt],1,1,()=>{Ct[xt]=null}),Oi(),Y=Ct[G],Y?Y.p(K,gt):(Y=Ct[G]=qt[G](K),Y.c()),se(Y,1),Y.m(x,null));const Lt={};gt[0]&134217728&&(Lt.hoveredData=K[27]),gt[0]&1&&(Lt.data=K[0]),gt[0]&2&&(Lt.domainColumn=K[1]),gt[0]&67108864&&(Lt.colorScale=K[26]),gt[0]&1024&&(Lt.searchQuery=K[10]),gt[0]&4096&&(Lt.isPinned=!!K[12]),ht.$set(Lt)},i(K){it||(se(w.$$.fragment,K),se(Y),se(ht.$$.fragment,K),it=!0)},o(K){we(w.$$.fragment,K),we(Y),we(ht.$$.fragment,K),it=!1},d(K){K&&$(e),C&&C.d(),U&&U.d(),We(w),Dt.d(),Ct[G].d(),We(ht),M=!1,Gt(q)}}}function Cu(){try{const t=new URLSearchParams(window.location.search),e=t.get("url"),n=t.get("filename"),r=t.get("bucket");if(e&&/^https?:\/\//i.test(e))return e;if(n){let i="";return r?/^https?:\/\//i.test(r)?i=r:r.includes(".")?i=`https://${r}`:i=`https://${r}.s3.amazonaws.com`:i={BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_S3_BASE_URL||{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_BASE_URL||"https://pink-slime-public.s3.amazonaws.com/",i&&!i.endsWith("/")&&(i+="/"),i?i+n:n}return{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}catch(t){return console.warn("Failed to resolve data URL from query params:",t),{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}}function Fr(t){if(!t)return t;const e=String(t),n=e.match(/^(.+?)\s*\(Read:\s*.+?\)\s*$/);return n?n[1].trim():e}function ae(t){if(!t||t<=0)return"0 KB";const e=["B","KB","MB","GB","TB"];let n=t,r=0;for(;n>=1024&&r<e.length-1;)n/=1024,r++;const i=r===0?0:1;return`${n.toFixed(i)} ${e[r]}`}function Vt(t){return t?t.toISOString().split("T")[0]:""}function Au(t,e,n){let r,i,s,o,a,u,l="",c=[],h=[],m="target",g=[],T=new Set,L=.15,z=null,A=null,rt=[],D=[],j=0,O=0,W=!1,V=null,f=[],d="",y=!1,S=null,p=[],H=null;const _={topic:"Broad category",target:"Directed at",org:"Organization",state:"State",category:"Category"},N=[{date:new Date("2020-07-10"),label:"GE2020"},{date:new Date("2025-05-03"),label:"GE2025"}];let w=!1,v="idle",b=0,k=0,X=0;In(async()=>{try{n(18,w=!0),n(19,v="downloading"),n(20,b=0),n(21,k=0),n(22,X=0),n(37,l=Cu()),console.log("Loading data from:",l);const M=await fetch(l,{mode:"cors",cache:"no-store"});if(!M.ok)throw new Error(`HTTP ${M.status}`);const q=M.headers.get("content-length");n(21,k=q?parseInt(q,10):0);let C="";if(M.body&&M.body.getReader){const U=M.body.getReader(),ct=[];let pt=0;for(;;){const{done:Rt,value:Dt}=await U.read();if(Rt)break;ct.push(Dt),pt+=Dt.byteLength,n(20,b=pt),k&&n(22,X=Math.round(pt/k*100))}const Mt=new Uint8Array(pt);let At=0;for(const Rt of ct)Mt.set(Rt,At),At+=Rt.byteLength;C=new TextDecoder().decode(Mt),console.log("CSV head:",C.split(`
`).slice(0,5).join(`
`))}else C=await M.text();n(19,v="parsing"),await Promise.resolve(I(C));try{const U=await fetch("cluster_labels.json");U.ok&&(n(17,p=await U.json()),console.log("Loaded cluster labels:",p))}catch(U){console.warn("Could not load cluster labels:",U)}n(19,v="idle")}catch(M){console.error("Failed to load CSV:",M)}finally{n(18,w=!1)}return()=>{V&&clearInterval(V)}});function I(M){const q=M.split(/\r?\n/);if(q.length>0){const ct=q[0].split(",").map(pt=>pt.trim().toLowerCase()).join(",");q[0]=ct,M=q.join(`
`)}const C=Vi.parse(M,{header:!0});console.log("Parsed CSV fields:",C.meta.fields),console.log("Parsed rows (before filter):",C.data.length),console.log("Sample row:",C.data[0]),n(0,c=C.data.filter(U=>U.x&&U.y&&U.date).map((U,ct)=>({...U,x:+U.x,y:+U.y,date:new Date(U.date),id:ct}))),console.log("Data after filter:",c.length),console.log("Sample data point:",c[0]),console.log("domainColumn:",m),console.log("columns:",h),console.log("allDates:",D.length,"from",D[0],"to",D[D.length-1]),n(38,h=C.meta.fields||[]),n(39,D=[...new Set(c.map(U=>U.date.getTime()))].sort((U,ct)=>U-ct).map(U=>new Date(U))),n(4,z=D[0]),n(5,A=D[D.length-1]),n(7,j=0),n(8,O=D.length-1),tt(),m&&n(2,g=[...new Set(c.map(U=>U[m]).filter(U=>U!=null&&U!==""))].sort((U,ct)=>String(U).localeCompare(String(ct))))}function F(M){n(1,m=M.target.value),n(2,g=m?[...new Set(c.map(q=>q[m]).filter(Boolean))].sort((q,C)=>String(q).localeCompare(String(C))):[]),n(3,T=new Set),n(16,y=!1)}function P(M){const q=[...M.target.selectedOptions].map(ct=>ct.value),C=q.includes("__ALL__"),U=q.length===g.length;C||U||q.length===0?(n(3,T=new Set),n(9,f=[])):(n(3,T=new Set(q)),n(9,f=c.filter(ct=>T.has(ct[m])&&(!z||ct.date>=z)&&(!A||ct.date<=A)))),n(16,y=!1)}function Z(M,q,C=!1){C?(n(4,z=D[M]||D[0]),n(5,A=D[q]||D[D.length-1])):(n(4,z=M),n(5,A=q)),n(16,y=!1),tt()}function tt(){if(z){const M=z.getTime();n(7,j=Math.max(0,D.findIndex(q=>q.getTime()>=M)))}else n(7,j=0);if(A){const M=A.getTime();let q=-1;for(let C=D.length-1;C>=0;C--)if(D[C].getTime()<=M){q=C;break}n(8,O=q>=0?q:D.length-1)}else n(8,O=D.length-1);j>O&&n(7,j=O),O<j&&n(8,O=j)}function st(M,q){if(M.detail!==void 0)q==="start"?(n(7,j=M.detail),j>O&&n(7,j=O)):(n(8,O=M.detail),O<j&&n(8,O=j)),Z(j,O,!0);else{const C=M.target.value?new Date(M.target.value):null;q==="start"?Z(C,A):Z(z,C),tt()}}function ut(M){const q=O-j;let C=j+M,U=O+M;C<0&&(C=0,U=Math.min(q,D.length-1)),U>=D.length&&(U=D.length-1,C=Math.max(0,U-q)),n(7,j=C),n(8,O=U),Z(j,O,!0)}function J(){W?(clearInterval(V),n(15,W=!1)):(n(15,W=!0),n(16,y=!1),V=setInterval(()=>{if(O>=D.length-1){clearInterval(V),n(15,W=!1);return}ut(1)},500))}function Q(M){n(10,d=M.target.value),n(16,y=!1)}function wt(){n(16,y=!1)}function ot(){W&&V&&(clearInterval(V),n(15,W=!1));const M=h.includes("topic")?"topic":h.includes("org")?"org":o[0]||"";n(1,m=M),n(3,T=new Set),n(9,f=[]),n(10,d=""),n(16,y=!1),n(14,L=.02),n(14,L=+L),D.length?(n(7,j=0),n(8,O=D.length-1),Z(j,O,!0)):(n(4,z=null),n(5,A=null),n(7,j=0),n(8,O=0))}function _t(){m=Di(this),n(1,m),n(38,h),n(13,o),n(13,o),n(38,h)}function bt(){L=Ci(this.value),n(14,L)}const dt=M=>st(M,"start"),mt=M=>st(M,"end");function et(M){j=M,n(7,j)}function Et(M){O=M,n(8,O)}const ft=M=>st(M,"start"),vt=M=>st(M,"end"),x=()=>ut(-7),G=()=>ut(-1),Y=()=>ut(1),yt=()=>ut(7);function lt(M){S=M,n(11,S)}function ht(M){H=M,n(12,H)}const it=()=>n(12,H=null);return t.$$.update=()=>{if(t.$$.dirty[1]&64&&/^https?:\/\//i.test(l),t.$$.dirty[0]&512&&new Set(f.map(M=>M.id)),t.$$.dirty[0]&6144&&n(27,r=H||S),t.$$.dirty[1]&128&&n(13,o=h.filter(M=>M==="topic"||M==="target"||M==="org"||M==="state"||M==="category")),t.$$.dirty[0]&8194|t.$$.dirty[1]&128&&(!h||h.length===0||(o.length&&!o.includes(m)?n(1,m=o[0]):o.length===0&&n(1,m=""))),t.$$.dirty[0]&3&&m&&c.length>0&&n(2,g=[...new Set(c.flatMap(M=>{const q=M[m];if(q==null||q==="")return[];const C=String(q);return C.startsWith("No target;")?[C]:C.includes(";")?C.split(";").map(U=>U.trim()):[C]}))].sort((M,q)=>String(M).localeCompare(String(q)))),t.$$.dirty[0]&6&&n(26,i=zn(ii).domain(m?g:[])),t.$$.dirty[1]&256&&D.length>0&&D[0],t.$$.dirty[1]&256&&n(25,s=D.length>0?D[D.length-1]:null),t.$$.dirty[1]&256&&n(24,a=D.length>0?N.map(M=>{let q=0,C=1/0;return D.forEach((U,ct)=>{const pt=Math.abs(U.getTime()-M.date.getTime());pt<C&&(C=pt,q=ct)}),{index:q,label:M.label}}).filter(M=>M.index>=0&&M.index<=D.length-1):[]),t.$$.dirty[0]&1535|t.$$.dirty[1]&256){D.length&&j===0&&D.length-1;const M=T.size>0&&T.size<g.length,q=d&&d.trim().length>0;n(6,rt=c.map(C=>{var At,Rt,Dt,qt,Ct,Tt,K,gt,Nt;const U=(!z||C.date>=z)&&(!A||C.date<=A);let ct=!0;if(M){const xt=(At=C[m])!=null?At:"";xt.startsWith("No target;")?ct=T.has(xt):ct=T.has(xt)||[...T].some(Lt=>xt.includes(Lt))}let pt=!0;if(q)try{const xt=new RegExp(d,"i");pt=xt.test((Rt=C.title)!=null?Rt:"")||xt.test((Dt=C.text)!=null?Dt:"")||xt.test((qt=C.article_text)!=null?qt:"")||xt.test((Ct=C.summary)!=null?Ct:"")}catch{const xt=d.toLowerCase();pt=((Tt=C.title)!=null?Tt:"").toLowerCase().includes(xt)||((K=C.text)!=null?K:"").toLowerCase().includes(xt)||((gt=C.article_text)!=null?gt:"").toLowerCase().includes(xt)||((Nt=C.summary)!=null?Nt:"").toLowerCase().includes(xt)}const Mt=U&&ct&&pt;return{...C,isActive:Mt,isHighlighted:Mt}})),console.log("filteredData length:",rt.length,"active:",rt.filter(C=>C.isActive).length)}t.$$.dirty[0]&128|t.$$.dirty[1]&256&&D.length>1&&j/(D.length-1)*100,t.$$.dirty[0]&256|t.$$.dirty[1]&256&&D.length>1&&O/(D.length-1)*100,t.$$.dirty[1]&256&&n(23,u=D.length>0?D.length-1:0)},[c,m,g,T,z,A,rt,j,O,f,d,S,H,o,L,W,y,p,w,v,b,k,X,u,a,s,i,r,_,F,P,st,ut,J,Q,wt,ot,l,h,D,_t,bt,dt,mt,et,Et,ft,vt,x,G,Y,yt,lt,ht,it]}class Du extends ln{constructor(e){super(),on(this,e,Au,Eu,sn,{},null,[-1,-1,-1])}}new Du({target:document.getElementById("app")});
