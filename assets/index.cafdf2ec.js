(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Re(){}function $r(e){return e()}function ir(){return Object.create(null)}function et(e){e.forEach($r)}function ei(e){return typeof e=="function"}function an(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function qi(e){return Object.keys(e).length===0}function E(e,t){e.appendChild(t)}function re(e,t,n){e.insertBefore(t,n||null)}function te(e){e.parentNode.removeChild(e)}function Fn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function P(e){return document.createElement(e)}function Ee(e){return document.createTextNode(e)}function oe(){return Ee(" ")}function ti(){return Ee("")}function ve(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function v(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Bi(e){return e===""?null:+e}function Hi(e){return Array.from(e.childNodes)}function Fe(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Lt(e,t){e.value=t==null?"":t}function Te(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function sr(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t){r.selected=!0;return}}e.selectedIndex=-1}function Xi(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function dt(e,t,n){e.classList[n?"add":"remove"](t)}function Ui(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}let zt;function Et(e){zt=e}function ni(){if(!zt)throw new Error("Function called outside component initialization");return zt}function Vn(e){ni().$$.on_mount.push(e)}function ri(){const e=ni();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=Ui(t,n,{cancelable:r});return i.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}const xt=[],Ue=[],Bt=[],kn=[],Yi=Promise.resolve();let xn=!1;function Wi(){xn||(xn=!0,Yi.then(ii))}function Qt(e){Bt.push(e)}function jt(e){kn.push(e)}const gn=new Set;let It=0;function ii(){const e=zt;do{for(;It<xt.length;){const t=xt[It];It++,Et(t),Ki(t.$$)}for(Et(null),xt.length=0,It=0;Ue.length;)Ue.pop()();for(let t=0;t<Bt.length;t+=1){const n=Bt[t];gn.has(n)||(gn.add(n),n())}Bt.length=0}while(xt.length);for(;kn.length;)kn.pop()();xn=!1,gn.clear(),Et(e)}function Ki(e){if(e.fragment!==null){e.update(),et(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Qt)}}const Ht=new Set;let lt;function _n(){lt={r:0,c:[],p:lt}}function yn(){lt.r||et(lt.c),lt=lt.p}function qe(e,t){e&&e.i&&(Ht.delete(e),e.i(t))}function Ze(e,t,n,r){if(e&&e.o){if(Ht.has(e))return;Ht.add(e),lt.c.push(()=>{Ht.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Gt(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function qn(e){e&&e.c()}function un(e,t,n,r){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),r||Qt(()=>{const o=e.$$.on_mount.map($r).filter(ei);e.$$.on_destroy?e.$$.on_destroy.push(...o):et(o),e.$$.on_mount=[]}),s.forEach(Qt)}function fn(e,t){const n=e.$$;n.fragment!==null&&(et(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Qi(e,t){e.$$.dirty[0]===-1&&(xt.push(e),Wi(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function cn(e,t,n,r,i,s,o,a=[-1]){const u=zt;Et(e);const l=e.$$={fragment:null,ctx:[],props:s,update:Re,not_equal:i,bound:ir(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:ir(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};o&&o(l.root);let f=!1;if(l.ctx=n?n(e,t.props||{},(d,h,...g)=>{const S=g.length?g[0]:h;return l.ctx&&i(l.ctx[d],l.ctx[d]=S)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](S),f&&Qi(e,d)),h}):[],l.update(),f=!0,et(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const d=Hi(t.target);l.fragment&&l.fragment.l(d),d.forEach(te)}else l.fragment&&l.fragment.c();t.intro&&qe(e.$$.fragment),un(e,t.target,t.anchor,t.customElement),ii()}Et(u)}class hn{$destroy(){fn(this,1),this.$destroy=Re}$on(t,n){if(!ei(n))return Re;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!qi(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var ji=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},si={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,r)=>{e.exports=r()})(ji,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,s=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,a={},u=0,l={};function f(m){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(p){var y=N(p);y.chunkSize=parseInt(y.chunkSize),p.step||p.chunk||(y.chunkSize=null),this._handle=new T(y),(this._handle.streamer=this)._config=y}.call(this,m),this.parseChunk=function(p,y){var w=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<w){let D=this._config.newline;D||(c=this._config.quoteChar||'"',D=this._handle.guessLineEndings(p,c)),p=[...p.split(D).slice(w)].join(D)}this.isFirstChunk&&L(this._config.beforeFirstChunk)&&(c=this._config.beforeFirstChunk(p))!==void 0&&(p=c),this.isFirstChunk=!1,this._halted=!1;var w=this._partialLine+p,c=(this._partialLine="",this._handle.parse(w,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(p=c.meta.cursor,w=(this._finished||(this._partialLine=w.substring(p-this._baseIndex),this._baseIndex=p),c&&c.data&&(this._rowCount+=c.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:c,workerId:l.WORKER_ID,finished:w});else if(L(this._config.chunk)&&!y){if(this._config.chunk(c,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=c=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(c.data),this._completeResults.errors=this._completeResults.errors.concat(c.errors),this._completeResults.meta=c.meta),this._completed||!w||!L(this._config.complete)||c&&c.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),w||c&&c.meta.paused||this._nextChunk(),c}this._halted=!0},this._sendError=function(p){L(this._config.error)?this._config.error(p):o&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:p,finished:!1})}}function d(m){var p;(m=m||{}).chunkSize||(m.chunkSize=l.RemoteChunkSize),f.call(this,m),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(y){this._input=y,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(p=new XMLHttpRequest,this._config.withCredentials&&(p.withCredentials=this._config.withCredentials),s||(p.onload=H(this._chunkLoaded,this),p.onerror=H(this._chunkError,this)),p.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var y,w=this._config.downloadRequestHeaders;for(y in w)p.setRequestHeader(y,w[y])}var c;this._config.chunkSize&&(c=this._start+this._config.chunkSize-1,p.setRequestHeader("Range","bytes="+this._start+"-"+c));try{p.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}s&&p.status===0&&this._chunkError()}},this._chunkLoaded=function(){p.readyState===4&&(p.status<200||400<=p.status?this._chunkError():(this._start+=this._config.chunkSize||p.responseText.length,this._finished=!this._config.chunkSize||this._start>=(y=>(y=y.getResponseHeader("Content-Range"))!==null?parseInt(y.substring(y.lastIndexOf("/")+1)):-1)(p),this.parseChunk(p.responseText)))},this._chunkError=function(y){y=p.statusText||y,this._sendError(new Error(y))}}function h(m){(m=m||{}).chunkSize||(m.chunkSize=l.LocalChunkSize),f.call(this,m);var p,y,w=typeof FileReader<"u";this.stream=function(c){this._input=c,y=c.slice||c.webkitSlice||c.mozSlice,w?((p=new FileReader).onload=H(this._chunkLoaded,this),p.onerror=H(this._chunkError,this)):p=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var c=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),c=y.call(c,this._start,D)),p.readAsText(c,this._config.encoding));w||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(c){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(c.target.result)},this._chunkError=function(){this._sendError(p.error)}}function g(m){var p;f.call(this,m=m||{}),this.stream=function(y){return p=y,this._nextChunk()},this._nextChunk=function(){var y,w;if(!this._finished)return y=this._config.chunkSize,p=y?(w=p.substring(0,y),p.substring(y)):(w=p,""),this._finished=!p,this.parseChunk(w)}}function S(m){f.call(this,m=m||{});var p=[],y=!0,w=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(c){this._input=c,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){w&&p.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),p.length?this.parseChunk(p.shift()):y=!0},this._streamData=H(function(c){try{p.push(typeof c=="string"?c:c.toString(this._config.encoding)),y&&(y=!1,this._checkIsFinished(),this.parseChunk(p.shift()))}catch(D){this._streamError(D)}},this),this._streamError=H(function(c){this._streamCleanUp(),this._sendError(c)},this),this._streamEnd=H(function(){this._streamCleanUp(),w=!0,this._streamData("")},this),this._streamCleanUp=H(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function T(m){var p,y,w,c,D=Math.pow(2,53),_=-D,z=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,x=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,b=this,k=0,C=0,X=!1,O=!1,F=[],V={data:[],errors:[],meta:{}};function $(Q){return m.skipEmptyLines==="greedy"?Q.join("").trim()==="":Q.length===1&&Q[0].length===0}function G(){if(V&&w&&(ce("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),w=!1),m.skipEmptyLines&&(V.data=V.data.filter(function(ie){return!$(ie)})),me()){let ie=function(xe,de){L(m.transformHeader)&&(xe=m.transformHeader(xe,de)),F.push(xe)};var he=ie;if(V)if(Array.isArray(V.data[0])){for(var Q=0;me()&&Q<V.data.length;Q++)V.data[Q].forEach(ie);V.data.splice(0,1)}else V.data.forEach(ie)}function Z(ie,xe){for(var de=m.header?{}:[],ue=0;ue<ie.length;ue++){var fe=ue,ze=ie[ue],ze=((_e,be)=>(Se=>(m.dynamicTypingFunction&&m.dynamicTyping[Se]===void 0&&(m.dynamicTyping[Se]=m.dynamicTypingFunction(Se)),(m.dynamicTyping[Se]||m.dynamicTyping)===!0))(_e)?be==="true"||be==="TRUE"||be!=="false"&&be!=="FALSE"&&((Se=>{if(z.test(Se)&&(Se=parseFloat(Se),_<Se&&Se<D))return 1})(be)?parseFloat(be):x.test(be)?new Date(be):be===""?null:be):be)(fe=m.header?ue>=F.length?"__parsed_extra":F[ue]:fe,ze=m.transform?m.transform(ze,fe):ze);fe==="__parsed_extra"?(de[fe]=de[fe]||[],de[fe].push(ze)):de[fe]=ze}return m.header&&(ue>F.length?ce("FieldMismatch","TooManyFields","Too many fields: expected "+F.length+" fields but parsed "+ue,C+xe):ue<F.length&&ce("FieldMismatch","TooFewFields","Too few fields: expected "+F.length+" fields but parsed "+ue,C+xe)),de}var we;V&&(m.header||m.dynamicTyping||m.transform)&&(we=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(Z),we=V.data.length):V.data=Z(V.data,0),m.header&&V.meta&&(V.meta.fields=F),C+=we)}function me(){return m.header&&F.length===0}function ce(Q,Z,we,he){Q={type:Q,code:Z,message:we},he!==void 0&&(Q.row=he),V.errors.push(Q)}L(m.step)&&(c=m.step,m.step=function(Q){V=Q,me()?G():(G(),V.data.length!==0&&(k+=Q.data.length,m.preview&&k>m.preview?y.abort():(V.data=V.data[0],c(V,b))))}),this.parse=function(Q,Z,we){var he=m.quoteChar||'"',he=(m.newline||(m.newline=this.guessLineEndings(Q,he)),w=!1,m.delimiter?L(m.delimiter)&&(m.delimiter=m.delimiter(Q),V.meta.delimiter=m.delimiter):((he=((ie,xe,de,ue,fe)=>{var ze,_e,be,Se;fe=fe||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var M=0;M<fe.length;M++){for(var ee,W=fe[M],ne=0,se=0,J=0,U=(be=void 0,new R({comments:ue,delimiter:W,newline:xe,preview:10}).parse(ie)),le=0;le<U.data.length;le++)de&&$(U.data[le])?J++:(ee=U.data[le].length,se+=ee,be===void 0?be=ee:0<ee&&(ne+=Math.abs(ee-be),be=ee));0<U.data.length&&(se/=U.data.length-J),(_e===void 0||ne<=_e)&&(Se===void 0||Se<se)&&1.99<se&&(_e=ne,ze=W,Se=se)}return{successful:!!(m.delimiter=ze),bestDelimiter:ze}})(Q,m.newline,m.skipEmptyLines,m.comments,m.delimitersToGuess)).successful?m.delimiter=he.bestDelimiter:(w=!0,m.delimiter=l.DefaultDelimiter),V.meta.delimiter=m.delimiter),N(m));return m.preview&&m.header&&he.preview++,p=Q,y=new R(he),V=y.parse(p,Z,we),G(),X?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return X},this.pause=function(){X=!0,y.abort(),p=L(m.chunk)?"":p.substring(y.getCharIndex())},this.resume=function(){b.streamer._halted?(X=!1,b.streamer.parseChunk(p,!0)):setTimeout(b.resume,3)},this.aborted=function(){return O},this.abort=function(){O=!0,y.abort(),V.meta.aborted=!0,L(m.complete)&&m.complete(V),p=""},this.guessLineEndings=function(ie,he){ie=ie.substring(0,1048576);var he=new RegExp(q(he)+"([^]*?)"+q(he),"gm"),we=(ie=ie.replace(he,"")).split("\r"),he=ie.split(`
`),ie=1<he.length&&he[0].length<we[0].length;if(we.length===1||ie)return`
`;for(var xe=0,de=0;de<we.length;de++)we[de][0]===`
`&&xe++;return xe>=we.length/2?`\r
`:"\r"}}function q(m){return m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function R(m){var p=(m=m||{}).delimiter,y=m.newline,w=m.comments,c=m.step,D=m.preview,_=m.fastMode,z=null,x=!1,b=m.quoteChar==null?'"':m.quoteChar,k=b;if(m.escapeChar!==void 0&&(k=m.escapeChar),(typeof p!="string"||-1<l.BAD_DELIMITERS.indexOf(p))&&(p=","),w===p)throw new Error("Comment character same as delimiter");w===!0?w="#":(typeof w!="string"||-1<l.BAD_DELIMITERS.indexOf(w))&&(w=!1),y!==`
`&&y!=="\r"&&y!==`\r
`&&(y=`
`);var C=0,X=!1;this.parse=function(O,F,V){if(typeof O!="string")throw new Error("Input must be a string");var $=O.length,G=p.length,me=y.length,ce=w.length,Q=L(c),Z=[],we=[],he=[],ie=C=0;if(!O)return ne();if(_||_!==!1&&O.indexOf(b)===-1){for(var xe=O.split(y),de=0;de<xe.length;de++){if(he=xe[de],C+=he.length,de!==xe.length-1)C+=y.length;else if(V)return ne();if(!w||he.substring(0,ce)!==w){if(Q){if(Z=[],Se(he.split(p)),se(),X)return ne()}else Se(he.split(p));if(D&&D<=de)return Z=Z.slice(0,D),ne(!0)}}return ne()}for(var ue=O.indexOf(p,C),fe=O.indexOf(y,C),ze=new RegExp(q(k)+q(b),"g"),_e=O.indexOf(b,C);;)if(O[C]===b)for(_e=C,C++;;){if((_e=O.indexOf(b,_e+1))===-1)return V||we.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Z.length,index:C}),ee();if(_e===$-1)return ee(O.substring(C,_e).replace(ze,b));if(b===k&&O[_e+1]===k)_e++;else if(b===k||_e===0||O[_e-1]!==k){ue!==-1&&ue<_e+1&&(ue=O.indexOf(p,_e+1));var be=M((fe=fe!==-1&&fe<_e+1?O.indexOf(y,_e+1):fe)===-1?ue:Math.min(ue,fe));if(O.substr(_e+1+be,G)===p){he.push(O.substring(C,_e).replace(ze,b)),O[C=_e+1+be+G]!==b&&(_e=O.indexOf(b,C)),ue=O.indexOf(p,C),fe=O.indexOf(y,C);break}if(be=M(fe),O.substring(_e+1+be,_e+1+be+me)===y){if(he.push(O.substring(C,_e).replace(ze,b)),W(_e+1+be+me),ue=O.indexOf(p,C),_e=O.indexOf(b,C),Q&&(se(),X))return ne();if(D&&Z.length>=D)return ne(!0);break}we.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Z.length,index:C}),_e++}}else if(w&&he.length===0&&O.substring(C,C+ce)===w){if(fe===-1)return ne();C=fe+me,fe=O.indexOf(y,C),ue=O.indexOf(p,C)}else if(ue!==-1&&(ue<fe||fe===-1))he.push(O.substring(C,ue)),C=ue+G,ue=O.indexOf(p,C);else{if(fe===-1)break;if(he.push(O.substring(C,fe)),W(fe+me),Q&&(se(),X))return ne();if(D&&Z.length>=D)return ne(!0)}return ee();function Se(J){Z.push(J),ie=C}function M(J){var U=0;return U=J!==-1&&(J=O.substring(_e+1,J))&&J.trim()===""?J.length:U}function ee(J){return V||(J===void 0&&(J=O.substring(C)),he.push(J),C=$,Se(he),Q&&se()),ne()}function W(J){C=J,Se(he),he=[],fe=O.indexOf(y,C)}function ne(J){if(m.header&&!F&&Z.length&&!x){var U=Z[0],le={},ge=new Set(U);let pe=!1;for(let Me=0;Me<U.length;Me++){let Ce=U[Me];if(le[Ce=L(m.transformHeader)?m.transformHeader(Ce,Me):Ce]){let Ae,De=le[Ce];for(;Ae=Ce+"_"+De,De++,ge.has(Ae););ge.add(Ae),U[Me]=Ae,le[Ce]++,pe=!0,(z=z===null?{}:z)[Ae]=Ce}else le[Ce]=1,U[Me]=Ce;ge.add(Ce)}pe&&console.warn("Duplicate headers found and renamed."),x=!0}return{data:Z,errors:we,meta:{delimiter:p,linebreak:y,aborted:X,truncated:!!J,cursor:ie+(F||0),renamedHeaders:z}}}function se(){c(ne()),Z=[],we=[]}},this.abort=function(){X=!0},this.getCharIndex=function(){return C}}function K(m){var p=m.data,y=a[p.workerId],w=!1;if(p.error)y.userError(p.error,p.file);else if(p.results&&p.results.data){var c={abort:function(){w=!0,A(p.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:B,resume:B};if(L(y.userStep)){for(var D=0;D<p.results.data.length&&(y.userStep({data:p.results.data[D],errors:p.results.errors,meta:p.results.meta},c),!w);D++);delete p.results}else L(y.userChunk)&&(y.userChunk(p.results,c,p.file),delete p.results)}p.finished&&!w&&A(p.workerId,p.results)}function A(m,p){var y=a[m];L(y.userComplete)&&y.userComplete(p),y.terminate(),delete a[m]}function B(){throw new Error("Not implemented.")}function N(m){if(typeof m!="object"||m===null)return m;var p,y=Array.isArray(m)?[]:{};for(p in m)y[p]=N(m[p]);return y}function H(m,p){return function(){m.apply(p,arguments)}}function L(m){return typeof m=="function"}return l.parse=function(m,p){var y=(p=p||{}).dynamicTyping||!1;if(L(y)&&(p.dynamicTypingFunction=y,y={}),p.dynamicTyping=y,p.transform=!!L(p.transform)&&p.transform,!p.worker||!l.WORKERS_SUPPORTED)return y=null,l.NODE_STREAM_INPUT,typeof m=="string"?(m=(w=>w.charCodeAt(0)!==65279?w:w.slice(1))(m),y=new(p.download?d:g)(p)):m.readable===!0&&L(m.read)&&L(m.on)?y=new S(p):(r.File&&m instanceof File||m instanceof Object)&&(y=new h(p)),y.stream(m);(y=(()=>{var w;return!!l.WORKERS_SUPPORTED&&(w=(()=>{var c=r.URL||r.webkitURL||null,D=n.toString();return l.BLOB_URL||(l.BLOB_URL=c.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(w=new r.Worker(w)).onmessage=K,w.id=u++,a[w.id]=w)})()).userStep=p.step,y.userChunk=p.chunk,y.userComplete=p.complete,y.userError=p.error,p.step=L(p.step),p.chunk=L(p.chunk),p.complete=L(p.complete),p.error=L(p.error),delete p.worker,y.postMessage({input:m,config:p,workerId:y.id})},l.unparse=function(m,p){var y=!1,w=!0,c=",",D=`\r
`,_='"',z=_+_,x=!1,b=null,k=!1,C=((()=>{if(typeof p=="object"){if(typeof p.delimiter!="string"||l.BAD_DELIMITERS.filter(function(F){return p.delimiter.indexOf(F)!==-1}).length||(c=p.delimiter),typeof p.quotes!="boolean"&&typeof p.quotes!="function"&&!Array.isArray(p.quotes)||(y=p.quotes),typeof p.skipEmptyLines!="boolean"&&typeof p.skipEmptyLines!="string"||(x=p.skipEmptyLines),typeof p.newline=="string"&&(D=p.newline),typeof p.quoteChar=="string"&&(_=p.quoteChar),typeof p.header=="boolean"&&(w=p.header),Array.isArray(p.columns)){if(p.columns.length===0)throw new Error("Option columns is empty");b=p.columns}p.escapeChar!==void 0&&(z=p.escapeChar+_),p.escapeFormulae instanceof RegExp?k=p.escapeFormulae:typeof p.escapeFormulae=="boolean"&&p.escapeFormulae&&(k=/^[=+\-@\t\r].*$/)}})(),new RegExp(q(_),"g"));if(typeof m=="string"&&(m=JSON.parse(m)),Array.isArray(m)){if(!m.length||Array.isArray(m[0]))return X(null,m,x);if(typeof m[0]=="object")return X(b||Object.keys(m[0]),m,x)}else if(typeof m=="object")return typeof m.data=="string"&&(m.data=JSON.parse(m.data)),Array.isArray(m.data)&&(m.fields||(m.fields=m.meta&&m.meta.fields||b),m.fields||(m.fields=Array.isArray(m.data[0])?m.fields:typeof m.data[0]=="object"?Object.keys(m.data[0]):[]),Array.isArray(m.data[0])||typeof m.data[0]=="object"||(m.data=[m.data])),X(m.fields||[],m.data||[],x);throw new Error("Unable to serialize unrecognized input");function X(F,V,$){var G="",me=(typeof F=="string"&&(F=JSON.parse(F)),typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(F)&&0<F.length),ce=!Array.isArray(V[0]);if(me&&w){for(var Q=0;Q<F.length;Q++)0<Q&&(G+=c),G+=O(F[Q],Q);0<V.length&&(G+=D)}for(var Z=0;Z<V.length;Z++){var we=(me?F:V[Z]).length,he=!1,ie=me?Object.keys(V[Z]).length===0:V[Z].length===0;if($&&!me&&(he=$==="greedy"?V[Z].join("").trim()==="":V[Z].length===1&&V[Z][0].length===0),$==="greedy"&&me){for(var xe=[],de=0;de<we;de++){var ue=ce?F[de]:de;xe.push(V[Z][ue])}he=xe.join("").trim()===""}if(!he){for(var fe=0;fe<we;fe++){0<fe&&!ie&&(G+=c);var ze=me&&ce?F[fe]:fe;G+=O(V[Z][ze],fe)}Z<V.length-1&&(!$||0<we&&!ie)&&(G+=D)}}return G}function O(F,V){var $,G;return F==null?"":F.constructor===Date?JSON.stringify(F).slice(1,25):(G=!1,k&&typeof F=="string"&&k.test(F)&&(F="'"+F,G=!0),$=F.toString().replace(C,z),(G=G||y===!0||typeof y=="function"&&y(F,V)||Array.isArray(y)&&y[V]||((me,ce)=>{for(var Q=0;Q<ce.length;Q++)if(-1<me.indexOf(ce[Q]))return!0;return!1})($,l.BAD_DELIMITERS)||-1<$.indexOf(c)||$.charAt(0)===" "||$.charAt($.length-1)===" ")?_+$+_:$)}},l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!s&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=R,l.ParserHandle=T,l.NetworkStreamer=d,l.FileStreamer=h,l.StringStreamer=g,l.ReadableStreamStreamer=S,r.jQuery&&((i=r.jQuery).fn.parse=function(m){var p=m.config||{},y=[];return this.each(function(D){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var _=0;_<this.files.length;_++)y.push({file:this.files[_],inputElem:this,instanceConfig:i.extend({},p)})}),w(),this;function w(){if(y.length===0)L(m.complete)&&m.complete();else{var D,_,z,x,b=y[0];if(L(m.before)){var k=m.before(b.file,b.inputElem);if(typeof k=="object"){if(k.action==="abort")return D="AbortError",_=b.file,z=b.inputElem,x=k.reason,void(L(m.error)&&m.error({name:D},_,z,x));if(k.action==="skip")return void c();typeof k.config=="object"&&(b.instanceConfig=i.extend(b.instanceConfig,k.config))}else if(k==="skip")return void c()}var C=b.instanceConfig.complete;b.instanceConfig.complete=function(X){L(C)&&C(X,b.file,b.inputElem),c()},l.parse(b.file,b.instanceConfig)}}function c(){y.splice(0,1),w()}}),o&&(r.onmessage=function(m){m=m.data,l.WORKER_ID===void 0&&m&&(l.WORKER_ID=m.workerId),typeof m.input=="string"?r.postMessage({workerId:l.WORKER_ID,results:l.parse(m.input,m.config),finished:!0}):(r.File&&m.input instanceof File||m.input instanceof Object)&&(m=l.parse(m.input,m.config))&&r.postMessage({workerId:l.WORKER_ID,results:m,finished:!0})}),(d.prototype=Object.create(f.prototype)).constructor=d,(h.prototype=Object.create(f.prototype)).constructor=h,(g.prototype=Object.create(g.prototype)).constructor=g,(S.prototype=Object.create(f.prototype)).constructor=S,l})})(si);const Gi=si.exports;function Xt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zi(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function oi(e){let t,n,r;e.length!==2?(t=Xt,n=(a,u)=>Xt(e(a),u),r=(a,u)=>e(a)-u):(t=e===Xt||e===Zi?e:Ji,n=e,r=e);function i(a,u,l=0,f=a.length){if(l<f){if(t(u,u)!==0)return f;do{const d=l+f>>>1;n(a[d],u)<0?l=d+1:f=d}while(l<f)}return l}function s(a,u,l=0,f=a.length){if(l<f){if(t(u,u)!==0)return f;do{const d=l+f>>>1;n(a[d],u)<=0?l=d+1:f=d}while(l<f)}return l}function o(a,u,l=0,f=a.length){const d=i(a,u,l,f-1);return d>l&&r(a[d-1],u)>-r(a[d],u)?d-1:d}return{left:i,center:o,right:s}}function Ji(){return 0}function $i(e){return e===null?NaN:+e}const es=oi(Xt),ts=es.right;oi($i).center;const ns=ts;class or extends Map{constructor(t,n=ss){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(lr(this,t))}has(t){return super.has(lr(this,t))}set(t,n){return super.set(rs(this,t),n)}delete(t){return super.delete(is(this,t))}}function lr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function rs({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function is({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function ss(e){return e!==null&&typeof e=="object"?e.valueOf():e}var Sn=Math.sqrt(50),Mn=Math.sqrt(10),En=Math.sqrt(2);function os(e,t,n){var r,i=-1,s,o,a;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(s=e,e=t,t=s),(a=li(e,t,n))===0||!isFinite(a))return[];if(a>0){let u=Math.round(e/a),l=Math.round(t/a);for(u*a<e&&++u,l*a>t&&--l,o=new Array(s=l-u+1);++i<s;)o[i]=(u+i)*a}else{a=-a;let u=Math.round(e*a),l=Math.round(t*a);for(u/a<e&&++u,l/a>t&&--l,o=new Array(s=l-u+1);++i<s;)o[i]=(u+i)/a}return r&&o.reverse(),o}function li(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=Sn?10:s>=Mn?5:s>=En?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=Sn?10:s>=Mn?5:s>=En?2:1)}function ls(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=Sn?i*=10:s>=Mn?i*=5:s>=En&&(i*=2),t<e?-i:i}function ar(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function ur(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function ai(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const fr=Symbol("implicit");function Bn(){var e=new or,t=[],n=[],r=fr;function i(s){let o=e.get(s);if(o===void 0){if(r!==fr)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new or;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Bn(t,n).unknown(r)},ai.apply(i,arguments),i}function Hn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ui(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Rt(){}var At=.7,Zt=1/At,_t="\\s*([+-]?\\d+)\\s*",Dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",as=/^#([0-9a-f]{3,8})$/,us=new RegExp(`^rgb\\(${_t},${_t},${_t}\\)$`),fs=new RegExp(`^rgb\\(${Ke},${Ke},${Ke}\\)$`),cs=new RegExp(`^rgba\\(${_t},${_t},${_t},${Dt}\\)$`),hs=new RegExp(`^rgba\\(${Ke},${Ke},${Ke},${Dt}\\)$`),ds=new RegExp(`^hsl\\(${Dt},${Ke},${Ke}\\)$`),ps=new RegExp(`^hsla\\(${Dt},${Ke},${Ke},${Dt}\\)$`),cr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hn(Rt,ft,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hr,formatHex:hr,formatHex8:ms,formatHsl:gs,formatRgb:dr,toString:dr});function hr(){return this.rgb().formatHex()}function ms(){return this.rgb().formatHex8()}function gs(){return fi(this).formatHsl()}function dr(){return this.rgb().formatRgb()}function ft(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=as.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pr(t):n===3?new Oe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ot(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ot(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=us.exec(e))?new Oe(t[1],t[2],t[3],1):(t=fs.exec(e))?new Oe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cs.exec(e))?Ot(t[1],t[2],t[3],t[4]):(t=hs.exec(e))?Ot(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ds.exec(e))?_r(t[1],t[2]/100,t[3]/100,1):(t=ps.exec(e))?_r(t[1],t[2]/100,t[3]/100,t[4]):cr.hasOwnProperty(e)?pr(cr[e]):e==="transparent"?new Oe(NaN,NaN,NaN,0):null}function pr(e){return new Oe(e>>16&255,e>>8&255,e&255,1)}function Ot(e,t,n,r){return r<=0&&(e=t=n=NaN),new Oe(e,t,n,r)}function _s(e){return e instanceof Rt||(e=ft(e)),e?(e=e.rgb(),new Oe(e.r,e.g,e.b,e.opacity)):new Oe}function Cn(e,t,n,r){return arguments.length===1?_s(e):new Oe(e,t,n,r==null?1:r)}function Oe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Hn(Oe,Cn,ui(Rt,{brighter(e){return e=e==null?Zt:Math.pow(Zt,e),new Oe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new Oe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Oe(ut(this.r),ut(this.g),ut(this.b),Jt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mr,formatHex:mr,formatHex8:ys,formatRgb:gr,toString:gr}));function mr(){return`#${at(this.r)}${at(this.g)}${at(this.b)}`}function ys(){return`#${at(this.r)}${at(this.g)}${at(this.b)}${at((isNaN(this.opacity)?1:this.opacity)*255)}`}function gr(){const e=Jt(this.opacity);return`${e===1?"rgb(":"rgba("}${ut(this.r)}, ${ut(this.g)}, ${ut(this.b)}${e===1?")":`, ${e})`}`}function Jt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ut(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function at(e){return e=ut(e),(e<16?"0":"")+e.toString(16)}function _r(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Xe(e,t,n,r)}function fi(e){if(e instanceof Xe)return new Xe(e.h,e.s,e.l,e.opacity);if(e instanceof Rt||(e=ft(e)),!e)return new Xe;if(e instanceof Xe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Xe(o,a,u,e.opacity)}function ws(e,t,n,r){return arguments.length===1?fi(e):new Xe(e,t,n,r==null?1:r)}function Xe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hn(Xe,ws,ui(Rt,{brighter(e){return e=e==null?Zt:Math.pow(Zt,e),new Xe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new Xe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Oe(wn(e>=240?e-240:e+120,i,r),wn(e,i,r),wn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Xe(yr(this.h),Pt(this.s),Pt(this.l),Jt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Jt(this.opacity);return`${e===1?"hsl(":"hsla("}${yr(this.h)}, ${Pt(this.s)*100}%, ${Pt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yr(e){return e=(e||0)%360,e<0?e+360:e}function Pt(e){return Math.max(0,Math.min(1,e||0))}function wn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xn=e=>()=>e;function vs(e,t){return function(n){return e+n*t}}function bs(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ks(e){return(e=+e)==1?ci:function(t,n){return n-t?bs(t,n,e):Xn(isNaN(t)?n:t)}}function ci(e,t){var n=t-e;return n?vs(e,n):Xn(isNaN(e)?t:e)}const $t=function e(t){var n=ks(t);function r(i,s){var o=n((i=Cn(i)).r,(s=Cn(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=ci(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=a(f),i.b=u(f),i.opacity=l(f),i+""}}return r.gamma=e,r}(1);function xs(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Ss(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ms(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Un(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Es(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function He(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Cs(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Un(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var zn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vn=new RegExp(zn.source,"g");function zs(e){return function(){return e}}function As(e){return function(t){return e(t)+""}}function hi(e,t){var n=zn.lastIndex=vn.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=zn.exec(e))&&(i=vn.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:He(r,i)})),n=vn.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?As(u[0].x):zs(t):(t=u.length,function(l){for(var f=0,d;f<t;++f)a[(d=u[f]).i]=d.x(l);return a.join("")})}function Un(e,t){var n=typeof t,r;return t==null||n==="boolean"?Xn(t):(n==="number"?He:n==="string"?(r=ft(t))?(t=r,$t):hi:t instanceof ft?$t:t instanceof Date?Es:Ss(t)?xs:Array.isArray(t)?Ms:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Cs:He)(e,t)}function Ds(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var wr=180/Math.PI,An={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function di(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*wr,skewX:Math.atan(u)*wr,scaleX:o,scaleY:a}}var Ft;function Ts(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?An:di(t.a,t.b,t.c,t.d,t.e,t.f)}function Rs(e){return e==null||(Ft||(Ft=document.createElementNS("http://www.w3.org/2000/svg","g")),Ft.setAttribute("transform",e),!(e=Ft.transform.baseVal.consolidate()))?An:(e=e.matrix,di(e.a,e.b,e.c,e.d,e.e,e.f))}function pi(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,f,d,h,g,S){if(l!==d||f!==h){var T=g.push("translate(",null,t,null,n);S.push({i:T-4,x:He(l,d)},{i:T-2,x:He(f,h)})}else(d||h)&&g.push("translate("+d+t+h+n)}function o(l,f,d,h){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:He(l,f)})):f&&d.push(i(d)+"rotate("+f+r)}function a(l,f,d,h){l!==f?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:He(l,f)}):f&&d.push(i(d)+"skewX("+f+r)}function u(l,f,d,h,g,S){if(l!==d||f!==h){var T=g.push(i(g)+"scale(",null,",",null,")");S.push({i:T-4,x:He(l,d)},{i:T-2,x:He(f,h)})}else(d!==1||h!==1)&&g.push(i(g)+"scale("+d+","+h+")")}return function(l,f){var d=[],h=[];return l=e(l),f=e(f),s(l.translateX,l.translateY,f.translateX,f.translateY,d,h),o(l.rotate,f.rotate,d,h),a(l.skewX,f.skewX,d,h),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,d,h),l=f=null,function(g){for(var S=-1,T=h.length,q;++S<T;)d[(q=h[S]).i]=q.x(g);return d.join("")}}}var Ns=pi(Ts,"px, ","px)","deg)"),Ls=pi(Rs,", ",")",")"),Is=1e-12;function vr(e){return((e=Math.exp(e))+1/e)/2}function Os(e){return((e=Math.exp(e))-1/e)/2}function Ps(e){return((e=Math.exp(2*e))-1)/(e+1)}const Fs=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],f=o[0],d=o[1],h=o[2],g=f-a,S=d-u,T=g*g+S*S,q,R;if(T<Is)R=Math.log(h/l)/t,q=function(L){return[a+L*g,u+L*S,l*Math.exp(t*L*R)]};else{var K=Math.sqrt(T),A=(h*h-l*l+r*T)/(2*l*n*K),B=(h*h-l*l-r*T)/(2*h*n*K),N=Math.log(Math.sqrt(A*A+1)-A),H=Math.log(Math.sqrt(B*B+1)-B);R=(H-N)/t,q=function(L){var m=L*R,p=vr(N),y=l/(n*K)*(p*Ps(t*m+N)-Os(N));return[a+y*g,u+y*S,l*p/vr(t*m+N)]}}return q.duration=R*1e3*t/Math.SQRT2,q}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function Vs(e){return function(){return e}}function qs(e){return+e}var br=[0,1];function pt(e){return e}function Dn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Vs(isNaN(t)?NaN:.5)}function Bs(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Hs(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=Dn(i,r),s=n(o,s)):(r=Dn(r,i),s=n(s,o)),function(a){return s(r(a))}}function Xs(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Dn(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=ns(e,a,1,r)-1;return s[u](i[u](a))}}function Us(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ys(){var e=br,t=br,n=Un,r,i,s,o=pt,a,u,l;function f(){var h=Math.min(e.length,t.length);return o!==pt&&(o=Bs(e[0],e[h-1])),a=h>2?Xs:Hs,u=l=null,d}function d(h){return h==null||isNaN(h=+h)?s:(u||(u=a(e.map(r),t,n)))(r(o(h)))}return d.invert=function(h){return o(i((l||(l=a(t,e.map(r),He)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,qs),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),n=Ds,f()},d.clamp=function(h){return arguments.length?(o=h?!0:pt,f()):o!==pt},d.interpolate=function(h){return arguments.length?(n=h,f()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,g){return r=h,i=g,f()}}function Ws(){return Ys()(pt,pt)}function Ks(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function en(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function yt(e){return e=en(Math.abs(e)),e?e[1]:NaN}function Qs(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function js(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Gs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tn(e){if(!(t=Gs.exec(e)))throw new Error("invalid format: "+e);var t;return new Yn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}tn.prototype=Yn.prototype;function Yn(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zs(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var mi;function Js(e,t){var n=en(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(mi=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+en(e,Math.max(0,t+s-1))[0]}function kr(e,t){var n=en(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const xr={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ks,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kr(e*100,t),r:kr,s:Js,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Sr(e){return e}var Mr=Array.prototype.map,Er=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function $s(e){var t=e.grouping===void 0||e.thousands===void 0?Sr:Qs(Mr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Sr:js(Mr.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"\u2212":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(d){d=tn(d);var h=d.fill,g=d.align,S=d.sign,T=d.symbol,q=d.zero,R=d.width,K=d.comma,A=d.precision,B=d.trim,N=d.type;N==="n"?(K=!0,N="g"):xr[N]||(A===void 0&&(A=12),B=!0,N="g"),(q||h==="0"&&g==="=")&&(q=!0,h="0",g="=");var H=T==="$"?n:T==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",L=T==="$"?r:/[%p]/.test(N)?o:"",m=xr[N],p=/[defgprs%]/.test(N);A=A===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function y(w){var c=H,D=L,_,z,x;if(N==="c")D=m(w)+D,w="";else{w=+w;var b=w<0||1/w<0;if(w=isNaN(w)?u:m(Math.abs(w),A),B&&(w=Zs(w)),b&&+w==0&&S!=="+"&&(b=!1),c=(b?S==="("?S:a:S==="-"||S==="("?"":S)+c,D=(N==="s"?Er[8+mi/3]:"")+D+(b&&S==="("?")":""),p){for(_=-1,z=w.length;++_<z;)if(x=w.charCodeAt(_),48>x||x>57){D=(x===46?i+w.slice(_+1):w.slice(_))+D,w=w.slice(0,_);break}}}K&&!q&&(w=t(w,1/0));var k=c.length+w.length+D.length,C=k<R?new Array(R-k+1).join(h):"";switch(K&&q&&(w=t(C+w,C.length?R-D.length:1/0),C=""),g){case"<":w=c+w+D+C;break;case"=":w=c+C+w+D;break;case"^":w=C.slice(0,k=C.length>>1)+c+w+D+C.slice(k);break;default:w=C+c+w+D;break}return s(w)}return y.toString=function(){return d+""},y}function f(d,h){var g=l((d=tn(d),d.type="f",d)),S=Math.max(-8,Math.min(8,Math.floor(yt(h)/3)))*3,T=Math.pow(10,-S),q=Er[8+S/3];return function(R){return g(T*R)+q}}return{format:l,formatPrefix:f}}var Vt,gi,_i;eo({thousands:",",grouping:[3],currency:["$",""]});function eo(e){return Vt=$s(e),gi=Vt.format,_i=Vt.formatPrefix,Vt}function to(e){return Math.max(0,-yt(Math.abs(e)))}function no(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yt(t)/3)))*3-yt(Math.abs(e)))}function ro(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yt(t)-yt(e))+1}function io(e,t,n,r){var i=ls(e,t,n),s;switch(r=tn(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=no(i,o))&&(r.precision=s),_i(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=ro(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=to(i))&&(r.precision=s-(r.type==="%")*2);break}}return gi(r)}function so(e){var t=e.domain;return e.ticks=function(n){var r=t();return os(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return io(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,f=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);f-- >0;){if(l=li(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Tn(){var e=Ws();return e.copy=function(){return Us(e,Tn())},ai.apply(e,arguments),so(e)}function oo(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const yi=oo("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var lo={value:()=>{}};function Wn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ut(n)}function Ut(e){this._=e}function ao(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ut.prototype=Wn.prototype={constructor:Ut,on:function(e,t){var n=this._,r=ao(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=uo(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Cr(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Cr(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ut(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function uo(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Cr(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=lo,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Rn="http://www.w3.org/1999/xhtml";const zr={svg:"http://www.w3.org/2000/svg",xhtml:Rn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),zr.hasOwnProperty(t)?{space:zr[t],local:e}:e}function fo(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Rn&&t.documentElement.namespaceURI===Rn?t.createElement(e):t.createElementNS(n,e)}}function co(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function wi(e){var t=dn(e);return(t.local?co:fo)(t)}function ho(){}function Kn(e){return e==null?ho:function(){return this.querySelector(e)}}function po(e){typeof e!="function"&&(e=Kn(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,f=0;f<o;++f)(u=s[f])&&(l=e.call(u,u.__data__,f,s))&&("__data__"in u&&(l.__data__=u.__data__),a[f]=l);return new Ve(r,this._parents)}function mo(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function go(){return[]}function vi(e){return e==null?go:function(){return this.querySelectorAll(e)}}function _o(e){return function(){return mo(e.apply(this,arguments))}}function yo(e){typeof e=="function"?e=_o(e):e=vi(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ve(r,i)}function bi(e){return function(){return this.matches(e)}}function ki(e){return function(t){return t.matches(e)}}var wo=Array.prototype.find;function vo(e){return function(){return wo.call(this.children,e)}}function bo(){return this.firstElementChild}function ko(e){return this.select(e==null?bo:vo(typeof e=="function"?e:ki(e)))}var xo=Array.prototype.filter;function So(){return Array.from(this.children)}function Mo(e){return function(){return xo.call(this.children,e)}}function Eo(e){return this.selectAll(e==null?So:Mo(typeof e=="function"?e:ki(e)))}function Co(e){typeof e!="function"&&(e=bi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ve(r,this._parents)}function xi(e){return new Array(e.length)}function zo(){return new Ve(this._enter||this._groups.map(xi),this._parents)}function nn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}nn.prototype={constructor:nn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ao(e){return function(){return e}}function Do(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new nn(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function To(e,t,n,r,i,s,o){var a,u,l=new Map,f=t.length,d=s.length,h=new Array(f),g;for(a=0;a<f;++a)(u=t[a])&&(h[a]=g=o.call(u,u.__data__,a,t)+"",l.has(g)?i[a]=u:l.set(g,u));for(a=0;a<d;++a)g=o.call(e,s[a],a,s)+"",(u=l.get(g))?(r[a]=u,u.__data__=s[a],l.delete(g)):n[a]=new nn(e,s[a]);for(a=0;a<f;++a)(u=t[a])&&l.get(h[a])===u&&(i[a]=u)}function Ro(e){return e.__data__}function No(e,t){if(!arguments.length)return Array.from(this,Ro);var n=t?To:Do,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ao(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var f=r[l],d=i[l],h=d.length,g=Lo(e.call(f,f&&f.__data__,l,r)),S=g.length,T=a[l]=new Array(S),q=o[l]=new Array(S),R=u[l]=new Array(h);n(f,d,T,q,R,g,t);for(var K=0,A=0,B,N;K<S;++K)if(B=T[K]){for(K>=A&&(A=K+1);!(N=q[A])&&++A<S;);B._next=N||null}}return o=new Ve(o,r),o._enter=a,o._exit=u,o}function Lo(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Io(){return new Ve(this._exit||this._groups.map(xi),this._parents)}function Oo(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Po(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],f=r[u],d=l.length,h=a[u]=new Array(d),g,S=0;S<d;++S)(g=l[S]||f[S])&&(h[S]=g);for(;u<i;++u)a[u]=n[u];return new Ve(a,this._parents)}function Fo(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Vo(e){e||(e=qo);function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,f=0;f<a;++f)(l=o[f])&&(u[f]=l);u.sort(t)}return new Ve(i,this._parents).order()}function qo(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Bo(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ho(){return Array.from(this)}function Xo(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Uo(){let e=0;for(const t of this)++e;return e}function Yo(){return!this.node()}function Wo(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Ko(e){return function(){this.removeAttribute(e)}}function Qo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jo(e,t){return function(){this.setAttribute(e,t)}}function Go(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Zo(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Jo(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $o(e,t){var n=dn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Qo:Ko:typeof t=="function"?n.local?Jo:Zo:n.local?Go:jo)(n,t))}function Si(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function el(e){return function(){this.style.removeProperty(e)}}function tl(e,t,n){return function(){this.style.setProperty(e,t,n)}}function nl(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function rl(e,t,n){return arguments.length>1?this.each((t==null?el:typeof t=="function"?nl:tl)(e,t,n==null?"":n)):wt(this.node(),e)}function wt(e,t){return e.style.getPropertyValue(t)||Si(e).getComputedStyle(e,null).getPropertyValue(t)}function il(e){return function(){delete this[e]}}function sl(e,t){return function(){this[e]=t}}function ol(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ll(e,t){return arguments.length>1?this.each((t==null?il:typeof t=="function"?ol:sl)(e,t)):this.node()[e]}function Mi(e){return e.trim().split(/^|\s+/)}function Qn(e){return e.classList||new Ei(e)}function Ei(e){this._node=e,this._names=Mi(e.getAttribute("class")||"")}Ei.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ci(e,t){for(var n=Qn(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function zi(e,t){for(var n=Qn(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function al(e){return function(){Ci(this,e)}}function ul(e){return function(){zi(this,e)}}function fl(e,t){return function(){(t.apply(this,arguments)?Ci:zi)(this,e)}}function cl(e,t){var n=Mi(e+"");if(arguments.length<2){for(var r=Qn(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?fl:t?al:ul)(n,t))}function hl(){this.textContent=""}function dl(e){return function(){this.textContent=e}}function pl(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function ml(e){return arguments.length?this.each(e==null?hl:(typeof e=="function"?pl:dl)(e)):this.node().textContent}function gl(){this.innerHTML=""}function _l(e){return function(){this.innerHTML=e}}function yl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function wl(e){return arguments.length?this.each(e==null?gl:(typeof e=="function"?yl:_l)(e)):this.node().innerHTML}function vl(){this.nextSibling&&this.parentNode.appendChild(this)}function bl(){return this.each(vl)}function kl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xl(){return this.each(kl)}function Sl(e){var t=typeof e=="function"?e:wi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ml(){return null}function El(e,t){var n=typeof e=="function"?e:wi(e),r=t==null?Ml:typeof t=="function"?t:Kn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Cl(){var e=this.parentNode;e&&e.removeChild(this)}function zl(){return this.each(Cl)}function Al(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tl(e){return this.select(e?Dl:Al)}function Rl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Nl(e){return function(t){e.call(this,t,this.__data__)}}function Ll(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Il(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Ol(e,t,n){return function(){var r=this.__on,i,s=Nl(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Pl(e,t,n){var r=Ll(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,f;u<l;++u)for(i=0,f=a[u];i<s;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(a=t?Ol:Il,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Ai(e,t,n){var r=Si(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Fl(e,t){return function(){return Ai(this,e,t)}}function Vl(e,t){return function(){return Ai(this,e,t.apply(this,arguments))}}function ql(e,t){return this.each((typeof t=="function"?Vl:Fl)(e,t))}function*Bl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Di=[null];function Ve(e,t){this._groups=e,this._parents=t}function Nt(){return new Ve([[document.documentElement]],Di)}function Hl(){return this}Ve.prototype=Nt.prototype={constructor:Ve,select:po,selectAll:yo,selectChild:ko,selectChildren:Eo,filter:Co,data:No,enter:zo,exit:Io,join:Oo,merge:Po,selection:Hl,order:Fo,sort:Vo,call:Bo,nodes:Ho,node:Xo,size:Uo,empty:Yo,each:Wo,attr:$o,style:rl,property:ll,classed:cl,text:ml,html:wl,raise:bl,lower:xl,append:Sl,insert:El,remove:zl,clone:Tl,datum:Rl,on:Pl,dispatch:ql,[Symbol.iterator]:Bl};function it(e){return typeof e=="string"?new Ve([[document.querySelector(e)]],[document.documentElement]):new Ve([[e]],Di)}function Xl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ot(e,t){if(e=Xl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Nn={capture:!0,passive:!1};function Ln(e){e.preventDefault(),e.stopImmediatePropagation()}function Ul(e){var t=e.document.documentElement,n=it(e).on("dragstart.drag",Ln,Nn);"onselectstart"in t?n.on("selectstart.drag",Ln,Nn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Yl(e,t){var n=e.document.documentElement,r=it(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ln,Nn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var vt=0,St=0,bt=0,Ti=1e3,rn,Mt,sn=0,ct=0,pn=0,Tt=typeof performance=="object"&&performance.now?performance:Date,Ri=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jn(){return ct||(Ri(Wl),ct=Tt.now()+pn)}function Wl(){ct=0}function on(){this._call=this._time=this._next=null}on.prototype=Ni.prototype={constructor:on,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jn():+n)+(t==null?0:+t),!this._next&&Mt!==this&&(Mt?Mt._next=this:rn=this,Mt=this),this._call=e,this._time=n,In()},stop:function(){this._call&&(this._call=null,this._time=1/0,In())}};function Ni(e,t,n){var r=new on;return r.restart(e,t,n),r}function Kl(){jn(),++vt;for(var e=rn,t;e;)(t=ct-e._time)>=0&&e._call.call(void 0,t),e=e._next;--vt}function Ar(){ct=(sn=Tt.now())+pn,vt=St=0;try{Kl()}finally{vt=0,jl(),ct=0}}function Ql(){var e=Tt.now(),t=e-sn;t>Ti&&(pn-=t,sn=e)}function jl(){for(var e,t=rn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:rn=n);Mt=e,In(r)}function In(e){if(!vt){St&&(St=clearTimeout(St));var t=e-ct;t>24?(e<1/0&&(St=setTimeout(Ar,e-Tt.now()-pn)),bt&&(bt=clearInterval(bt))):(bt||(sn=Tt.now(),bt=setInterval(Ql,Ti)),vt=1,Ri(Ar))}}function Dr(e,t,n){var r=new on;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Gl=Wn("start","end","cancel","interrupt"),Zl=[],Li=0,Tr=1,On=2,Yt=3,Rr=4,Pn=5,Wt=6;function mn(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Jl(e,n,{name:t,index:r,group:i,on:Gl,tween:Zl,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Li})}function Gn(e,t){var n=Ye(e,t);if(n.state>Li)throw new Error("too late; already scheduled");return n}function Qe(e,t){var n=Ye(e,t);if(n.state>Yt)throw new Error("too late; already running");return n}function Ye(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Jl(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ni(s,0,n.time);function s(l){n.state=Tr,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var f,d,h,g;if(n.state!==Tr)return u();for(f in r)if(g=r[f],g.name===n.name){if(g.state===Yt)return Dr(o);g.state===Rr?(g.state=Wt,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[f]):+f<t&&(g.state=Wt,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[f])}if(Dr(function(){n.state===Yt&&(n.state=Rr,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=On,n.on.call("start",e,e.__data__,n.index,n.group),n.state===On){for(n.state=Yt,i=new Array(h=n.tween.length),f=0,d=-1;f<h;++f)(g=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=g);i.length=d+1}}function a(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Pn,1),d=-1,h=i.length;++d<h;)i[d].call(e,f);n.state===Pn&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Wt,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Kt(e,t){var n=e.__transition,r,i,s=!0,o;if(!!n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>On&&r.state<Pn,r.state=Wt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function $l(e){return this.each(function(){Kt(this,e)})}function ea(e,t){var n,r;return function(){var i=Qe(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function ta(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Qe(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function na(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ye(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?ea:ta)(n,e,t))}function Zn(e,t,n){var r=e._id;return e.each(function(){var i=Qe(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ye(i,r).value[t]}}function Ii(e,t){var n;return(typeof t=="number"?He:t instanceof ft?$t:(n=ft(t))?(t=n,$t):hi)(e,t)}function ra(e){return function(){this.removeAttribute(e)}}function ia(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sa(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function oa(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function la(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function aa(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function ua(e,t){var n=dn(e),r=n==="transform"?Ls:Ii;return this.attrTween(e,typeof t=="function"?(n.local?aa:la)(n,r,Zn(this,"attr."+e,t)):t==null?(n.local?ia:ra)(n):(n.local?oa:sa)(n,r,t))}function fa(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ca(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ha(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ca(e,s)),n}return i._value=t,i}function da(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&fa(e,s)),n}return i._value=t,i}function pa(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=dn(e);return this.tween(n,(r.local?ha:da)(r,t))}function ma(e,t){return function(){Gn(this,e).delay=+t.apply(this,arguments)}}function ga(e,t){return t=+t,function(){Gn(this,e).delay=t}}function _a(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ma:ga)(t,e)):Ye(this.node(),t).delay}function ya(e,t){return function(){Qe(this,e).duration=+t.apply(this,arguments)}}function wa(e,t){return t=+t,function(){Qe(this,e).duration=t}}function va(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ya:wa)(t,e)):Ye(this.node(),t).duration}function ba(e,t){if(typeof t!="function")throw new Error;return function(){Qe(this,e).ease=t}}function ka(e){var t=this._id;return arguments.length?this.each(ba(t,e)):Ye(this.node(),t).ease}function xa(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Qe(this,e).ease=n}}function Sa(e){if(typeof e!="function")throw new Error;return this.each(xa(this._id,e))}function Ma(e){typeof e!="function"&&(e=bi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new $e(r,this._parents,this._name,this._id)}function Ea(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],f=u.length,d=o[a]=new Array(f),h,g=0;g<f;++g)(h=u[g]||l[g])&&(d[g]=h);for(;a<r;++a)o[a]=t[a];return new $e(o,this._parents,this._name,this._id)}function Ca(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function za(e,t,n){var r,i,s=Ca(t)?Gn:Qe;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Aa(e,t){var n=this._id;return arguments.length<2?Ye(this.node(),n).on.on(e):this.each(za(n,e,t))}function Da(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ta(){return this.on("end.remove",Da(this._id))}function Ra(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Kn(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),f,d,h=0;h<u;++h)(f=a[h])&&(d=e.call(f,f.__data__,h,a))&&("__data__"in f&&(d.__data__=f.__data__),l[h]=d,mn(l[h],t,n,h,l,Ye(f,n)));return new $e(s,this._parents,t,n)}function Na(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vi(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,f,d=0;d<l;++d)if(f=u[d]){for(var h=e.call(f,f.__data__,d,u),g,S=Ye(f,n),T=0,q=h.length;T<q;++T)(g=h[T])&&mn(g,t,n,T,h,S);s.push(h),o.push(f)}return new $e(s,o,t,n)}var La=Nt.prototype.constructor;function Ia(){return new La(this._groups,this._parents)}function Oa(e,t){var n,r,i;return function(){var s=wt(this,e),o=(this.style.removeProperty(e),wt(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Oi(e){return function(){this.style.removeProperty(e)}}function Pa(e,t,n){var r,i=n+"",s;return function(){var o=wt(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Fa(e,t,n){var r,i,s;return function(){var o=wt(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),wt(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Va(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Qe(this,e),l=u.on,f=u.value[s]==null?a||(a=Oi(t)):void 0;(l!==n||i!==f)&&(r=(n=l).copy()).on(o,i=f),u.on=r}}function qa(e,t,n){var r=(e+="")=="transform"?Ns:Ii;return t==null?this.styleTween(e,Oa(e,r)).on("end.style."+e,Oi(e)):typeof t=="function"?this.styleTween(e,Fa(e,r,Zn(this,"style."+e,t))).each(Va(this._id,e)):this.styleTween(e,Pa(e,r,t),n).on("end.style."+e,null)}function Ba(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ha(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Ba(e,o,n)),r}return s._value=t,s}function Xa(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ha(e,t,n==null?"":n))}function Ua(e){return function(){this.textContent=e}}function Ya(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Wa(e){return this.tween("text",typeof e=="function"?Ya(Zn(this,"text",e)):Ua(e==null?"":e+""))}function Ka(e){return function(t){this.textContent=e.call(this,t)}}function Qa(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ka(i)),t}return r._value=e,r}function ja(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qa(e))}function Ga(){for(var e=this._name,t=this._id,n=Pi(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var f=Ye(u,t);mn(u,e,n,l,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new $e(r,this._parents,e,n)}function Za(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Qe(this,r),f=l.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Ja=0;function $e(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Pi(){return++Ja}var Ge=Nt.prototype;$e.prototype={constructor:$e,select:Ra,selectAll:Na,selectChild:Ge.selectChild,selectChildren:Ge.selectChildren,filter:Ma,merge:Ea,selection:Ia,transition:Ga,call:Ge.call,nodes:Ge.nodes,node:Ge.node,size:Ge.size,empty:Ge.empty,each:Ge.each,on:Aa,attr:ua,attrTween:pa,style:qa,styleTween:Xa,text:Wa,textTween:ja,remove:Ta,tween:na,delay:_a,duration:va,ease:ka,easeVarying:Sa,end:Za,[Symbol.iterator]:Ge[Symbol.iterator]};function $a(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var eu={time:null,delay:0,duration:250,ease:$a};function tu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function nu(e){var t,n;e instanceof $e?(t=e._id,e=e._name):(t=Pi(),(n=eu).time=jn(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&mn(u,e,t,l,o,n||tu(u,t));return new $e(r,this._parents,e,t)}Nt.prototype.interrupt=$l;Nt.prototype.transition=nu;const qt=e=>()=>e;function ru(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Je(e,t,n){this.k=e,this.x=t,this.y=n}Je.prototype={constructor:Je,scale:function(e){return e===1?this:new Je(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Je(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ct=new Je(1,0,0);Je.prototype;function bn(e){e.stopImmediatePropagation()}function kt(e){e.preventDefault(),e.stopImmediatePropagation()}function iu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function su(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Nr(){return this.__zoom||Ct}function ou(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function lu(){return navigator.maxTouchPoints||"ontouchstart"in this}function au(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function uu(){var e=iu,t=su,n=au,r=ou,i=lu,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Fs,l=Wn("start","zoom","end"),f,d,h,g=500,S=150,T=0,q=10;function R(_){_.property("__zoom",Nr).on("wheel.zoom",m,{passive:!1}).on("mousedown.zoom",p).on("dblclick.zoom",y).filter(i).on("touchstart.zoom",w).on("touchmove.zoom",c).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}R.transform=function(_,z,x,b){var k=_.selection?_.selection():_;k.property("__zoom",Nr),_!==k?N(_,z,x,b):k.interrupt().each(function(){H(this,arguments).event(b).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},R.scaleBy=function(_,z,x,b){R.scaleTo(_,function(){var k=this.__zoom.k,C=typeof z=="function"?z.apply(this,arguments):z;return k*C},x,b)},R.scaleTo=function(_,z,x,b){R.transform(_,function(){var k=t.apply(this,arguments),C=this.__zoom,X=x==null?B(k):typeof x=="function"?x.apply(this,arguments):x,O=C.invert(X),F=typeof z=="function"?z.apply(this,arguments):z;return n(A(K(C,F),X,O),k,o)},x,b)},R.translateBy=function(_,z,x,b){R.transform(_,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof x=="function"?x.apply(this,arguments):x),t.apply(this,arguments),o)},null,b)},R.translateTo=function(_,z,x,b,k){R.transform(_,function(){var C=t.apply(this,arguments),X=this.__zoom,O=b==null?B(C):typeof b=="function"?b.apply(this,arguments):b;return n(Ct.translate(O[0],O[1]).scale(X.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof x=="function"?-x.apply(this,arguments):-x),C,o)},b,k)};function K(_,z){return z=Math.max(s[0],Math.min(s[1],z)),z===_.k?_:new Je(z,_.x,_.y)}function A(_,z,x){var b=z[0]-x[0]*_.k,k=z[1]-x[1]*_.k;return b===_.x&&k===_.y?_:new Je(_.k,b,k)}function B(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function N(_,z,x,b){_.on("start.zoom",function(){H(this,arguments).event(b).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(b).end()}).tween("zoom",function(){var k=this,C=arguments,X=H(k,C).event(b),O=t.apply(k,C),F=x==null?B(O):typeof x=="function"?x.apply(k,C):x,V=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),$=k.__zoom,G=typeof z=="function"?z.apply(k,C):z,me=u($.invert(F).concat(V/$.k),G.invert(F).concat(V/G.k));return function(ce){if(ce===1)ce=G;else{var Q=me(ce),Z=V/Q[2];ce=new Je(Z,F[0]-Q[0]*Z,F[1]-Q[1]*Z)}X.zoom(null,ce)}})}function H(_,z,x){return!x&&_.__zooming||new L(_,z)}function L(_,z){this.that=_,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,z),this.taps=0}L.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,z){return this.mouse&&_!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var z=it(this.that).datum();l.call(_,this.that,new ru(_,{sourceEvent:this.sourceEvent,target:R,type:_,transform:this.that.__zoom,dispatch:l}),z)}};function m(_,...z){if(!e.apply(this,arguments))return;var x=H(this,z).event(_),b=this.__zoom,k=Math.max(s[0],Math.min(s[1],b.k*Math.pow(2,r.apply(this,arguments)))),C=ot(_);if(x.wheel)(x.mouse[0][0]!==C[0]||x.mouse[0][1]!==C[1])&&(x.mouse[1]=b.invert(x.mouse[0]=C)),clearTimeout(x.wheel);else{if(b.k===k)return;x.mouse=[C,b.invert(C)],Kt(this),x.start()}kt(_),x.wheel=setTimeout(X,S),x.zoom("mouse",n(A(K(b,k),x.mouse[0],x.mouse[1]),x.extent,o));function X(){x.wheel=null,x.end()}}function p(_,...z){if(h||!e.apply(this,arguments))return;var x=_.currentTarget,b=H(this,z,!0).event(_),k=it(_.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",V,!0),C=ot(_,x),X=_.clientX,O=_.clientY;Ul(_.view),bn(_),b.mouse=[C,this.__zoom.invert(C)],Kt(this),b.start();function F($){if(kt($),!b.moved){var G=$.clientX-X,me=$.clientY-O;b.moved=G*G+me*me>T}b.event($).zoom("mouse",n(A(b.that.__zoom,b.mouse[0]=ot($,x),b.mouse[1]),b.extent,o))}function V($){k.on("mousemove.zoom mouseup.zoom",null),Yl($.view,b.moved),kt($),b.event($).end()}}function y(_,...z){if(!!e.apply(this,arguments)){var x=this.__zoom,b=ot(_.changedTouches?_.changedTouches[0]:_,this),k=x.invert(b),C=x.k*(_.shiftKey?.5:2),X=n(A(K(x,C),b,k),t.apply(this,z),o);kt(_),a>0?it(this).transition().duration(a).call(N,X,b,_):it(this).call(R.transform,X,b,_)}}function w(_,...z){if(!!e.apply(this,arguments)){var x=_.touches,b=x.length,k=H(this,z,_.changedTouches.length===b).event(_),C,X,O,F;for(bn(_),X=0;X<b;++X)O=x[X],F=ot(O,this),F=[F,this.__zoom.invert(F),O.identifier],k.touch0?!k.touch1&&k.touch0[2]!==F[2]&&(k.touch1=F,k.taps=0):(k.touch0=F,C=!0,k.taps=1+!!f);f&&(f=clearTimeout(f)),C&&(k.taps<2&&(d=F[0],f=setTimeout(function(){f=null},g)),Kt(this),k.start())}}function c(_,...z){if(!!this.__zooming){var x=H(this,z).event(_),b=_.changedTouches,k=b.length,C,X,O,F;for(kt(_),C=0;C<k;++C)X=b[C],O=ot(X,this),x.touch0&&x.touch0[2]===X.identifier?x.touch0[0]=O:x.touch1&&x.touch1[2]===X.identifier&&(x.touch1[0]=O);if(X=x.that.__zoom,x.touch1){var V=x.touch0[0],$=x.touch0[1],G=x.touch1[0],me=x.touch1[1],ce=(ce=G[0]-V[0])*ce+(ce=G[1]-V[1])*ce,Q=(Q=me[0]-$[0])*Q+(Q=me[1]-$[1])*Q;X=K(X,Math.sqrt(ce/Q)),O=[(V[0]+G[0])/2,(V[1]+G[1])/2],F=[($[0]+me[0])/2,($[1]+me[1])/2]}else if(x.touch0)O=x.touch0[0],F=x.touch0[1];else return;x.zoom("touch",n(A(X,O,F),x.extent,o))}}function D(_,...z){if(!!this.__zooming){var x=H(this,z).event(_),b=_.changedTouches,k=b.length,C,X;for(bn(_),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),C=0;C<k;++C)X=b[C],x.touch0&&x.touch0[2]===X.identifier?delete x.touch0:x.touch1&&x.touch1[2]===X.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(X=ot(X,this),Math.hypot(d[0]-X[0],d[1]-X[1])<q)){var O=it(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return R.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:qt(+_),R):r},R.filter=function(_){return arguments.length?(e=typeof _=="function"?_:qt(!!_),R):e},R.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:qt(!!_),R):i},R.extent=function(_){return arguments.length?(t=typeof _=="function"?_:qt([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),R):t},R.scaleExtent=function(_){return arguments.length?(s[0]=+_[0],s[1]=+_[1],R):[s[0],s[1]]},R.translateExtent=function(_){return arguments.length?(o[0][0]=+_[0][0],o[1][0]=+_[1][0],o[0][1]=+_[0][1],o[1][1]=+_[1][1],R):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},R.constrain=function(_){return arguments.length?(n=_,R):n},R.duration=function(_){return arguments.length?(a=+_,R):a},R.interpolate=function(_){return arguments.length?(u=_,R):u},R.on=function(){var _=l.on.apply(l,arguments);return _===l?R:_},R.clickDistance=function(_){return arguments.length?(T=(_=+_)*_,R):Math.sqrt(T)},R.tapDistance=function(_){return arguments.length?(q=+_,R):q},R}function fu(e){let t,n,r,i,s,o,a,u,l,f,d;return{c(){t=P("div"),n=P("div"),r=P("button"),r.textContent="+",i=oe(),s=P("button"),s.textContent="\u2212",o=oe(),a=P("button"),a.textContent="\u27F2",u=oe(),l=P("canvas"),v(r,"class","zoom-btn svelte-1wm14qf"),v(r,"aria-label","Zoom in"),v(r,"title","Zoom in"),v(s,"class","zoom-btn svelte-1wm14qf"),v(s,"aria-label","Zoom out"),v(s,"title","Zoom out"),v(a,"class","zoom-btn svelte-1wm14qf"),v(a,"aria-label","Reset zoom"),v(a,"title","Reset zoom"),v(n,"class","zoom-controls svelte-1wm14qf"),v(n,"aria-label","Zoom controls"),v(l,"width",e[0]),v(l,"height",e[1]),v(l,"class","svelte-1wm14qf"),v(t,"class","chart-container svelte-1wm14qf")},m(h,g){re(h,t,g),E(t,n),E(n,r),E(n,i),E(n,s),E(n,o),E(n,a),E(t,u),E(t,l),e[33](l),e[34](t),f||(d=[ve(r,"click",e[8]),ve(s,"click",e[9]),ve(a,"click",e[10]),ve(l,"mousemove",e[4]),ve(l,"mouseleave",e[6]),ve(l,"click",e[5]),ve(l,"touchend",e[7])],f=!0)},p(h,g){g[0]&1&&v(l,"width",h[0]),g[0]&2&&v(l,"height",h[1])},i:Re,o:Re,d(h){h&&te(t),e[33](null),e[34](null),f=!1,et(d)}}}const ht=10,cu=.3,hu=20,Lr=800;function nt(e,t){if(!t||!e)return!1;try{return new RegExp(t,"i").test(e)}catch{return e.toLowerCase().includes(t.toLowerCase())}}function du(e,t,n){let r,i,s,o,a,u,l,f,d,{data:h=[]}=t,{domainColumn:g="category"}=t,{opacity:S=1}=t,{selectedValues:T=new Set}=t,{searchQuery:q=""}=t,{showAnnotations:R=!0}=t,{highlightedData:K=[]}=t,{startDate:A=null}=t,{endDate:B=null}=t,{uniqueValues:N=[]}=t,{hoveredData:H=null}=t,{selectedData:L=null}=t,{clusterLabels:m=[]}=t,p=[],y,w,c,D=800,_=600,z={top:40,right:400,bottom:60,left:320},x=null,b=Ct,k=!1,C=0,X=null,O="";function F(){k=!0,C=performance.now(),X&&cancelAnimationFrame(X),V()}function V(){performance.now()-C<Lr?(Z(),X=requestAnimationFrame(V)):(k=!1,Z())}let $,G,me,ce=1;function Q(){if(!y||!w)return;const M=w.getBoundingClientRect();M.width>0&&M.height>0&&(n(0,D=Math.floor(M.width)),n(1,_=Math.floor(M.height))),ce=Math.max(window.devicePixelRatio||1,1),n(2,y.style.width="100%",y),n(2,y.style.height="100%",y),n(2,y.width=Math.max(1,Math.floor(D*ce)),y),n(2,y.height=Math.max(1,Math.floor(_*ce)),y),n(24,c=y.getContext("2d")),c.setTransform(ce,0,0,ce,0,0)}function Z(){if(console.log("Scatterplot draw() called, data.length:",h.length),!c||!h.length)return;c.clearRect(0,0,D,_),c.save(),c.translate(b.x,b.y),c.scale(b.k,b.k);let M=0,ee=1;if(k){const ne=(performance.now()-C)/Lr,se=Math.max(0,1-ne),J=Math.sin(ne*Math.PI*8);M=J*se*4,ee=1+J*se*.3}if(h.forEach(W=>{c.beginPath();let ne=z.left+u(W.x),se=z.top+d(W.y),J=Math.max(.5,ht/b.k);k&&W.isActive&&(ne+=M/b.k,se+=M*.5/b.k,J*=ee),c.arc(ne,se,J,0,Math.PI*2);const U=W[g]||"",le=U.includes(";")?U.split(";")[0].trim():U;n(24,c.fillStyle=me(le),c);const ge=Math.max(.1,Math.min(1,S));n(24,c.globalAlpha=W.isActive?ge:ge*.15,c),c.fill(),n(24,c.globalAlpha=1,c)}),m&&m.length>0){n(24,c.globalAlpha=.85,c),n(24,c.textAlign="center",c);const W=D<600,ne=W?9:15,se=W?7:11;m.forEach(J=>{const U=z.left+u(J.x),le=z.top+d(J.y),ge=J.label.match(/^(.+?)\s*\(Read:\s*(.+?)\)\s*$/),pe=ge?ge[1].trim():J.label,Me=ge?ge[2].trim():null,Ce=Math.max(W?8:12,ne/b.k);if(n(24,c.font=`bold ${Ce}px Arial`,c),n(24,c.textBaseline=Me?"bottom":"middle",c),n(24,c.strokeStyle="white",c),n(24,c.lineWidth=Math.max(W?1.5:2,3/b.k),c),c.strokeText(pe,U,le),n(24,c.fillStyle="#333",c),c.fillText(pe,U,le),Me&&!W){const Ae=Math.max(9,se/b.k);n(24,c.font=`${Ae}px Arial`,c),n(24,c.textBaseline="top",c);const De=le+2/b.k;n(24,c.strokeStyle="white",c),n(24,c.lineWidth=Math.max(1.5,2.5/b.k),c),c.strokeText(Me,U,De),n(24,c.fillStyle="#555",c),c.fillText(Me,U,De)}})}if(R&&p.forEach(W=>{n(24,c.globalAlpha=1,c),c.beginPath(),c.arc(W.x,W.y,W.radius,0,Math.PI*2),n(24,c.strokeStyle="red",c),n(24,c.lineWidth=2,c),c.setLineDash([5,5]),c.stroke();const ne=180,se=12;n(24,c.font="16px Arial",c);const J=W.x+W.label_x,U=W.y+W.label_y;let le=0,ge=0,pe=[];if(W.label){const j=W.label.split(" ");let Y="";j.forEach((ye,ae)=>{const ke=Y+ye+" ";c.measureText(ke).width>ne&&ae>0?(pe.push(Y),le=Math.max(le,c.measureText(Y).width),Y=ye+" "):Y=ke}),pe.push(Y),le=Math.max(le,c.measureText(Y).width),ge=se*pe.length}const Me=J,Ce=U-se,Ae=le,De=ge;let Ne,We;W.x<Me?Ne=Me:W.x>Me+Ae?Ne=Me+Ae:Ne=W.x,W.y<Ce?We=Ce:W.y>Ce+De?We=Ce+De:We=W.y;const tt=Math.atan2(We-W.y,Ne-W.x),st=W.x+W.radius*Math.cos(tt),I=W.y+W.radius*Math.sin(tt);if(c.setLineDash([]),c.beginPath(),c.moveTo(st,I),c.lineTo(Ne,We),n(24,c.strokeStyle="red",c),n(24,c.lineWidth=1,c),c.stroke(),W.label){n(24,c.font="16px Arial",c),n(24,c.fillStyle="red",c);const j=16;pe.forEach((Y,ye)=>{c.fillText(Y,J,U+ye*j)})}}),c.setLineDash([]),L){const W=z.left+u(L.x),ne=z.top+d(L.y);c.beginPath(),c.arc(W,ne,Math.max(.5,(ht+2)/b.k),0,Math.PI*2),n(24,c.fillStyle=me(L[g]),c),n(24,c.globalAlpha=1,c),c.fill(),n(24,c.strokeStyle="#1976d2",c),n(24,c.lineWidth=Math.max(1,3/b.k),c),c.stroke()}if(H&&H!==L){const W=z.left+u(H.x),ne=z.top+d(H.y);c.beginPath(),c.arc(W,ne,Math.max(.5,ht/b.k),0,Math.PI*2),n(24,c.fillStyle=me(H[g]),c),n(24,c.globalAlpha=1,c),c.fill(),n(24,c.strokeStyle="black",c),n(24,c.lineWidth=Math.max(1,2/b.k),c),c.stroke()}c.restore()}function we(M){const ee=y.getBoundingClientRect(),W=D/ee.width,ne=_/ee.height,se=(M.clientX-ee.left)*W,J=(M.clientY-ee.top)*ne,[U,le]=b.invert([se,J]),ge=h.find(pe=>{var ae,ke,Le,Be,Pe;const Me=z.left+u(pe.x),Ce=z.top+d(pe.y),Ae=Me-U,De=Ce-le,Ne=Math.sqrt(Ae*Ae+De*De)<(ht+3)/b.k,tt=!!(q&&String(q).trim().length)?nt((ae=pe.title)!=null?ae:"",q)||nt((ke=pe.text)!=null?ke:"",q)||nt((Le=pe.article_text)!=null?Le:"",q)||nt((Be=pe.summary)!=null?Be:"",q):!0,st=T&&T.size>0&&T.size<r,I=(Pe=pe[g])!=null?Pe:"";let j=!0;st&&(I.startsWith("No target;")?j=T.has(I):j=T.has(I)||[...T].some(je=>I.includes(je)));const Y=A&&B?pe.date>=A&&pe.date<=B:!0;return Ne&&(tt&&j&&Y)});ge?(n(12,H=ge),x=ge,n(2,y.style.cursor="pointer",y)):(n(12,H=null),x=null,n(2,y.style.cursor="crosshair",y)),Z()}function he(M){const ee=y.getBoundingClientRect(),W=D/ee.width,ne=_/ee.height,se=(M.clientX-ee.left)*W,J=(M.clientY-ee.top)*ne,[U,le]=b.invert([se,J]),ge=h.find(pe=>{var ae,ke,Le,Be,Pe;const Me=z.left+u(pe.x),Ce=z.top+d(pe.y),Ae=Me-U,De=Ce-le,Ne=Math.sqrt(Ae*Ae+De*De)<(ht+3)/b.k,tt=!!(q&&String(q).trim().length)?nt((ae=pe.title)!=null?ae:"",q)||nt((ke=pe.text)!=null?ke:"",q)||nt((Le=pe.article_text)!=null?Le:"",q)||nt((Be=pe.summary)!=null?Be:"",q):!0,st=T&&T.size>0&&T.size<r,I=(Pe=pe[g])!=null?Pe:"";let j=!0;st&&(I.startsWith("No target;")?j=T.has(I):j=T.has(I)||[...T].some(je=>I.includes(je)));const Y=A&&B?pe.date>=A&&pe.date<=B:!0;return Ne&&(tt&&j&&Y)});if(!ge){n(11,L=null),Z();return}if(M.ctrlKey||M.metaKey){const pe=ge.url||ge.link||ge.href||ge.permalink||ge.item_url;pe&&typeof window<"u"&&window.open(pe,"_blank","noopener,noreferrer");return}L===ge?n(11,L=null):n(11,L=ge),Z()}function ie(){n(12,H=x),Z()}function xe(M){if(M.changedTouches&&M.changedTouches.length>0){const ee=M.changedTouches[0],W=y.getBoundingClientRect(),ne=D/W.width,se=_/W.height,J=(ee.clientX-W.left)*ne,U=(ee.clientY-W.top)*se,[le,ge]=b.invert([J,U]),pe=h.find(Me=>{const Ce=z.left+u(Me.x),Ae=z.top+d(Me.y),De=Ce-le,Ne=Ae-ge;return Math.sqrt(De*De+Ne*Ne)<(ht+5)/b.k&&Me.isActive});pe&&(n(11,L=pe),Z())}}let de;Vn(()=>{if(console.log("Scatterplot mounted, canvas:",y),n(24,c=y.getContext("2d")),console.log("Canvas context:",c),Q(),window.ResizeObserver&&(de=new ResizeObserver(()=>{Q(),Z()}),de.observe(w)),$=uu().scaleExtent([cu,hu]).filter(M=>{const ee=M;return ee.type==="wheel"||ee.type==="touchstart"||ee.type==="touchmove"?!0:ee.type==="mousedown"?ee.button===0&&!ee.ctrlKey&&!ee.metaKey&&!ee.shiftKey:!ee.ctrlKey&&!ee.metaKey&&!ee.shiftKey}).on("zoom",M=>{b=M.transform,Z()}),G=it(y),G.call($),D<600){const ee=D/2,W=_/2,ne=Ct.translate(ee*(1-.85),W*(1-.85)).scale(.85);G.call($.transform,ne)}return Z(),()=>{de&&de.disconnect()}});function ue(M,ee){var se;if((se=ee==null?void 0:ee.stopPropagation)==null||se.call(ee),!G||!$)return;const W=D/2,ne=_/2;G.transition().duration(200).call($.scaleBy,M,[W,ne])}function fe(M){ue(1.25,M)}function ze(M){ue(1/1.25,M)}function _e(M){var ee;(ee=M==null?void 0:M.stopPropagation)==null||ee.call(M),!(!G||!$)&&G.transition().duration(200).call($.transform,Ct)}function be(M){Ue[M?"unshift":"push"](()=>{y=M,n(2,y)})}function Se(M){Ue[M?"unshift":"push"](()=>{w=M,n(3,w)})}return e.$$set=M=>{"data"in M&&n(13,h=M.data),"domainColumn"in M&&n(14,g=M.domainColumn),"opacity"in M&&n(15,S=M.opacity),"selectedValues"in M&&n(16,T=M.selectedValues),"searchQuery"in M&&n(17,q=M.searchQuery),"showAnnotations"in M&&n(18,R=M.showAnnotations),"highlightedData"in M&&n(19,K=M.highlightedData),"startDate"in M&&n(20,A=M.startDate),"endDate"in M&&n(21,B=M.endDate),"uniqueValues"in M&&n(22,N=M.uniqueValues),"hoveredData"in M&&n(12,H=M.hoveredData),"selectedData"in M&&n(11,L=M.selectedData),"clusterLabels"in M&&n(23,m=M.clusterLabels)},e.$$.update=()=>{if(e.$$.dirty[0]&1&&(D<600?n(25,z={top:20,right:20,bottom:20,left:20}):D<1024?n(25,z={top:30,right:100,bottom:40,left:100}):n(25,z={top:40,right:400,bottom:60,left:320})),e.$$.dirty[0]&524288&&new Set(K.map(M=>M.id)),e.$$.dirty[0]&24576&&(r=new Set(h.map(M=>M[g])).size),e.$$.dirty[0]&67174400){const M=[...T].sort().join("|");M!==O&&(n(26,O=M),T.size>0&&F())}e.$$.dirty[0]&33554433&&n(30,i=D-z.left-z.right),e.$$.dirty[0]&33554434&&n(27,s=_-z.top-z.bottom),e.$$.dirty[0]&8192&&n(32,o=[ur(h,M=>M.x),ar(h,M=>M.x)]),e.$$.dirty[1]&2&&n(31,a=o[0]===o[1]?[o[0]-1,o[1]+1]:o),e.$$.dirty[0]&1073741824|e.$$.dirty[1]&1&&(u=Tn().domain(a).range([0,i])),e.$$.dirty[0]&8192&&n(29,l=[ur(h,M=>M.y),ar(h,M=>M.y)]),e.$$.dirty[0]&536870912&&n(28,f=l[0]===l[1]?[l[0]-1,l[1]+1]:l),e.$$.dirty[0]&402653184&&(d=Tn().domain(f).range([s,0])),e.$$.dirty[0]&4210688&&(me=Bn(yi).domain(g?N:[])),e.$$.dirty[0]&8192&&h.length&&new Date(Math.min(...h.map(M=>M.date.getTime()))),e.$$.dirty[0]&8192&&h.length&&new Date(Math.max(...h.map(M=>M.date.getTime()))),e.$$.dirty[0]&28829696&&c&&h.length&&Z()},[D,_,y,w,we,he,ie,xe,fe,ze,_e,L,H,h,g,S,T,q,R,K,A,B,N,m,c,z,O,s,f,l,i,a,o,be,Se]}class pu extends hn{constructor(t){super(),cn(this,t,du,fu,an,{data:13,domainColumn:14,opacity:15,selectedValues:16,searchQuery:17,showAnnotations:18,highlightedData:19,startDate:20,endDate:21,uniqueValues:22,hoveredData:12,selectedData:11,clusterLabels:23},null,[-1,-1])}}function Ir(e,t,n){const r=e.slice();return r[31]=t[n],r}function Or(e){let t,n,r,i,s=e[31].label+"",o,a;return{c(){t=P("div"),n=P("div"),r=oe(),i=P("div"),o=Ee(s),v(n,"class","marker-line svelte-ynwhj4"),v(i,"class","marker-label svelte-ynwhj4"),v(t,"class","marker svelte-ynwhj4"),Te(t,"left",e[31].percent+"%"),v(t,"title",a=e[31].label)},m(u,l){re(u,t,l),E(t,n),E(t,r),E(t,i),E(i,o)},p(u,l){l[0]&8&&s!==(s=u[31].label+"")&&Fe(o,s),l[0]&8&&Te(t,"left",u[31].percent+"%"),l[0]&8&&a!==(a=u[31].label)&&v(t,"title",a)},d(u){u&&te(t)}}}function mu(e){let t,n,r,i,s,o,a,u,l,f,d=e[3],h=[];for(let g=0;g<d.length;g+=1)h[g]=Or(Ir(e,d,g));return{c(){t=P("div"),n=P("div"),r=P("div"),i=oe();for(let g=0;g<h.length;g+=1)h[g].c();s=oe(),o=P("div"),a=oe(),u=P("div"),v(r,"class","track-inner svelte-ynwhj4"),v(n,"class","track svelte-ynwhj4"),v(o,"class","thumb start-thumb svelte-ynwhj4"),Te(o,"left",e[5]+"%"),v(u,"class","thumb end-thumb svelte-ynwhj4"),Te(u,"left",e[4]+"%"),v(t,"class","range-slider svelte-ynwhj4"),Te(t,"--start-percent",e[5]+"%"),Te(t,"--end-percent",e[4]+"%")},m(g,S){re(g,t,S),E(t,n),E(n,r),E(t,i);for(let T=0;T<h.length;T+=1)h[T].m(t,null);E(t,s),E(t,o),e[15](o),E(t,a),E(t,u),e[18](u),e[21](t),l||(f=[ve(r,"mousedown",e[13]),ve(r,"touchstart",e[14]),ve(o,"mousedown",e[16]),ve(o,"touchstart",e[17]),ve(u,"mousedown",e[19]),ve(u,"touchstart",e[20])],l=!0)},p(g,S){if(S[0]&8){d=g[3];let T;for(T=0;T<d.length;T+=1){const q=Ir(g,d,T);h[T]?h[T].p(q,S):(h[T]=Or(q),h[T].c(),h[T].m(t,s))}for(;T<h.length;T+=1)h[T].d(1);h.length=d.length}S[0]&32&&Te(o,"left",g[5]+"%"),S[0]&16&&Te(u,"left",g[4]+"%"),S[0]&32&&Te(t,"--start-percent",g[5]+"%"),S[0]&16&&Te(t,"--end-percent",g[4]+"%")},i:Re,o:Re,d(g){g&&te(t),Fn(h,g),e[15](null),e[18](null),e[21](null),l=!1,et(f)}}}function gu(e,t,n){let r,i,s,{min:o=0}=t,{max:a=100}=t,{startValue:u}=t,{endValue:l}=t,{markers:f=[]}=t;const d=ri();let h,g,S,T=!1,q=null,R=null,K=0;function A(k,C){T=!0,q=C,R=h.getBoundingClientRect(),d("dragstart"),C==="range"&&(K=l-u),window.addEventListener("mousemove",B),window.addEventListener("mouseup",N)}function B(k){if(!T)return;const C=Math.min(Math.max(0,(k.clientX-R.left)/R.width),1),X=Math.round(C*(a-o)+o);if(q==="start")n(8,u=Math.min(X,l)),d("startChange",u);else if(q==="end")n(9,l=Math.max(X,u)),d("endChange",l);else if(q==="range"){let O=X-Math.floor(K/2),F=X+Math.ceil(K/2);O<o&&(O=o,F=o+K),F>a&&(F=a,O=a-K),O=Math.max(o,O),F=Math.min(a,F),n(8,u=O),n(9,l=F),d("startChange",u),d("endChange",l)}}function N(){T=!1,window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",N)}function H(k,C){k.preventDefault(),T=!0,q=C,R=h.getBoundingClientRect(),d("dragstart"),C==="range"&&(K=l-u),window.addEventListener("touchmove",L,{passive:!1}),window.addEventListener("touchend",m)}function L(k){if(k.preventDefault(),!T)return;const C=k.touches[0],X=Math.min(Math.max(0,(C.clientX-R.left)/R.width),1),O=Math.round(X*(a-o)+o);if(q==="start")n(8,u=Math.min(O,l)),d("startChange",u);else if(q==="end")n(9,l=Math.max(O,u)),d("endChange",l);else if(q==="range"){let F=O-Math.floor(K/2),V=O+Math.ceil(K/2);F<o&&(F=o,V=o+K),V>a&&(V=a,F=a-K),F=Math.max(o,F),V=Math.min(a,V),n(8,u=F),n(9,l=V),d("startChange",u),d("endChange",l)}}function m(){T=!1,window.removeEventListener("touchmove",L),window.removeEventListener("touchend",m)}const p=k=>A(k,"range"),y=k=>H(k,"range");function w(k){Ue[k?"unshift":"push"](()=>{g=k,n(1,g)})}const c=k=>A(k,"start"),D=k=>H(k,"start");function _(k){Ue[k?"unshift":"push"](()=>{S=k,n(2,S)})}const z=k=>A(k,"end"),x=k=>H(k,"end");function b(k){Ue[k?"unshift":"push"](()=>{h=k,n(0,h)})}return e.$$set=k=>{"min"in k&&n(10,o=k.min),"max"in k&&n(11,a=k.max),"startValue"in k&&n(8,u=k.startValue),"endValue"in k&&n(9,l=k.endValue),"markers"in k&&n(12,f=k.markers)},e.$$.update=()=>{e.$$.dirty[0]&3328&&n(5,r=a>o?(u-o)/(a-o)*100:0),e.$$.dirty[0]&3584&&n(4,i=a>o?(l-o)/(a-o)*100:100),e.$$.dirty[0]&7168&&n(3,s=f.map(k=>({...k,percent:a>o?(k.index-o)/(a-o)*100:0})))},[h,g,S,s,i,r,A,H,u,l,o,a,f,p,y,w,c,D,_,z,x,b]}class _u extends hn{constructor(t){super(),cn(this,t,gu,mu,an,{min:10,max:11,startValue:8,endValue:9,markers:12},null,[-1,-1])}}function yu(e){const t=e.slice(),n=Fi(t[0][t[1]]);return t[13]=n,t}function wu(e){let t,n=e[4]?"Click on a circle to pin it here.":"Hover over a circle to see details here.",r;return{c(){t=P("p"),r=Ee(n),v(t,"class","placeholder-text svelte-1i8zo0r")},m(i,s){re(i,t,s),E(t,r)},p(i,s){s&16&&n!==(n=i[4]?"Click on a circle to pin it here.":"Hover over a circle to see details here.")&&Fe(r,n)},d(i){i&&te(t)}}}function vu(e){let t,n,r=mt(e[0].title,e[3])+"",i,s,o,a,u,l,f=e[0].date.toISOString().split("T")[0]+"",d,h,g,S,T,q,R,K=mt(e[0].text||e[0].article_text,e[3])+"",A=e[4]&&Pr(e),B=(e[0].url||e[0].link||e[0].href||e[0].permalink||e[0].item_url)&&Fr(e),N=e[0].pofma_link&&Vr(e);function H(c,D){return D&3&&(g=null),g==null&&(g=!!(c[1]==="topic"&&Fi(c[0][c[1]]).sub)),g?qr:bu}function L(c,D){return D===qr?yu(c):c}let m=H(e,-1),p=m(L(e,m)),y=e[6]&&Br(e),w=e[0].summary&&Xr(e);return{c(){A&&A.c(),t=oe(),n=P("h1"),i=oe(),s=P("div"),o=P("div"),B&&B.c(),a=oe(),N&&N.c(),u=oe(),l=P("span"),d=Ee(f),h=oe(),p.c(),S=oe(),y&&y.c(),T=oe(),w&&w.c(),q=oe(),R=P("p"),v(n,"class","svelte-1i8zo0r"),v(o,"class","meta-links svelte-1i8zo0r"),v(l,"class","article-date svelte-1i8zo0r"),v(s,"class","meta-row svelte-1i8zo0r"),v(R,"class","svelte-1i8zo0r")},m(c,D){A&&A.m(c,D),re(c,t,D),re(c,n,D),n.innerHTML=r,re(c,i,D),re(c,s,D),E(s,o),B&&B.m(o,null),E(o,a),N&&N.m(o,null),E(s,u),E(s,l),E(l,d),re(c,h,D),p.m(c,D),re(c,S,D),y&&y.m(c,D),re(c,T,D),w&&w.m(c,D),re(c,q,D),re(c,R,D),R.innerHTML=K},p(c,D){c[4]?A?A.p(c,D):(A=Pr(c),A.c(),A.m(t.parentNode,t)):A&&(A.d(1),A=null),D&9&&r!==(r=mt(c[0].title,c[3])+"")&&(n.innerHTML=r),c[0].url||c[0].link||c[0].href||c[0].permalink||c[0].item_url?B?B.p(c,D):(B=Fr(c),B.c(),B.m(o,a)):B&&(B.d(1),B=null),c[0].pofma_link?N?N.p(c,D):(N=Vr(c),N.c(),N.m(o,null)):N&&(N.d(1),N=null),D&1&&f!==(f=c[0].date.toISOString().split("T")[0]+"")&&Fe(d,f),m===(m=H(c,D))&&p?p.p(L(c,m),D):(p.d(1),p=m(L(c,m)),p&&(p.c(),p.m(S.parentNode,S))),c[6]?y?y.p(c,D):(y=Br(c),y.c(),y.m(T.parentNode,T)):y&&(y.d(1),y=null),c[0].summary?w?w.p(c,D):(w=Xr(c),w.c(),w.m(q.parentNode,q)):w&&(w.d(1),w=null),D&9&&K!==(K=mt(c[0].text||c[0].article_text,c[3])+"")&&(R.innerHTML=K)},d(c){A&&A.d(c),c&&te(t),c&&te(n),c&&te(i),c&&te(s),B&&B.d(),N&&N.d(),c&&te(h),p.d(c),c&&te(S),y&&y.d(c),c&&te(T),w&&w.d(c),c&&te(q),c&&te(R)}}}function Pr(e){let t,n,r,i,s,o;return{c(){t=P("div"),n=P("span"),n.textContent="\u{1F4CC} Pinned",r=oe(),i=P("button"),i.textContent="\u2715",v(n,"class","pin-indicator svelte-1i8zo0r"),v(i,"class","unpin-btn svelte-1i8zo0r"),v(t,"class","pin-header svelte-1i8zo0r")},m(a,u){re(a,t,u),E(t,n),E(t,r),E(t,i),s||(o=ve(i,"click",e[9]),s=!0)},p:Re,d(a){a&&te(t),s=!1,o()}}}function Fr(e){let t,n,r;return{c(){t=P("a"),n=Ee("View on Factually"),v(t,"class","article-link svelte-1i8zo0r"),v(t,"href",r=e[0].url||e[0].link||e[0].href||e[0].permalink||e[0].item_url),v(t,"target","_blank"),v(t,"rel","noopener noreferrer")},m(i,s){re(i,t,s),E(t,n)},p(i,s){s&1&&r!==(r=i[0].url||i[0].link||i[0].href||i[0].permalink||i[0].item_url)&&v(t,"href",r)},d(i){i&&te(t)}}}function Vr(e){let t,n,r;return{c(){t=P("a"),n=Ee("View POFMA release"),v(t,"class","article-link svelte-1i8zo0r"),v(t,"href",r=e[0].pofma_link),v(t,"target","_blank"),v(t,"rel","noopener noreferrer")},m(i,s){re(i,t,s),E(t,n)},p(i,s){s&1&&r!==(r=i[0].pofma_link)&&v(t,"href",r)},d(i){i&&te(t)}}}function bu(e){let t,n=(e[5]?e[5](e[1],e[0][e[1]]):e[0][e[1]])+"",r;return{c(){t=P("span"),r=Ee(n),Te(t,"background",e[2](ln(e[0][e[1]]))),v(t,"class","svelte-1i8zo0r")},m(i,s){re(i,t,s),E(t,r)},p(i,s){s&35&&n!==(n=(i[5]?i[5](i[1],i[0][i[1]]):i[0][i[1]])+"")&&Fe(r,n),s&7&&Te(t,"background",i[2](ln(i[0][i[1]])))},d(i){i&&te(t)}}}function qr(e){let t,n,r=e[13].main+"",i,s,o,a=e[13].sub+"",u;return{c(){t=P("span"),n=P("span"),i=Ee(r),s=oe(),o=P("span"),u=Ee(a),v(n,"class","topic-main svelte-1i8zo0r"),v(o,"class","topic-sub svelte-1i8zo0r"),v(t,"class","topic-badge svelte-1i8zo0r"),Te(t,"background",e[2](ln(e[0][e[1]])))},m(l,f){re(l,t,f),E(t,n),E(n,i),E(t,s),E(t,o),E(o,u)},p(l,f){f&3&&r!==(r=l[13].main+"")&&Fe(i,r),f&3&&a!==(a=l[13].sub+"")&&Fe(u,a),f&7&&Te(t,"background",l[2](ln(l[0][l[1]])))},d(l){l&&te(t)}}}function Br(e){let t=e[6](e[1],e[0][e[1]]),n,r=t&&Hr(e);return{c(){r&&r.c(),n=ti()},m(i,s){r&&r.m(i,s),re(i,n,s)},p(i,s){s&67&&(t=i[6](i[1],i[0][i[1]])),t?r?r.p(i,s):(r=Hr(i),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(i){r&&r.d(i),i&&te(n)}}}function Hr(e){let t,n,r=e[6](e[1],e[0][e[1]])+"",i;return{c(){t=P("p"),n=P("em"),i=Ee(r),v(t,"class","svelte-1i8zo0r")},m(s,o){re(s,t,o),E(t,n),E(n,i)},p(s,o){o&67&&r!==(r=s[6](s[1],s[0][s[1]])+"")&&Fe(i,r)},d(s){s&&te(t)}}}function Xr(e){let t,n=mt(e[0].summary,e[3])+"";return{c(){t=P("p"),v(t,"class","summary svelte-1i8zo0r")},m(r,i){re(r,t,i),t.innerHTML=n},p(r,i){i&9&&n!==(n=mt(r[0].summary,r[3])+"")&&(t.innerHTML=n)},d(r){r&&te(t)}}}function ku(e){let t;function n(s,o){return s[0]?vu:wu}let r=n(e),i=r(e);return{c(){t=P("div"),i.c(),v(t,"class","detail-card svelte-1i8zo0r")},m(s,o){re(s,t,o),i.m(t,null)},p(s,[o]){r===(r=n(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(t,null)))},i:Re,o:Re,d(s){s&&te(t),i.d()}}}function ln(e){if(!e)return"";const t=String(e);return t.includes(";")?t.split(";")[0].trim():t}function Fi(e){if(!e)return{main:"",sub:""};const t=String(e),n=t.match(/^(.+?)\s*\(Read:\s*(.+?)\)\s*$/);return n?{main:n[1].trim(),sub:n[2].trim()}:{main:t,sub:""}}function mt(e,t){if(!t||!e)return e;try{const n=new RegExp(`(${t})`,"gi");return e.replace(n,"<mark>$1</mark>")}catch{const r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`(${r})`,"gi");return e.replace(i,"<mark>$1</mark>")}}function xu(e,t,n){const r=ri();let{hoveredData:i}=t,{domainColumn:s}=t,{data:o}=t,{colorScale:a}=t,{searchQuery:u=""}=t,{isPinned:l=!1}=t,{labelOverride:f=null}=t,{descriptionOverride:d=null}=t;Vn(()=>{a.domain(o.map(g=>g[s]))});const h=()=>r("unpin");return e.$$set=g=>{"hoveredData"in g&&n(0,i=g.hoveredData),"domainColumn"in g&&n(1,s=g.domainColumn),"data"in g&&n(8,o=g.data),"colorScale"in g&&n(2,a=g.colorScale),"searchQuery"in g&&n(3,u=g.searchQuery),"isPinned"in g&&n(4,l=g.isPinned),"labelOverride"in g&&n(5,f=g.labelOverride),"descriptionOverride"in g&&n(6,d=g.descriptionOverride)},[i,s,a,u,l,f,d,r,o,h]}class Su extends hn{constructor(t){super(),cn(this,t,xu,ku,an,{hoveredData:0,domainColumn:1,data:8,colorScale:2,searchQuery:3,isPinned:4,labelOverride:5,descriptionOverride:6})}}function Ur(e,t,n){const r=e.slice();return r[78]=t[n],r}function Yr(e,t,n){const r=e.slice();return r[81]=t[n],r}function Mu(e){let t;return{c(){t=P("div"),t.innerHTML='<p class="waiting-text svelte-zrar4a">Waiting for data...</p>',v(t,"class","loading-overlay svelte-zrar4a")},m(n,r){re(n,t,r)},p:Re,i:Re,o:Re,d(n){n&&te(t)}}}function Eu(e){let t,n,r,i;function s(d,h){return d[21]==="downloading"?Du:d[21]==="parsing"?Au:zu}let o=s(e),a=o(e);function u(d,h){return d[21]==="downloading"?Ru:Tu}let l=u(e),f=l(e);return{c(){t=P("div"),n=P("div"),r=P("div"),a.c(),i=oe(),f.c(),v(r,"class","progress-header svelte-zrar4a"),v(n,"class","progress-wrap svelte-zrar4a"),v(t,"class","loading-overlay svelte-zrar4a")},m(d,h){re(d,t,h),E(t,n),E(n,r),a.m(r,null),E(n,i),f.m(n,null)},p(d,h){o!==(o=s(d))&&(a.d(1),a=o(d),a&&(a.c(),a.m(r,null))),l===(l=u(d))&&f?f.p(d,h):(f.d(1),f=l(d),f&&(f.c(),f.m(n,null)))},i:Re,o:Re,d(d){d&&te(t),a.d(),f.d()}}}function Cu(e){let t,n,r,i;function s(u){e[44](u)}function o(u){e[45](u)}let a={data:e[6],domainColumn:e[1],selectedValues:e[3],opacity:e[14],searchQuery:e[10],showAnnotations:e[17],highlightedData:e[9],startDate:e[4],endDate:e[5],uniqueValues:e[2],clusterLabels:e[18]};return e[11]!==void 0&&(a.hoveredData=e[11]),e[12]!==void 0&&(a.selectedData=e[12]),t=new pu({props:a}),Ue.push(()=>Gt(t,"hoveredData",s)),Ue.push(()=>Gt(t,"selectedData",o)),{c(){qn(t.$$.fragment)},m(u,l){un(t,u,l),i=!0},p(u,l){const f={};l[0]&64&&(f.data=u[6]),l[0]&2&&(f.domainColumn=u[1]),l[0]&8&&(f.selectedValues=u[3]),l[0]&16384&&(f.opacity=u[14]),l[0]&1024&&(f.searchQuery=u[10]),l[0]&131072&&(f.showAnnotations=u[17]),l[0]&512&&(f.highlightedData=u[9]),l[0]&16&&(f.startDate=u[4]),l[0]&32&&(f.endDate=u[5]),l[0]&4&&(f.uniqueValues=u[2]),l[0]&262144&&(f.clusterLabels=u[18]),!n&&l[0]&2048&&(n=!0,f.hoveredData=u[11],jt(()=>n=!1)),!r&&l[0]&4096&&(r=!0,f.selectedData=u[12],jt(()=>r=!1)),t.$set(f)},i(u){i||(qe(t.$$.fragment,u),i=!0)},o(u){Ze(t.$$.fragment,u),i=!1},d(u){fn(t,u)}}}function zu(e){let t;return{c(){t=Ee("Loading...")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Au(e){let t;return{c(){t=Ee("Processing...")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Du(e){let t;return{c(){t=Ee("Downloading data...")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Tu(e){let t;return{c(){t=P("div"),v(t,"class","progress-bar indeterminate svelte-zrar4a")},m(n,r){re(n,t,r)},p:Re,d(n){n&&te(t)}}}function Ru(e){let t;function n(s,o){return s[23]?Lu:Nu}let r=n(e),i=r(e);return{c(){i.c(),t=ti()},m(s,o){i.m(s,o),re(s,t,o)},p(s,o){r===(r=n(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(t.parentNode,t)))},d(s){i.d(s),s&&te(t)}}}function Nu(e){let t,n,r,i=gt(e[22])+"",s;return{c(){t=P("div"),n=oe(),r=P("div"),s=Ee(i),v(t,"class","progress-bar indeterminate svelte-zrar4a"),v(r,"class","progress-label svelte-zrar4a")},m(o,a){re(o,t,a),re(o,n,a),re(o,r,a),E(r,s)},p(o,a){a[0]&4194304&&i!==(i=gt(o[22])+"")&&Fe(s,i)},d(o){o&&te(t),o&&te(n),o&&te(r)}}}function Lu(e){let t,n,r,i,s,o,a=gt(e[22])+"",u,l,f=gt(e[23])+"",d,h;return{c(){t=P("div"),n=P("div"),r=oe(),i=P("div"),s=Ee(e[24]),o=Ee("% ("),u=Ee(a),l=Ee(" / "),d=Ee(f),h=Ee(")"),v(n,"class","progress-fill svelte-zrar4a"),Te(n,"width",e[24]+"%"),v(t,"class","progress-bar svelte-zrar4a"),v(i,"class","progress-label svelte-zrar4a")},m(g,S){re(g,t,S),E(t,n),re(g,r,S),re(g,i,S),E(i,s),E(i,o),E(i,u),E(i,l),E(i,d),E(i,h)},p(g,S){S[0]&16777216&&Te(n,"width",g[24]+"%"),S[0]&16777216&&Fe(s,g[24]),S[0]&4194304&&a!==(a=gt(g[22])+"")&&Fe(u,a),S[0]&8388608&&f!==(f=gt(g[23])+"")&&Fe(d,f)},d(g){g&&te(t),g&&te(r),g&&te(i)}}}function Iu(e){let t;return{c(){t=P("span"),t.textContent="\u2039",v(t,"class","toggle-arrow svelte-zrar4a")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Ou(e){let t;return{c(){t=P("span"),t.textContent="\u203A",v(t,"class","toggle-arrow svelte-zrar4a")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Wr(e){let t,n,r,i,s,o,a,u,l,f,d,h,g,S,T,q,R,K,A,B,N,H,L,m,p,y,w,c,D,_,z,x,b,k,C,X,O,F,V,$,G,me,ce,Q,Z,we,he,ie,xe,de,ue,fe,ze;function _e(U){e[49](U)}function be(U){e[50](U)}let Se={min:0,max:e[25],markers:e[26]};e[7]!==void 0&&(Se.startValue=e[7]),e[8]!==void 0&&(Se.endValue=e[8]),H=new _u({props:Se}),Ue.push(()=>Gt(H,"startValue",_e)),Ue.push(()=>Gt(H,"endValue",be)),H.$on("dragstart",e[51]),H.$on("startChange",e[52]),H.$on("endChange",e[53]);let M=e[16]&&Kr();function ee(U,le){return U[15]?Fu:Pu}let W=ee(e),ne=W(e),se=e[13].length&&Qr(e),J=e[2].length&&Gr(e);return{c(){t=P("div"),n=P("div"),r=P("span"),r.textContent="Filters",i=oe(),s=P("button"),s.textContent="Reset",o=oe(),a=P("div"),u=P("span"),u.textContent="Date range",l=oe(),f=P("div"),d=P("input"),S=oe(),T=P("span"),T.textContent="\u2013",q=oe(),R=P("input"),B=oe(),N=P("div"),qn(H.$$.fragment),p=oe(),M&&M.c(),y=oe(),w=P("div"),c=P("button"),c.textContent="-1W",D=oe(),_=P("button"),_.textContent="-1D",z=oe(),x=P("button"),ne.c(),b=oe(),k=P("button"),k.textContent="+1D",C=oe(),X=P("button"),X.textContent="+1W",O=oe(),F=P("div"),V=P("label"),V.textContent="Search",$=oe(),G=P("input"),me=oe(),se&&se.c(),ce=oe(),J&&J.c(),Q=oe(),Z=P("div"),we=P("label"),we.textContent="Opacity",he=oe(),ie=P("input"),xe=oe(),de=P("details"),de.innerHTML=`<summary class="svelte-zrar4a">About this map</summary> 
            <div class="info-content svelte-zrar4a"><p class="svelte-zrar4a">A semantic map shows how pieces of language relate to each other based on meaning. Each dot here represents a correction or clarification published on Factually.gov.sg. Dots with similar misinformation themes appear closer together. Explore patterns on the map by shortening the time range and scrubbing the timeline, or conducting a search.</p></div>`,v(r,"class","panel-title svelte-zrar4a"),v(s,"class","reset-btn svelte-zrar4a"),v(n,"class","panel-header svelte-zrar4a"),v(u,"class","filter-label svelte-zrar4a"),v(d,"id","start-date"),v(d,"type","date"),v(d,"class","filter-input date-input svelte-zrar4a"),d.value=h=rt(e[4]),v(d,"max",g=rt(e[27])),v(T,"class","date-separator svelte-zrar4a"),v(R,"id","end-date"),v(R,"type","date"),v(R,"class","filter-input date-input svelte-zrar4a"),R.value=K=rt(e[5]),v(R,"max",A=rt(e[27])),v(f,"class","date-inputs svelte-zrar4a"),v(N,"class","slider-wrapper svelte-zrar4a"),dt(N,"pulse",e[16]),v(c,"class","nav-btn svelte-zrar4a"),v(_,"class","nav-btn svelte-zrar4a"),v(x,"class","nav-btn play-btn svelte-zrar4a"),v(k,"class","nav-btn svelte-zrar4a"),v(X,"class","nav-btn svelte-zrar4a"),v(w,"class","date-navigation svelte-zrar4a"),v(a,"class","filter-section date-section svelte-zrar4a"),v(V,"class","filter-label svelte-zrar4a"),v(V,"for","search-input"),v(G,"id","search-input"),v(G,"type","text"),v(G,"class","filter-input svelte-zrar4a"),v(G,"placeholder","Search keywords..."),v(F,"class","filter-section svelte-zrar4a"),v(we,"class","filter-label svelte-zrar4a"),v(we,"for","opacity-slider"),v(ie,"id","opacity-slider"),v(ie,"type","range"),v(ie,"class","filter-range svelte-zrar4a"),v(ie,"min","0.1"),v(ie,"max","1"),v(ie,"step","0.05"),v(Z,"class","filter-section svelte-zrar4a"),v(de,"class","info-accordion svelte-zrar4a"),v(t,"class","panel-content svelte-zrar4a")},m(U,le){re(U,t,le),E(t,n),E(n,r),E(n,i),E(n,s),E(t,o),E(t,a),E(a,u),E(a,l),E(a,f),E(f,d),E(f,S),E(f,T),E(f,q),E(f,R),E(a,B),E(a,N),un(H,N,null),E(N,p),M&&M.m(N,null),E(a,y),E(a,w),E(w,c),E(w,D),E(w,_),E(w,z),E(w,x),ne.m(x,null),E(w,b),E(w,k),E(w,C),E(w,X),E(t,O),E(t,F),E(F,V),E(F,$),E(F,G),Lt(G,e[10]),E(t,me),se&&se.m(t,null),E(t,ce),J&&J.m(t,null),E(t,Q),E(t,Z),E(Z,we),E(Z,he),E(Z,ie),Lt(ie,e[14]),E(t,xe),E(t,de),ue=!0,fe||(ze=[ve(s,"click",e[40]),ve(d,"change",e[47]),ve(R,"change",e[48]),ve(c,"click",e[54]),ve(_,"click",e[55]),ve(x,"click",e[37]),ve(k,"click",e[56]),ve(X,"click",e[57]),ve(G,"input",e[58]),ve(G,"input",e[38]),ve(ie,"change",e[60]),ve(ie,"input",e[60]),ve(ie,"input",e[39])],fe=!0)},p(U,le){(!ue||le[0]&16&&h!==(h=rt(U[4])))&&(d.value=h),(!ue||le[0]&134217728&&g!==(g=rt(U[27])))&&v(d,"max",g),(!ue||le[0]&32&&K!==(K=rt(U[5])))&&(R.value=K),(!ue||le[0]&134217728&&A!==(A=rt(U[27])))&&v(R,"max",A);const ge={};le[0]&33554432&&(ge.max=U[25]),le[0]&67108864&&(ge.markers=U[26]),!L&&le[0]&128&&(L=!0,ge.startValue=U[7],jt(()=>L=!1)),!m&&le[0]&256&&(m=!0,ge.endValue=U[8],jt(()=>m=!1)),H.$set(ge),U[16]?M||(M=Kr(),M.c(),M.m(N,null)):M&&(M.d(1),M=null),(!ue||le[0]&65536)&&dt(N,"pulse",U[16]),W!==(W=ee(U))&&(ne.d(1),ne=W(U),ne&&(ne.c(),ne.m(x,null))),le[0]&1024&&G.value!==U[10]&&Lt(G,U[10]),U[13].length?se?se.p(U,le):(se=Qr(U),se.c(),se.m(t,ce)):se&&(se.d(1),se=null),U[2].length?J?J.p(U,le):(J=Gr(U),J.c(),J.m(t,Q)):J&&(J.d(1),J=null),le[0]&16384&&Lt(ie,U[14])},i(U){ue||(qe(H.$$.fragment,U),ue=!0)},o(U){Ze(H.$$.fragment,U),ue=!1},d(U){U&&te(t),fn(H),M&&M.d(),ne.d(),se&&se.d(),J&&J.d(),fe=!1,et(ze)}}}function Kr(e){let t,n,r;return{c(){t=P("div"),t.textContent="Hover over dots to review content.",n=oe(),r=P("div"),r.textContent="Tap on dots to view details.",v(t,"class","slider-hint desktop-hint svelte-zrar4a"),v(r,"class","slider-hint mobile-hint svelte-zrar4a")},m(i,s){re(i,t,s),re(i,n,s),re(i,r,s)},d(i){i&&te(t),i&&te(n),i&&te(r)}}}function Pu(e){let t;return{c(){t=Ee("\u25B6")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Fu(e){let t;return{c(){t=Ee("\u23F8")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Qr(e){let t,n,r,i,s,o,a,u=e[13],l=[];for(let f=0;f<u.length;f+=1)l[f]=jr(Yr(e,u,f));return{c(){t=P("div"),n=P("label"),n.textContent="Colour by",r=oe(),i=P("select"),s=P("option"),s.textContent="Select column";for(let f=0;f<l.length;f+=1)l[f].c();v(n,"class","filter-label svelte-zrar4a"),v(n,"for","domain-column"),s.__value="",s.value=s.__value,s.disabled=!0,v(i,"id","domain-column"),v(i,"class","filter-select svelte-zrar4a"),e[1]===void 0&&Qt(()=>e[59].call(i)),v(t,"class","filter-section svelte-zrar4a")},m(f,d){re(f,t,d),E(t,n),E(t,r),E(t,i),E(i,s);for(let h=0;h<l.length;h+=1)l[h].m(i,null);sr(i,e[1]),o||(a=[ve(i,"change",e[34]),ve(i,"change",e[59])],o=!0)},p(f,d){if(d[0]&1073750016){u=f[13];let h;for(h=0;h<u.length;h+=1){const g=Yr(f,u,h);l[h]?l[h].p(g,d):(l[h]=jr(g),l[h].c(),l[h].m(i,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=u.length}d[0]&8194&&sr(i,f[1])},d(f){f&&te(t),Fn(l,f),o=!1,et(a)}}}function jr(e){let t,n=(e[30][e[81]]||e[81])+"",r,i;return{c(){t=P("option"),r=Ee(n),t.__value=i=e[81],t.value=t.__value},m(s,o){re(s,t,o),E(t,r)},p(s,o){o[0]&8192&&n!==(n=(s[30][s[81]]||s[81])+"")&&Fe(r,n),o[0]&8192&&i!==(i=s[81])&&(t.__value=i,t.value=t.__value)},d(s){s&&te(t)}}}function Gr(e){let t,n,r,i,s,o,a,u,l,f=e[2],d=[];for(let h=0;h<f.length;h+=1)d[h]=Zr(Ur(e,f,h));return{c(){t=P("div"),n=P("label"),n.textContent="Highlight",r=oe(),i=P("select"),s=P("option"),o=Ee("\u2605 Show All");for(let h=0;h<d.length;h+=1)d[h].c();v(n,"class","filter-label svelte-zrar4a"),v(n,"for","value-select"),s.__value="__ALL__",s.value=s.__value,s.selected=a=e[3].size===0,v(i,"id","value-select"),i.multiple=!0,v(i,"size","5"),v(i,"class","filter-select multi-select svelte-zrar4a"),v(t,"class","filter-section svelte-zrar4a")},m(h,g){re(h,t,g),E(t,n),E(t,r),E(t,i),E(i,s),E(s,o);for(let S=0;S<d.length;S+=1)d[S].m(i,null);u||(l=ve(i,"change",e[35]),u=!0)},p(h,g){if(g[0]&8&&a!==(a=h[3].size===0)&&(s.selected=a),g[0]&12|g[1]&1){f=h[2];let S;for(S=0;S<f.length;S+=1){const T=Ur(h,f,S);d[S]?d[S].p(T,g):(d[S]=Zr(T),d[S].c(),d[S].m(i,null))}for(;S<d.length;S+=1)d[S].d(1);d.length=f.length}},d(h){h&&te(t),Fn(d,h),u=!1,l()}}}function Zr(e){let t,n=e[31](e[78])+"",r,i,s;return{c(){t=P("option"),r=Ee(n),t.__value=i=e[78],t.value=t.__value,t.selected=s=e[3].has(e[78])},m(o,a){re(o,t,a),E(t,r)},p(o,a){a[0]&4&&n!==(n=o[31](o[78])+"")&&Fe(r,n),a[0]&4&&i!==(i=o[78])&&(t.__value=i,t.value=t.__value),a[0]&12&&s!==(s=o[3].has(o[78]))&&(t.selected=s)},d(o){o&&te(t)}}}function Jr(e){let t,n,r,i,s,o,a;return i=new Su({props:{hoveredData:e[29],data:e[0],domainColumn:e[1],colorScale:e[28],searchQuery:e[10],isPinned:!!e[12]}}),i.$on("unpin",e[62]),{c(){t=P("button"),t.textContent="\xD7",n=oe(),r=P("div"),qn(i.$$.fragment),v(t,"class","panel-close svelte-zrar4a"),v(t,"aria-label","Close"),v(r,"class","panel-content svelte-zrar4a")},m(u,l){re(u,t,l),re(u,n,l),re(u,r,l),un(i,r,null),s=!0,o||(a=ve(t,"click",e[61]),o=!0)},p(u,l){const f={};l[0]&536870912&&(f.hoveredData=u[29]),l[0]&1&&(f.data=u[0]),l[0]&2&&(f.domainColumn=u[1]),l[0]&268435456&&(f.colorScale=u[28]),l[0]&1024&&(f.searchQuery=u[10]),l[0]&4096&&(f.isPinned=!!u[12]),i.$set(f)},i(u){s||(qe(i.$$.fragment,u),s=!0)},o(u){Ze(i.$$.fragment,u),s=!1},d(u){u&&te(t),u&&te(n),u&&te(r),fn(i),o=!1,a()}}}function Vu(e){let t,n,r,i,s,o,a,u,l,f,d,h,g,S,T,q;const R=[Cu,Eu,Mu],K=[];function A(p,y){return p[6].length?0:p[20]?1:2}o=A(e),a=K[o]=R[o](e);function B(p,y){return p[19]?Ou:Iu}let N=B(e),H=N(e),L=!e[19]&&Wr(e),m=e[29]&&Jr(e);return{c(){t=P("div"),n=P("header"),n.innerHTML=`<a href="https://github.com/wongpeiting/factually-semantic-map" target="_blank" rel="noopener noreferrer" class="help-btn mobile-only svelte-zrar4a" title="View on GitHub">?</a> 
    <div class="title-row svelte-zrar4a"><h1 class="title svelte-zrar4a">What Factually Moves to Correct \u{1F440}</h1> 
      <div class="header-right svelte-zrar4a"><a href="https://github.com/wongpeiting/factually-semantic-map" target="_blank" rel="noopener noreferrer" class="help-btn desktop-only svelte-zrar4a" title="View on GitHub">?</a> 
        <span class="data-date svelte-zrar4a">Data as of Feb 5, 2026.</span></div></div> 
    <p class="tagline svelte-zrar4a">Drawing on cases published on Factually \u2014 Singapore&#39;s state-run fact-checking site used alongside the Protection from Online Falsehoods and Manipulation Act (POFMA) \u2014 this semantic map shows how government-identified falsehoods cluster.</p> 
    <p class="subtitle svelte-zrar4a">Each dot represents a disputed claim, revealing where official corrections concentrate.</p>`,r=oe(),i=P("main"),s=P("div"),a.c(),u=oe(),l=P("aside"),f=P("button"),H.c(),d=oe(),L&&L.c(),h=oe(),g=P("aside"),m&&m.c(),v(n,"class","header svelte-zrar4a"),v(s,"class","scatterplot-wrapper svelte-zrar4a"),v(f,"class","panel-toggle svelte-zrar4a"),v(f,"aria-label","Toggle filters"),v(l,"class","floating-panel filter-panel svelte-zrar4a"),dt(l,"collapsed",e[19]),v(g,"class","floating-panel detail-panel svelte-zrar4a"),dt(g,"visible",!!e[29]),v(i,"class","main-content svelte-zrar4a"),v(t,"class","app-container svelte-zrar4a")},m(p,y){re(p,t,y),E(t,n),E(t,r),E(t,i),E(i,s),K[o].m(s,null),E(i,u),E(i,l),E(l,f),H.m(f,null),E(l,d),L&&L.m(l,null),E(i,h),E(i,g),m&&m.m(g,null),S=!0,T||(q=ve(f,"click",e[46]),T=!0)},p(p,y){let w=o;o=A(p),o===w?K[o].p(p,y):(_n(),Ze(K[w],1,1,()=>{K[w]=null}),yn(),a=K[o],a?a.p(p,y):(a=K[o]=R[o](p),a.c()),qe(a,1),a.m(s,null)),N!==(N=B(p))&&(H.d(1),H=N(p),H&&(H.c(),H.m(f,null))),p[19]?L&&(_n(),Ze(L,1,1,()=>{L=null}),yn()):L?(L.p(p,y),y[0]&524288&&qe(L,1)):(L=Wr(p),L.c(),qe(L,1),L.m(l,null)),(!S||y[0]&524288)&&dt(l,"collapsed",p[19]),p[29]?m?(m.p(p,y),y[0]&536870912&&qe(m,1)):(m=Jr(p),m.c(),qe(m,1),m.m(g,null)):m&&(_n(),Ze(m,1,1,()=>{m=null}),yn()),(!S||y[0]&536870912)&&dt(g,"visible",!!p[29])},i(p){S||(qe(a),qe(L),qe(m),S=!0)},o(p){Ze(a),Ze(L),Ze(m),S=!1},d(p){p&&te(t),K[o].d(),H.d(),L&&L.d(),m&&m.d(),T=!1,q()}}}function qu(){try{const e=new URLSearchParams(window.location.search),t=e.get("url"),n=e.get("filename"),r=e.get("bucket");if(t&&/^https?:\/\//i.test(t))return t;if(n){let i="";return r?/^https?:\/\//i.test(r)?i=r:r.includes(".")?i=`https://${r}`:i=`https://${r}.s3.amazonaws.com`:i={BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_S3_BASE_URL||{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_BASE_URL||"https://pink-slime-public.s3.amazonaws.com/",i&&!i.endsWith("/")&&(i+="/"),i?i+n:n}return{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}catch(e){return console.warn("Failed to resolve data URL from query params:",e),{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}}function gt(e){if(!e||e<=0)return"0 KB";const t=["B","KB","MB","GB","TB"];let n=e,r=0;for(;n>=1024&&r<t.length-1;)n/=1024,r++;const i=r===0?0:1;return`${n.toFixed(i)} ${t[r]}`}function rt(e){return e?e.toISOString().split("T")[0]:""}function Bu(e,t,n){let r,i,s,o,a,u,l="",f=[],d=[],h="topic",g=[],S=new Set,T=.6,q=null,R=null,K=[],A=[],B=0,N=0,H=!1,L=null,m=!1,p=!1,y=[],w="",c=!1,D=null,_=[],z=null,x=!1;const b={topic:"Broad themes",target:"Targets",directed_at:"Targets",org:"Organisation",state:"State",pofma_ed:"POFMA or not"},k=["General Clarification","General Explainer"];function C(I){if(!I)return I;const j=String(I),Y=j.match(/^(.+?)\s*\(Read:\s*.+?\)\s*$/),ye=Y?Y[1].trim():j;return k.includes(ye)?`\u2605 ${ye}`:ye}const X=[{date:new Date("2020-07-10"),label:"GE2020"},{date:new Date("2025-05-03"),label:"GE2025"}];let O=!1,F="idle",V=0,$=0,G=0;Vn(async()=>{window.scrollTo(0,0);try{n(20,O=!0),n(21,F="downloading"),n(22,V=0),n(23,$=0),n(24,G=0),n(41,l=qu()),console.log("Loading data from:",l);const I=await fetch(l,{mode:"cors",cache:"no-store"});if(!I.ok)throw new Error(`HTTP ${I.status}`);const j=I.headers.get("content-length");n(23,$=j?parseInt(j,10):0);let Y="";if(I.body&&I.body.getReader){const ye=I.body.getReader(),ae=[];let ke=0;for(;;){const{done:Pe,value:je}=await ye.read();if(Pe)break;ae.push(je),ke+=je.byteLength,n(22,V=ke),$&&n(24,G=Math.round(ke/$*100))}const Le=new Uint8Array(ke);let Be=0;for(const Pe of ae)Le.set(Pe,Be),Be+=Pe.byteLength;Y=new TextDecoder().decode(Le),console.log("CSV head:",Y.split(`
`).slice(0,5).join(`
`))}else Y=await I.text();n(21,F="parsing"),await Promise.resolve(Z(Y));try{const ye=await fetch("cluster_labels.json");ye.ok&&(n(18,_=await ye.json()),console.log("Loaded cluster labels:",_))}catch(ye){console.warn("Could not load cluster labels:",ye)}n(21,F="idle"),setTimeout(()=>{!m&&A.length>0&&(m=!0,me())},500)}catch(I){console.error("Failed to load CSV:",I)}finally{n(20,O=!1)}return()=>{L&&clearInterval(L)}});function me(){H||(n(15,H=!0),n(17,c=!1),n(16,p=!1),L=setInterval(()=>{if(N>=A.length-1){clearInterval(L),n(15,H=!1),setTimeout(()=>{n(7,B=0),n(8,N=A.length-1),ie(B,N,!0),n(16,p=!0)},1500);return}ue(1)},50))}function ce(){H&&L&&(clearInterval(L),n(15,H=!1))}function Q(I){ce(),n(16,p=!1),ue(I)}function Z(I){const j=I.split(/\r?\n/);if(j.length>0){const ke=j[0].split(",").map(Le=>Le.trim().toLowerCase()).join(",");j[0]=ke,I=j.join(`
`)}const Y=Gi.parse(I,{header:!0});console.log("Parsed CSV fields:",Y.meta.fields),console.log("Parsed rows (before filter):",Y.data.length),console.log("Sample row:",Y.data[0]),n(0,f=Y.data.filter(ae=>ae.x&&ae.y&&ae.date).map((ae,ke)=>({...ae,x:+ae.x,y:+ae.y,date:new Date(ae.date),id:ke}))),console.log("Data after filter:",f.length),console.log("Sample data point:",f[0]),console.log("domainColumn:",h),console.log("columns:",d),console.log("allDates:",A.length,"from",A[0],"to",A[A.length-1]),n(42,d=Y.meta.fields||[]),n(43,A=[...new Set(f.map(ae=>ae.date.getTime()))].sort((ae,ke)=>ae-ke).map(ae=>new Date(ae)));const ye=Math.max(Math.floor(A.length*.15),5);n(7,B=0),n(8,N=Math.min(ye,A.length-1)),n(4,q=A[B]),n(5,R=A[N]),xe(),h&&n(2,g=[...new Set(f.map(ae=>ae[h]).filter(ae=>ae!=null&&ae!==""))].sort((ae,ke)=>String(ae).localeCompare(String(ke))))}function we(I){ce(),n(1,h=I.target.value),n(2,g=h?[...new Set(f.map(j=>j[h]).filter(Boolean))].sort((j,Y)=>String(j).localeCompare(String(Y))):[]),n(3,S=new Set),n(17,c=!1)}function he(I){ce();const j=[...I.target.selectedOptions].map(ae=>ae.value),Y=j.includes("__ALL__"),ye=j.length===g.length;Y||ye||j.length===0?(n(3,S=new Set),n(9,y=[])):(n(3,S=new Set(j)),n(9,y=f.filter(ae=>S.has(ae[h])&&(!q||ae.date>=q)&&(!R||ae.date<=R)))),n(17,c=!1)}function ie(I,j,Y=!1){Y?(n(4,q=A[I]||A[0]),n(5,R=A[j]||A[A.length-1])):(n(4,q=I),n(5,R=j)),n(17,c=!1),xe()}function xe(){if(q){const I=q.getTime();n(7,B=Math.max(0,A.findIndex(j=>j.getTime()>=I)))}else n(7,B=0);if(R){const I=R.getTime();let j=-1;for(let Y=A.length-1;Y>=0;Y--)if(A[Y].getTime()<=I){j=Y;break}n(8,N=j>=0?j:A.length-1)}else n(8,N=A.length-1);B>N&&n(7,B=N),N<B&&n(8,N=B)}function de(I,j){if(ce(),n(16,p=!1),I.detail!==void 0)j==="start"?(n(7,B=I.detail),B>N&&n(7,B=N)):(n(8,N=I.detail),N<B&&n(8,N=B)),ie(B,N,!0);else{const Y=I.target.value?new Date(I.target.value):null;j==="start"?ie(Y,R):ie(q,Y),xe()}}function ue(I){const j=N-B;let Y=B+I,ye=N+I;Y<0&&(Y=0,ye=Math.min(j,A.length-1)),ye>=A.length&&(ye=A.length-1,Y=Math.max(0,ye-j)),n(7,B=Y),n(8,N=ye),ie(B,N,!0)}function fe(){H?(clearInterval(L),n(15,H=!1)):(n(15,H=!0),n(17,c=!1),L=setInterval(()=>{if(N>=A.length-1){clearInterval(L),n(15,H=!1);return}ue(1)},500))}function ze(I){ce(),n(10,w=I.target.value),n(17,c=!1)}function _e(){ce(),n(17,c=!1)}function be(){H&&L&&(clearInterval(L),n(15,H=!1));const I=d.includes("topic")?"topic":d.includes("target")?"target":o[0]||"";n(1,h=I),n(3,S=new Set),n(9,y=[]),n(10,w=""),n(17,c=!1),n(14,T=.02),n(14,T=+T),A.length?(n(7,B=0),n(8,N=A.length-1),ie(B,N,!0)):(n(4,q=null),n(5,R=null),n(7,B=0),n(8,N=0))}function Se(I){D=I,n(11,D)}function M(I){z=I,n(12,z)}const ee=()=>n(19,x=!x),W=I=>de(I,"start"),ne=I=>de(I,"end");function se(I){B=I,n(7,B)}function J(I){N=I,n(8,N)}const U=()=>{ce(),n(16,p=!1)},le=I=>de(I,"start"),ge=I=>de(I,"end"),pe=()=>Q(-7),Me=()=>Q(-1),Ce=()=>Q(1),Ae=()=>Q(7);function De(){w=this.value,n(10,w)}function Ne(){h=Xi(this),n(1,h),n(42,d),n(13,o),n(13,o),n(42,d)}function We(){T=Bi(this.value),n(14,T)}const tt=()=>n(12,z=null),st=()=>n(12,z=null);return e.$$.update=()=>{if(e.$$.dirty[1]&1024&&/^https?:\/\//i.test(l),e.$$.dirty[0]&512&&new Set(y.map(I=>I.id)),e.$$.dirty[0]&6144&&n(29,r=z||D),e.$$.dirty[0]&4096&&z&&ce(),e.$$.dirty[1]&2048&&n(13,o=d.filter(I=>I==="topic"||I==="target"||I==="org"||I==="state"||I==="pofma_ed"||I==="directed_at")),e.$$.dirty[0]&8194|e.$$.dirty[1]&2048&&(!d||d.length===0||(o.length&&!o.includes(h)?n(1,h=o[0]):o.length===0&&n(1,h=""))),e.$$.dirty[0]&3&&h&&f.length>0&&n(2,g=[...new Set(f.flatMap(I=>{const j=I[h];if(j==null||j==="")return[];const Y=String(j);return Y.startsWith("No target;")?[Y]:Y.includes(";")?Y.split(";").map(ye=>ye.trim()):[Y]}))].sort((I,j)=>String(I).localeCompare(String(j)))),e.$$.dirty[0]&6&&n(28,i=Bn(yi).domain(h?g:[])),e.$$.dirty[1]&4096&&A.length>0&&A[0],e.$$.dirty[1]&4096&&n(27,s=A.length>0?A[A.length-1]:null),e.$$.dirty[1]&4096&&n(26,a=A.length>0?X.map(I=>{let j=0,Y=1/0;return A.forEach((ye,ae)=>{const ke=Math.abs(ye.getTime()-I.date.getTime());ke<Y&&(Y=ke,j=ae)}),{index:j,label:I.label}}).filter(I=>I.index>=0&&I.index<=A.length-1):[]),e.$$.dirty[0]&1535|e.$$.dirty[1]&4096){A.length&&B===0&&A.length-1;const I=S.size>0&&S.size<g.length,j=w&&w.trim().length>0;n(6,K=f.map(Y=>{var Be,Pe,je,Jn,$n,er,tr,nr,rr;const ye=(!q||Y.date>=q)&&(!R||Y.date<=R);let ae=!0;if(I){const Ie=(Be=Y[h])!=null?Be:"";Ie.startsWith("No target;")?ae=S.has(Ie):ae=S.has(Ie)||[...S].some(Vi=>Ie.includes(Vi))}let ke=!0;if(j)try{const Ie=new RegExp(w,"i");ke=Ie.test((Pe=Y.title)!=null?Pe:"")||Ie.test((je=Y.text)!=null?je:"")||Ie.test((Jn=Y.article_text)!=null?Jn:"")||Ie.test(($n=Y.summary)!=null?$n:"")}catch{const Ie=w.toLowerCase();ke=((er=Y.title)!=null?er:"").toLowerCase().includes(Ie)||((tr=Y.text)!=null?tr:"").toLowerCase().includes(Ie)||((nr=Y.article_text)!=null?nr:"").toLowerCase().includes(Ie)||((rr=Y.summary)!=null?rr:"").toLowerCase().includes(Ie)}const Le=ye&&ae&&ke;return{...Y,isActive:Le,isHighlighted:Le}})),console.log("filteredData length:",K.length,"active:",K.filter(Y=>Y.isActive).length)}e.$$.dirty[0]&128|e.$$.dirty[1]&4096&&A.length>1&&B/(A.length-1)*100,e.$$.dirty[0]&256|e.$$.dirty[1]&4096&&A.length>1&&N/(A.length-1)*100,e.$$.dirty[1]&4096&&n(25,u=A.length>0?A.length-1:0)},[f,h,g,S,q,R,K,B,N,y,w,D,z,o,T,H,p,c,_,x,O,F,V,$,G,u,a,s,i,r,b,C,ce,Q,we,he,de,fe,ze,_e,be,l,d,A,Se,M,ee,W,ne,se,J,U,le,ge,pe,Me,Ce,Ae,De,Ne,We,tt,st]}class Hu extends hn{constructor(t){super(),cn(this,t,Bu,Vu,an,{},null,[-1,-1,-1])}}new Hu({target:document.getElementById("app")});
