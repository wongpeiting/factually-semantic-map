(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ne(){}function Wr(e){return e()}function Jn(){return Object.create(null)}function $e(e){e.forEach(Wr)}function Kr(e){return typeof e=="function"}function an(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ni(e){return Object.keys(e).length===0}function C(e,t){e.appendChild(t)}function re(e,t,n){e.insertBefore(t,n||null)}function te(e){e.parentNode.removeChild(e)}function Pn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function z(e){return document.createElement(e)}function Ee(e){return document.createTextNode(e)}function oe(){return Ee(" ")}function Qr(){return Ee("")}function ye(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Li(e){return e===""?null:+e}function Ii(e){return Array.from(e.childNodes)}function ze(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Nt(e,t){e.value=t==null?"":t}function qe(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function $n(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t){r.selected=!0;return}}e.selectedIndex=-1}function zi(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function Lt(e,t,n){e.classList[n?"add":"remove"](t)}function Oi(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}let Ct;function Mt(e){Ct=e}function jr(){if(!Ct)throw new Error("Function called outside component initialization");return Ct}function Fn(e){jr().$$.on_mount.push(e)}function Gr(){const e=jr();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=Oi(t,n,{cancelable:r});return i.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}const kt=[],Xe=[],Bt=[],kn=[],Pi=Promise.resolve();let xn=!1;function Fi(){xn||(xn=!0,Pi.then(Zr))}function Qt(e){Bt.push(e)}function jt(e){kn.push(e)}const gn=new Set;let It=0;function Zr(){const e=Ct;do{for(;It<kt.length;){const t=kt[It];It++,Mt(t),Vi(t.$$)}for(Mt(null),kt.length=0,It=0;Xe.length;)Xe.pop()();for(let t=0;t<Bt.length;t+=1){const n=Bt[t];gn.has(n)||(gn.add(n),n())}Bt.length=0}while(kt.length);for(;kn.length;)kn.pop()();xn=!1,gn.clear(),Mt(e)}function Vi(e){if(e.fragment!==null){e.update(),$e(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Qt)}}const Ht=new Set;let ot;function _n(){ot={r:0,c:[],p:ot}}function yn(){ot.r||$e(ot.c),ot=ot.p}function Fe(e,t){e&&e.i&&(Ht.delete(e),e.i(t))}function Ge(e,t,n,r){if(e&&e.o){if(Ht.has(e))return;Ht.add(e),ot.c.push(()=>{Ht.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Gt(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Vn(e){e&&e.c()}function un(e,t,n,r){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),r||Qt(()=>{const o=e.$$.on_mount.map(Wr).filter(Kr);e.$$.on_destroy?e.$$.on_destroy.push(...o):$e(o),e.$$.on_mount=[]}),s.forEach(Qt)}function cn(e,t){const n=e.$$;n.fragment!==null&&($e(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Bi(e,t){e.$$.dirty[0]===-1&&(kt.push(e),Fi(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fn(e,t,n,r,i,s,o,a=[-1]){const u=Ct;Mt(e);const l=e.$$={fragment:null,ctx:[],props:s,update:Ne,not_equal:i,bound:Jn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Jn(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};o&&o(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(m,h,...g)=>{const x=g.length?g[0]:h;return l.ctx&&i(l.ctx[m],l.ctx[m]=x)&&(!l.skip_bound&&l.bound[m]&&l.bound[m](x),c&&Bi(e,m)),h}):[],l.update(),c=!0,$e(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const m=Ii(t.target);l.fragment&&l.fragment.l(m),m.forEach(te)}else l.fragment&&l.fragment.c();t.intro&&Fe(e.$$.fragment),un(e,t.target,t.anchor,t.customElement),Zr()}Mt(u)}class hn{$destroy(){cn(this,1),this.$destroy=Ne}$on(t,n){if(!Kr(n))return Ne;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Ni(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var Hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jr={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,r)=>{e.exports=r()})(Hi,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,s=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,a={},u=0,l={};function c(p){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(d){var y=O(d);y.chunkSize=parseInt(y.chunkSize),d.step||d.chunk||(y.chunkSize=null),this._handle=new R(y),(this._handle.streamer=this)._config=y}.call(this,p),this.parseChunk=function(d,y){var v=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<v){let M=this._config.newline;M||(f=this._config.quoteChar||'"',M=this._handle.guessLineEndings(d,f)),d=[...d.split(M).slice(v)].join(M)}this.isFirstChunk&&I(this._config.beforeFirstChunk)&&(f=this._config.beforeFirstChunk(d))!==void 0&&(d=f),this.isFirstChunk=!1,this._halted=!1;var v=this._partialLine+d,f=(this._partialLine="",this._handle.parse(v,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(d=f.meta.cursor,v=(this._finished||(this._partialLine=v.substring(d-this._baseIndex),this._baseIndex=d),f&&f.data&&(this._rowCount+=f.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:f,workerId:l.WORKER_ID,finished:v});else if(I(this._config.chunk)&&!y){if(this._config.chunk(f,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=f=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(f.data),this._completeResults.errors=this._completeResults.errors.concat(f.errors),this._completeResults.meta=f.meta),this._completed||!v||!I(this._config.complete)||f&&f.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),v||f&&f.meta.paused||this._nextChunk(),f}this._halted=!0},this._sendError=function(d){I(this._config.error)?this._config.error(d):o&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:d,finished:!1})}}function m(p){var d;(p=p||{}).chunkSize||(p.chunkSize=l.RemoteChunkSize),c.call(this,p),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(y){this._input=y,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(d=new XMLHttpRequest,this._config.withCredentials&&(d.withCredentials=this._config.withCredentials),s||(d.onload=W(this._chunkLoaded,this),d.onerror=W(this._chunkError,this)),d.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var y,v=this._config.downloadRequestHeaders;for(y in v)d.setRequestHeader(y,v[y])}var f;this._config.chunkSize&&(f=this._start+this._config.chunkSize-1,d.setRequestHeader("Range","bytes="+this._start+"-"+f));try{d.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}s&&d.status===0&&this._chunkError()}},this._chunkLoaded=function(){d.readyState===4&&(d.status<200||400<=d.status?this._chunkError():(this._start+=this._config.chunkSize||d.responseText.length,this._finished=!this._config.chunkSize||this._start>=(y=>(y=y.getResponseHeader("Content-Range"))!==null?parseInt(y.substring(y.lastIndexOf("/")+1)):-1)(d),this.parseChunk(d.responseText)))},this._chunkError=function(y){y=d.statusText||y,this._sendError(new Error(y))}}function h(p){(p=p||{}).chunkSize||(p.chunkSize=l.LocalChunkSize),c.call(this,p);var d,y,v=typeof FileReader<"u";this.stream=function(f){this._input=f,y=f.slice||f.webkitSlice||f.mozSlice,v?((d=new FileReader).onload=W(this._chunkLoaded,this),d.onerror=W(this._chunkError,this)):d=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var f=this._input,M=(this._config.chunkSize&&(M=Math.min(this._start+this._config.chunkSize,this._input.size),f=y.call(f,this._start,M)),d.readAsText(f,this._config.encoding));v||this._chunkLoaded({target:{result:M}})},this._chunkLoaded=function(f){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(f.target.result)},this._chunkError=function(){this._sendError(d.error)}}function g(p){var d;c.call(this,p=p||{}),this.stream=function(y){return d=y,this._nextChunk()},this._nextChunk=function(){var y,v;if(!this._finished)return y=this._config.chunkSize,d=y?(v=d.substring(0,y),d.substring(y)):(v=d,""),this._finished=!d,this.parseChunk(v)}}function x(p){c.call(this,p=p||{});var d=[],y=!0,v=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(f){this._input=f,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){v&&d.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),d.length?this.parseChunk(d.shift()):y=!0},this._streamData=W(function(f){try{d.push(typeof f=="string"?f:f.toString(this._config.encoding)),y&&(y=!1,this._checkIsFinished(),this.parseChunk(d.shift()))}catch(M){this._streamError(M)}},this),this._streamError=W(function(f){this._streamCleanUp(),this._sendError(f)},this),this._streamEnd=W(function(){this._streamCleanUp(),v=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function R(p){var d,y,v,f,M=Math.pow(2,53),_=-M,q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,S=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,w=this,k=0,E=0,X=!1,N=!1,P=[],F={data:[],errors:[],meta:{}};function ee(Q){return p.skipEmptyLines==="greedy"?Q.join("").trim()==="":Q.length===1&&Q[0].length===0}function se(){if(F&&v&&(ue("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),v=!1),p.skipEmptyLines&&(F.data=F.data.filter(function(_e){return!ee(_e)})),ae()){let _e=function(we,pe){I(p.transformHeader)&&(we=p.transformHeader(we,pe)),P.push(we)};var le=_e;if(F)if(Array.isArray(F.data[0])){for(var Q=0;ae()&&Q<F.data.length;Q++)F.data[Q].forEach(_e);F.data.splice(0,1)}else F.data.forEach(_e)}function Z(_e,we){for(var pe=p.header?{}:[],he=0;he<_e.length;he++){var J=he,me=_e[he],me=((de,be)=>(Se=>(p.dynamicTypingFunction&&p.dynamicTyping[Se]===void 0&&(p.dynamicTyping[Se]=p.dynamicTypingFunction(Se)),(p.dynamicTyping[Se]||p.dynamicTyping)===!0))(de)?be==="true"||be==="TRUE"||be!=="false"&&be!=="FALSE"&&((Se=>{if(q.test(Se)&&(Se=parseFloat(Se),_<Se&&Se<M))return 1})(be)?parseFloat(be):S.test(be)?new Date(be):be===""?null:be):be)(J=p.header?he>=P.length?"__parsed_extra":P[he]:J,me=p.transform?p.transform(me,J):me);J==="__parsed_extra"?(pe[J]=pe[J]||[],pe[J].push(me)):pe[J]=me}return p.header&&(he>P.length?ue("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+he,E+we):he<P.length&&ue("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+he,E+we)),pe}var fe;F&&(p.header||p.dynamicTyping||p.transform)&&(fe=1,!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(Z),fe=F.data.length):F.data=Z(F.data,0),p.header&&F.meta&&(F.meta.fields=P),E+=fe)}function ae(){return p.header&&P.length===0}function ue(Q,Z,fe,le){Q={type:Q,code:Z,message:fe},le!==void 0&&(Q.row=le),F.errors.push(Q)}I(p.step)&&(f=p.step,p.step=function(Q){F=Q,ae()?se():(se(),F.data.length!==0&&(k+=Q.data.length,p.preview&&k>p.preview?y.abort():(F.data=F.data[0],f(F,w))))}),this.parse=function(Q,Z,fe){var le=p.quoteChar||'"',le=(p.newline||(p.newline=this.guessLineEndings(Q,le)),v=!1,p.delimiter?I(p.delimiter)&&(p.delimiter=p.delimiter(Q),F.meta.delimiter=p.delimiter):((le=((_e,we,pe,he,J)=>{var me,de,be,Se;J=J||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var T=0;T<J.length;T++){for(var $,U=J[T],B=0,ne=0,ie=0,ge=(be=void 0,new D({comments:he,delimiter:U,newline:we,preview:10}).parse(_e)),ke=0;ke<ge.data.length;ke++)pe&&ee(ge.data[ke])?ie++:($=ge.data[ke].length,ne+=$,be===void 0?be=$:0<$&&(B+=Math.abs($-be),be=$));0<ge.data.length&&(ne/=ge.data.length-ie),(de===void 0||B<=de)&&(Se===void 0||Se<ne)&&1.99<ne&&(de=B,me=U,Se=ne)}return{successful:!!(p.delimiter=me),bestDelimiter:me}})(Q,p.newline,p.skipEmptyLines,p.comments,p.delimitersToGuess)).successful?p.delimiter=le.bestDelimiter:(v=!0,p.delimiter=l.DefaultDelimiter),F.meta.delimiter=p.delimiter),O(p));return p.preview&&p.header&&le.preview++,d=Q,y=new D(le),F=y.parse(d,Z,fe),se(),X?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return X},this.pause=function(){X=!0,y.abort(),d=I(p.chunk)?"":d.substring(y.getCharIndex())},this.resume=function(){w.streamer._halted?(X=!1,w.streamer.parseChunk(d,!0)):setTimeout(w.resume,3)},this.aborted=function(){return N},this.abort=function(){N=!0,y.abort(),F.meta.aborted=!0,I(p.complete)&&p.complete(F),d=""},this.guessLineEndings=function(_e,le){_e=_e.substring(0,1048576);var le=new RegExp(V(le)+"([^]*?)"+V(le),"gm"),fe=(_e=_e.replace(le,"")).split("\r"),le=_e.split(`
`),_e=1<le.length&&le[0].length<fe[0].length;if(fe.length===1||_e)return`
`;for(var we=0,pe=0;pe<fe.length;pe++)fe[pe][0]===`
`&&we++;return we>=fe.length/2?`\r
`:"\r"}}function V(p){return p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function D(p){var d=(p=p||{}).delimiter,y=p.newline,v=p.comments,f=p.step,M=p.preview,_=p.fastMode,q=null,S=!1,w=p.quoteChar==null?'"':p.quoteChar,k=w;if(p.escapeChar!==void 0&&(k=p.escapeChar),(typeof d!="string"||-1<l.BAD_DELIMITERS.indexOf(d))&&(d=","),v===d)throw new Error("Comment character same as delimiter");v===!0?v="#":(typeof v!="string"||-1<l.BAD_DELIMITERS.indexOf(v))&&(v=!1),y!==`
`&&y!=="\r"&&y!==`\r
`&&(y=`
`);var E=0,X=!1;this.parse=function(N,P,F){if(typeof N!="string")throw new Error("Input must be a string");var ee=N.length,se=d.length,ae=y.length,ue=v.length,Q=I(f),Z=[],fe=[],le=[],_e=E=0;if(!N)return B();if(_||_!==!1&&N.indexOf(w)===-1){for(var we=N.split(y),pe=0;pe<we.length;pe++){if(le=we[pe],E+=le.length,pe!==we.length-1)E+=y.length;else if(F)return B();if(!v||le.substring(0,ue)!==v){if(Q){if(Z=[],Se(le.split(d)),ne(),X)return B()}else Se(le.split(d));if(M&&M<=pe)return Z=Z.slice(0,M),B(!0)}}return B()}for(var he=N.indexOf(d,E),J=N.indexOf(y,E),me=new RegExp(V(k)+V(w),"g"),de=N.indexOf(w,E);;)if(N[E]===w)for(de=E,E++;;){if((de=N.indexOf(w,de+1))===-1)return F||fe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Z.length,index:E}),$();if(de===ee-1)return $(N.substring(E,de).replace(me,w));if(w===k&&N[de+1]===k)de++;else if(w===k||de===0||N[de-1]!==k){he!==-1&&he<de+1&&(he=N.indexOf(d,de+1));var be=T((J=J!==-1&&J<de+1?N.indexOf(y,de+1):J)===-1?he:Math.min(he,J));if(N.substr(de+1+be,se)===d){le.push(N.substring(E,de).replace(me,w)),N[E=de+1+be+se]!==w&&(de=N.indexOf(w,E)),he=N.indexOf(d,E),J=N.indexOf(y,E);break}if(be=T(J),N.substring(de+1+be,de+1+be+ae)===y){if(le.push(N.substring(E,de).replace(me,w)),U(de+1+be+ae),he=N.indexOf(d,E),de=N.indexOf(w,E),Q&&(ne(),X))return B();if(M&&Z.length>=M)return B(!0);break}fe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Z.length,index:E}),de++}}else if(v&&le.length===0&&N.substring(E,E+ue)===v){if(J===-1)return B();E=J+ae,J=N.indexOf(y,E),he=N.indexOf(d,E)}else if(he!==-1&&(he<J||J===-1))le.push(N.substring(E,he)),E=he+se,he=N.indexOf(d,E);else{if(J===-1)break;if(le.push(N.substring(E,J)),U(J+ae),Q&&(ne(),X))return B();if(M&&Z.length>=M)return B(!0)}return $();function Se(ie){Z.push(ie),_e=E}function T(ie){var ge=0;return ge=ie!==-1&&(ie=N.substring(de+1,ie))&&ie.trim()===""?ie.length:ge}function $(ie){return F||(ie===void 0&&(ie=N.substring(E)),le.push(ie),E=ee,Se(le),Q&&ne()),B()}function U(ie){E=ie,Se(le),le=[],J=N.indexOf(y,E)}function B(ie){if(p.header&&!P&&Z.length&&!S){var ge=Z[0],ke={},ve=new Set(ge);let ce=!1;for(let Me=0;Me<ge.length;Me++){let Ce=ge[Me];if(ke[Ce=I(p.transformHeader)?p.transformHeader(Ce,Me):Ce]){let L,K=ke[Ce];for(;L=Ce+"_"+K,K++,ve.has(L););ve.add(L),ge[Me]=L,ke[Ce]++,ce=!0,(q=q===null?{}:q)[L]=Ce}else ke[Ce]=1,ge[Me]=Ce;ve.add(Ce)}ce&&console.warn("Duplicate headers found and renamed."),S=!0}return{data:Z,errors:fe,meta:{delimiter:d,linebreak:y,aborted:X,truncated:!!ie,cursor:_e+(P||0),renamedHeaders:q}}}function ne(){f(B()),Z=[],fe=[]}},this.abort=function(){X=!0},this.getCharIndex=function(){return E}}function j(p){var d=p.data,y=a[d.workerId],v=!1;if(d.error)y.userError(d.error,d.file);else if(d.results&&d.results.data){var f={abort:function(){v=!0,A(d.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:H,resume:H};if(I(y.userStep)){for(var M=0;M<d.results.data.length&&(y.userStep({data:d.results.data[M],errors:d.results.errors,meta:d.results.meta},f),!v);M++);delete d.results}else I(y.userChunk)&&(y.userChunk(d.results,f,d.file),delete d.results)}d.finished&&!v&&A(d.workerId,d.results)}function A(p,d){var y=a[p];I(y.userComplete)&&y.userComplete(d),y.terminate(),delete a[p]}function H(){throw new Error("Not implemented.")}function O(p){if(typeof p!="object"||p===null)return p;var d,y=Array.isArray(p)?[]:{};for(d in p)y[d]=O(p[d]);return y}function W(p,d){return function(){p.apply(d,arguments)}}function I(p){return typeof p=="function"}return l.parse=function(p,d){var y=(d=d||{}).dynamicTyping||!1;if(I(y)&&(d.dynamicTypingFunction=y,y={}),d.dynamicTyping=y,d.transform=!!I(d.transform)&&d.transform,!d.worker||!l.WORKERS_SUPPORTED)return y=null,l.NODE_STREAM_INPUT,typeof p=="string"?(p=(v=>v.charCodeAt(0)!==65279?v:v.slice(1))(p),y=new(d.download?m:g)(d)):p.readable===!0&&I(p.read)&&I(p.on)?y=new x(d):(r.File&&p instanceof File||p instanceof Object)&&(y=new h(d)),y.stream(p);(y=(()=>{var v;return!!l.WORKERS_SUPPORTED&&(v=(()=>{var f=r.URL||r.webkitURL||null,M=n.toString();return l.BLOB_URL||(l.BLOB_URL=f.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",M,")();"],{type:"text/javascript"})))})(),(v=new r.Worker(v)).onmessage=j,v.id=u++,a[v.id]=v)})()).userStep=d.step,y.userChunk=d.chunk,y.userComplete=d.complete,y.userError=d.error,d.step=I(d.step),d.chunk=I(d.chunk),d.complete=I(d.complete),d.error=I(d.error),delete d.worker,y.postMessage({input:p,config:d,workerId:y.id})},l.unparse=function(p,d){var y=!1,v=!0,f=",",M=`\r
`,_='"',q=_+_,S=!1,w=null,k=!1,E=((()=>{if(typeof d=="object"){if(typeof d.delimiter!="string"||l.BAD_DELIMITERS.filter(function(P){return d.delimiter.indexOf(P)!==-1}).length||(f=d.delimiter),typeof d.quotes!="boolean"&&typeof d.quotes!="function"&&!Array.isArray(d.quotes)||(y=d.quotes),typeof d.skipEmptyLines!="boolean"&&typeof d.skipEmptyLines!="string"||(S=d.skipEmptyLines),typeof d.newline=="string"&&(M=d.newline),typeof d.quoteChar=="string"&&(_=d.quoteChar),typeof d.header=="boolean"&&(v=d.header),Array.isArray(d.columns)){if(d.columns.length===0)throw new Error("Option columns is empty");w=d.columns}d.escapeChar!==void 0&&(q=d.escapeChar+_),d.escapeFormulae instanceof RegExp?k=d.escapeFormulae:typeof d.escapeFormulae=="boolean"&&d.escapeFormulae&&(k=/^[=+\-@\t\r].*$/)}})(),new RegExp(V(_),"g"));if(typeof p=="string"&&(p=JSON.parse(p)),Array.isArray(p)){if(!p.length||Array.isArray(p[0]))return X(null,p,S);if(typeof p[0]=="object")return X(w||Object.keys(p[0]),p,S)}else if(typeof p=="object")return typeof p.data=="string"&&(p.data=JSON.parse(p.data)),Array.isArray(p.data)&&(p.fields||(p.fields=p.meta&&p.meta.fields||w),p.fields||(p.fields=Array.isArray(p.data[0])?p.fields:typeof p.data[0]=="object"?Object.keys(p.data[0]):[]),Array.isArray(p.data[0])||typeof p.data[0]=="object"||(p.data=[p.data])),X(p.fields||[],p.data||[],S);throw new Error("Unable to serialize unrecognized input");function X(P,F,ee){var se="",ae=(typeof P=="string"&&(P=JSON.parse(P)),typeof F=="string"&&(F=JSON.parse(F)),Array.isArray(P)&&0<P.length),ue=!Array.isArray(F[0]);if(ae&&v){for(var Q=0;Q<P.length;Q++)0<Q&&(se+=f),se+=N(P[Q],Q);0<F.length&&(se+=M)}for(var Z=0;Z<F.length;Z++){var fe=(ae?P:F[Z]).length,le=!1,_e=ae?Object.keys(F[Z]).length===0:F[Z].length===0;if(ee&&!ae&&(le=ee==="greedy"?F[Z].join("").trim()==="":F[Z].length===1&&F[Z][0].length===0),ee==="greedy"&&ae){for(var we=[],pe=0;pe<fe;pe++){var he=ue?P[pe]:pe;we.push(F[Z][he])}le=we.join("").trim()===""}if(!le){for(var J=0;J<fe;J++){0<J&&!_e&&(se+=f);var me=ae&&ue?P[J]:J;se+=N(F[Z][me],J)}Z<F.length-1&&(!ee||0<fe&&!_e)&&(se+=M)}}return se}function N(P,F){var ee,se;return P==null?"":P.constructor===Date?JSON.stringify(P).slice(1,25):(se=!1,k&&typeof P=="string"&&k.test(P)&&(P="'"+P,se=!0),ee=P.toString().replace(E,q),(se=se||y===!0||typeof y=="function"&&y(P,F)||Array.isArray(y)&&y[F]||((ae,ue)=>{for(var Q=0;Q<ue.length;Q++)if(-1<ae.indexOf(ue[Q]))return!0;return!1})(ee,l.BAD_DELIMITERS)||-1<ee.indexOf(f)||ee.charAt(0)===" "||ee.charAt(ee.length-1)===" ")?_+ee+_:ee)}},l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!s&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=D,l.ParserHandle=R,l.NetworkStreamer=m,l.FileStreamer=h,l.StringStreamer=g,l.ReadableStreamStreamer=x,r.jQuery&&((i=r.jQuery).fn.parse=function(p){var d=p.config||{},y=[];return this.each(function(M){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var _=0;_<this.files.length;_++)y.push({file:this.files[_],inputElem:this,instanceConfig:i.extend({},d)})}),v(),this;function v(){if(y.length===0)I(p.complete)&&p.complete();else{var M,_,q,S,w=y[0];if(I(p.before)){var k=p.before(w.file,w.inputElem);if(typeof k=="object"){if(k.action==="abort")return M="AbortError",_=w.file,q=w.inputElem,S=k.reason,void(I(p.error)&&p.error({name:M},_,q,S));if(k.action==="skip")return void f();typeof k.config=="object"&&(w.instanceConfig=i.extend(w.instanceConfig,k.config))}else if(k==="skip")return void f()}var E=w.instanceConfig.complete;w.instanceConfig.complete=function(X){I(E)&&E(X,w.file,w.inputElem),f()},l.parse(w.file,w.instanceConfig)}}function f(){y.splice(0,1),v()}}),o&&(r.onmessage=function(p){p=p.data,l.WORKER_ID===void 0&&p&&(l.WORKER_ID=p.workerId),typeof p.input=="string"?r.postMessage({workerId:l.WORKER_ID,results:l.parse(p.input,p.config),finished:!0}):(r.File&&p.input instanceof File||p.input instanceof Object)&&(p=l.parse(p.input,p.config))&&r.postMessage({workerId:l.WORKER_ID,results:p,finished:!0})}),(m.prototype=Object.create(c.prototype)).constructor=m,(h.prototype=Object.create(c.prototype)).constructor=h,(g.prototype=Object.create(g.prototype)).constructor=g,(x.prototype=Object.create(c.prototype)).constructor=x,l})})(Jr);const Xi=Jr.exports;function Xt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ui(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $r(e){let t,n,r;e.length!==2?(t=Xt,n=(a,u)=>Xt(e(a),u),r=(a,u)=>e(a)-u):(t=e===Xt||e===Ui?e:Yi,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const m=l+c>>>1;n(a[m],u)<0?l=m+1:c=m}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const m=l+c>>>1;n(a[m],u)<=0?l=m+1:c=m}while(l<c)}return l}function o(a,u,l=0,c=a.length){const m=i(a,u,l,c-1);return m>l&&r(a[m-1],u)>-r(a[m],u)?m-1:m}return{left:i,center:o,right:s}}function Yi(){return 0}function Wi(e){return e===null?NaN:+e}const Ki=$r(Xt),Qi=Ki.right;$r(Wi).center;const ji=Qi;class er extends Map{constructor(t,n=Ji){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(tr(this,t))}has(t){return super.has(tr(this,t))}set(t,n){return super.set(Gi(this,t),n)}delete(t){return super.delete(Zi(this,t))}}function tr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Gi({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Zi({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Ji(e){return e!==null&&typeof e=="object"?e.valueOf():e}var Sn=Math.sqrt(50),Mn=Math.sqrt(10),En=Math.sqrt(2);function $i(e,t,n){var r,i=-1,s,o,a;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(s=e,e=t,t=s),(a=ei(e,t,n))===0||!isFinite(a))return[];if(a>0){let u=Math.round(e/a),l=Math.round(t/a);for(u*a<e&&++u,l*a>t&&--l,o=new Array(s=l-u+1);++i<s;)o[i]=(u+i)*a}else{a=-a;let u=Math.round(e*a),l=Math.round(t*a);for(u/a<e&&++u,l/a>t&&--l,o=new Array(s=l-u+1);++i<s;)o[i]=(u+i)/a}return r&&o.reverse(),o}function ei(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=Sn?10:s>=Mn?5:s>=En?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=Sn?10:s>=Mn?5:s>=En?2:1)}function es(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=Sn?i*=10:s>=Mn?i*=5:s>=En&&(i*=2),t<e?-i:i}function nr(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function rr(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function ti(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const ir=Symbol("implicit");function Bn(){var e=new er,t=[],n=[],r=ir;function i(s){let o=e.get(s);if(o===void 0){if(r!==ir)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new er;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Bn(t,n).unknown(r)},ti.apply(i,arguments),i}function Hn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ni(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Rt(){}var At=.7,Zt=1/At,gt="\\s*([+-]?\\d+)\\s*",Dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",We="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ts=/^#([0-9a-f]{3,8})$/,ns=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),rs=new RegExp(`^rgb\\(${We},${We},${We}\\)$`),is=new RegExp(`^rgba\\(${gt},${gt},${gt},${Dt}\\)$`),ss=new RegExp(`^rgba\\(${We},${We},${We},${Dt}\\)$`),os=new RegExp(`^hsl\\(${Dt},${We},${We}\\)$`),ls=new RegExp(`^hsla\\(${Dt},${We},${We},${Dt}\\)$`),sr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hn(Rt,ut,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:or,formatHex:or,formatHex8:as,formatHsl:us,formatRgb:lr,toString:lr});function or(){return this.rgb().formatHex()}function as(){return this.rgb().formatHex8()}function us(){return ri(this).formatHsl()}function lr(){return this.rgb().formatRgb()}function ut(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ts.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ar(t):n===3?new Ie(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?zt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?zt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ns.exec(e))?new Ie(t[1],t[2],t[3],1):(t=rs.exec(e))?new Ie(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=is.exec(e))?zt(t[1],t[2],t[3],t[4]):(t=ss.exec(e))?zt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=os.exec(e))?fr(t[1],t[2]/100,t[3]/100,1):(t=ls.exec(e))?fr(t[1],t[2]/100,t[3]/100,t[4]):sr.hasOwnProperty(e)?ar(sr[e]):e==="transparent"?new Ie(NaN,NaN,NaN,0):null}function ar(e){return new Ie(e>>16&255,e>>8&255,e&255,1)}function zt(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ie(e,t,n,r)}function cs(e){return e instanceof Rt||(e=ut(e)),e?(e=e.rgb(),new Ie(e.r,e.g,e.b,e.opacity)):new Ie}function Cn(e,t,n,r){return arguments.length===1?cs(e):new Ie(e,t,n,r==null?1:r)}function Ie(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Hn(Ie,Cn,ni(Rt,{brighter(e){return e=e==null?Zt:Math.pow(Zt,e),new Ie(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new Ie(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ie(at(this.r),at(this.g),at(this.b),Jt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ur,formatHex:ur,formatHex8:fs,formatRgb:cr,toString:cr}));function ur(){return`#${lt(this.r)}${lt(this.g)}${lt(this.b)}`}function fs(){return`#${lt(this.r)}${lt(this.g)}${lt(this.b)}${lt((isNaN(this.opacity)?1:this.opacity)*255)}`}function cr(){const e=Jt(this.opacity);return`${e===1?"rgb(":"rgba("}${at(this.r)}, ${at(this.g)}, ${at(this.b)}${e===1?")":`, ${e})`}`}function Jt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function at(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function lt(e){return e=at(e),(e<16?"0":"")+e.toString(16)}function fr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new He(e,t,n,r)}function ri(e){if(e instanceof He)return new He(e.h,e.s,e.l,e.opacity);if(e instanceof Rt||(e=ut(e)),!e)return new He;if(e instanceof He)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new He(o,a,u,e.opacity)}function hs(e,t,n,r){return arguments.length===1?ri(e):new He(e,t,n,r==null?1:r)}function He(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hn(He,hs,ni(Rt,{brighter(e){return e=e==null?Zt:Math.pow(Zt,e),new He(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new He(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ie(wn(e>=240?e-240:e+120,i,r),wn(e,i,r),wn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new He(hr(this.h),Ot(this.s),Ot(this.l),Jt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Jt(this.opacity);return`${e===1?"hsl(":"hsla("}${hr(this.h)}, ${Ot(this.s)*100}%, ${Ot(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hr(e){return e=(e||0)%360,e<0?e+360:e}function Ot(e){return Math.max(0,Math.min(1,e||0))}function wn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xn=e=>()=>e;function ds(e,t){return function(n){return e+n*t}}function ps(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ms(e){return(e=+e)==1?ii:function(t,n){return n-t?ps(t,n,e):Xn(isNaN(t)?n:t)}}function ii(e,t){var n=t-e;return n?ds(e,n):Xn(isNaN(e)?t:e)}const $t=function e(t){var n=ms(t);function r(i,s){var o=n((i=Cn(i)).r,(s=Cn(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=ii(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function gs(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function _s(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ys(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Un(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function ws(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Be(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vs(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Un(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var An=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vn=new RegExp(An.source,"g");function bs(e){return function(){return e}}function ks(e){return function(t){return e(t)+""}}function si(e,t){var n=An.lastIndex=vn.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=An.exec(e))&&(i=vn.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Be(r,i)})),n=vn.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?ks(u[0].x):bs(t):(t=u.length,function(l){for(var c=0,m;c<t;++c)a[(m=u[c]).i]=m.x(l);return a.join("")})}function Un(e,t){var n=typeof t,r;return t==null||n==="boolean"?Xn(t):(n==="number"?Be:n==="string"?(r=ut(t))?(t=r,$t):si:t instanceof ut?$t:t instanceof Date?ws:_s(t)?gs:Array.isArray(t)?ys:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?vs:Be)(e,t)}function xs(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var dr=180/Math.PI,Dn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oi(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*dr,skewX:Math.atan(u)*dr,scaleX:o,scaleY:a}}var Pt;function Ss(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Dn:oi(t.a,t.b,t.c,t.d,t.e,t.f)}function Ms(e){return e==null||(Pt||(Pt=document.createElementNS("http://www.w3.org/2000/svg","g")),Pt.setAttribute("transform",e),!(e=Pt.transform.baseVal.consolidate()))?Dn:(e=e.matrix,oi(e.a,e.b,e.c,e.d,e.e,e.f))}function li(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,m,h,g,x){if(l!==m||c!==h){var R=g.push("translate(",null,t,null,n);x.push({i:R-4,x:Be(l,m)},{i:R-2,x:Be(c,h)})}else(m||h)&&g.push("translate("+m+t+h+n)}function o(l,c,m,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:m.push(i(m)+"rotate(",null,r)-2,x:Be(l,c)})):c&&m.push(i(m)+"rotate("+c+r)}function a(l,c,m,h){l!==c?h.push({i:m.push(i(m)+"skewX(",null,r)-2,x:Be(l,c)}):c&&m.push(i(m)+"skewX("+c+r)}function u(l,c,m,h,g,x){if(l!==m||c!==h){var R=g.push(i(g)+"scale(",null,",",null,")");x.push({i:R-4,x:Be(l,m)},{i:R-2,x:Be(c,h)})}else(m!==1||h!==1)&&g.push(i(g)+"scale("+m+","+h+")")}return function(l,c){var m=[],h=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,m,h),o(l.rotate,c.rotate,m,h),a(l.skewX,c.skewX,m,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,m,h),l=c=null,function(g){for(var x=-1,R=h.length,V;++x<R;)m[(V=h[x]).i]=V.x(g);return m.join("")}}}var Es=li(Ss,"px, ","px)","deg)"),Cs=li(Ms,", ",")",")"),As=1e-12;function pr(e){return((e=Math.exp(e))+1/e)/2}function Ds(e){return((e=Math.exp(e))-1/e)/2}function Ts(e){return((e=Math.exp(2*e))-1)/(e+1)}const Rs=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],m=o[1],h=o[2],g=c-a,x=m-u,R=g*g+x*x,V,D;if(R<As)D=Math.log(h/l)/t,V=function(I){return[a+I*g,u+I*x,l*Math.exp(t*I*D)]};else{var j=Math.sqrt(R),A=(h*h-l*l+r*R)/(2*l*n*j),H=(h*h-l*l-r*R)/(2*h*n*j),O=Math.log(Math.sqrt(A*A+1)-A),W=Math.log(Math.sqrt(H*H+1)-H);D=(W-O)/t,V=function(I){var p=I*D,d=pr(O),y=l/(n*j)*(d*Ts(t*p+O)-Ds(O));return[a+y*g,u+y*x,l*d/pr(t*p+O)]}}return V.duration=D*1e3*t/Math.SQRT2,V}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function qs(e){return function(){return e}}function Ns(e){return+e}var mr=[0,1];function dt(e){return e}function Tn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:qs(isNaN(t)?NaN:.5)}function Ls(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Is(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=Tn(i,r),s=n(o,s)):(r=Tn(r,i),s=n(s,o)),function(a){return s(r(a))}}function zs(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Tn(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=ji(e,a,1,r)-1;return s[u](i[u](a))}}function Os(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ps(){var e=mr,t=mr,n=Un,r,i,s,o=dt,a,u,l;function c(){var h=Math.min(e.length,t.length);return o!==dt&&(o=Ls(e[0],e[h-1])),a=h>2?zs:Is,u=l=null,m}function m(h){return h==null||isNaN(h=+h)?s:(u||(u=a(e.map(r),t,n)))(r(o(h)))}return m.invert=function(h){return o(i((l||(l=a(t,e.map(r),Be)))(h)))},m.domain=function(h){return arguments.length?(e=Array.from(h,Ns),c()):e.slice()},m.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},m.rangeRound=function(h){return t=Array.from(h),n=xs,c()},m.clamp=function(h){return arguments.length?(o=h?!0:dt,c()):o!==dt},m.interpolate=function(h){return arguments.length?(n=h,c()):n},m.unknown=function(h){return arguments.length?(s=h,m):s},function(h,g){return r=h,i=g,c()}}function Fs(){return Ps()(dt,dt)}function Vs(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function en(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function _t(e){return e=en(Math.abs(e)),e?e[1]:NaN}function Bs(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Hs(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Xs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tn(e){if(!(t=Xs.exec(e)))throw new Error("invalid format: "+e);var t;return new Yn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}tn.prototype=Yn.prototype;function Yn(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Yn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Us(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ai;function Ys(e,t){var n=en(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(ai=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+en(e,Math.max(0,t+s-1))[0]}function gr(e,t){var n=en(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _r={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Vs,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gr(e*100,t),r:gr,s:Ys,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yr(e){return e}var wr=Array.prototype.map,vr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Ws(e){var t=e.grouping===void 0||e.thousands===void 0?yr:Bs(wr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?yr:Hs(wr.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"\u2212":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(m){m=tn(m);var h=m.fill,g=m.align,x=m.sign,R=m.symbol,V=m.zero,D=m.width,j=m.comma,A=m.precision,H=m.trim,O=m.type;O==="n"?(j=!0,O="g"):_r[O]||(A===void 0&&(A=12),H=!0,O="g"),(V||h==="0"&&g==="=")&&(V=!0,h="0",g="=");var W=R==="$"?n:R==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",I=R==="$"?r:/[%p]/.test(O)?o:"",p=_r[O],d=/[defgprs%]/.test(O);A=A===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function y(v){var f=W,M=I,_,q,S;if(O==="c")M=p(v)+M,v="";else{v=+v;var w=v<0||1/v<0;if(v=isNaN(v)?u:p(Math.abs(v),A),H&&(v=Us(v)),w&&+v==0&&x!=="+"&&(w=!1),f=(w?x==="("?x:a:x==="-"||x==="("?"":x)+f,M=(O==="s"?vr[8+ai/3]:"")+M+(w&&x==="("?")":""),d){for(_=-1,q=v.length;++_<q;)if(S=v.charCodeAt(_),48>S||S>57){M=(S===46?i+v.slice(_+1):v.slice(_))+M,v=v.slice(0,_);break}}}j&&!V&&(v=t(v,1/0));var k=f.length+v.length+M.length,E=k<D?new Array(D-k+1).join(h):"";switch(j&&V&&(v=t(E+v,E.length?D-M.length:1/0),E=""),g){case"<":v=f+v+M+E;break;case"=":v=f+E+v+M;break;case"^":v=E.slice(0,k=E.length>>1)+f+v+M+E.slice(k);break;default:v=E+f+v+M;break}return s(v)}return y.toString=function(){return m+""},y}function c(m,h){var g=l((m=tn(m),m.type="f",m)),x=Math.max(-8,Math.min(8,Math.floor(_t(h)/3)))*3,R=Math.pow(10,-x),V=vr[8+x/3];return function(D){return g(R*D)+V}}return{format:l,formatPrefix:c}}var Ft,ui,ci;Ks({thousands:",",grouping:[3],currency:["$",""]});function Ks(e){return Ft=Ws(e),ui=Ft.format,ci=Ft.formatPrefix,Ft}function Qs(e){return Math.max(0,-_t(Math.abs(e)))}function js(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_t(t)/3)))*3-_t(Math.abs(e)))}function Gs(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_t(t)-_t(e))+1}function Zs(e,t,n,r){var i=es(e,t,n),s;switch(r=tn(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=js(i,o))&&(r.precision=s),ci(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Gs(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Qs(i))&&(r.precision=s-(r.type==="%")*2);break}}return ui(r)}function Js(e){var t=e.domain;return e.ticks=function(n){var r=t();return $i(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return Zs(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=ei(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Rn(){var e=Fs();return e.copy=function(){return Os(e,Rn())},ti.apply(e,arguments),Js(e)}function $s(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const fi=$s("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var eo={value:()=>{}};function Wn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ut(n)}function Ut(e){this._=e}function to(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ut.prototype=Wn.prototype={constructor:Ut,on:function(e,t){var n=this._,r=to(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=no(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=br(n[i],e.name,t);else if(t==null)for(i in n)n[i]=br(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ut(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function no(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function br(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=eo,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var qn="http://www.w3.org/1999/xhtml";const kr={svg:"http://www.w3.org/2000/svg",xhtml:qn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),kr.hasOwnProperty(t)?{space:kr[t],local:e}:e}function ro(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===qn&&t.documentElement.namespaceURI===qn?t.createElement(e):t.createElementNS(n,e)}}function io(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hi(e){var t=dn(e);return(t.local?io:ro)(t)}function so(){}function Kn(e){return e==null?so:function(){return this.querySelector(e)}}function oo(e){typeof e!="function"&&(e=Kn(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Oe(r,this._parents)}function lo(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ao(){return[]}function di(e){return e==null?ao:function(){return this.querySelectorAll(e)}}function uo(e){return function(){return lo(e.apply(this,arguments))}}function co(e){typeof e=="function"?e=uo(e):e=di(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Oe(r,i)}function pi(e){return function(){return this.matches(e)}}function mi(e){return function(t){return t.matches(e)}}var fo=Array.prototype.find;function ho(e){return function(){return fo.call(this.children,e)}}function po(){return this.firstElementChild}function mo(e){return this.select(e==null?po:ho(typeof e=="function"?e:mi(e)))}var go=Array.prototype.filter;function _o(){return Array.from(this.children)}function yo(e){return function(){return go.call(this.children,e)}}function wo(e){return this.selectAll(e==null?_o:yo(typeof e=="function"?e:mi(e)))}function vo(e){typeof e!="function"&&(e=pi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Oe(r,this._parents)}function gi(e){return new Array(e.length)}function bo(){return new Oe(this._enter||this._groups.map(gi),this._parents)}function nn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}nn.prototype={constructor:nn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ko(e){return function(){return e}}function xo(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new nn(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function So(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,m=s.length,h=new Array(c),g;for(a=0;a<c;++a)(u=t[a])&&(h[a]=g=o.call(u,u.__data__,a,t)+"",l.has(g)?i[a]=u:l.set(g,u));for(a=0;a<m;++a)g=o.call(e,s[a],a,s)+"",(u=l.get(g))?(r[a]=u,u.__data__=s[a],l.delete(g)):n[a]=new nn(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(h[a])===u&&(i[a]=u)}function Mo(e){return e.__data__}function Eo(e,t){if(!arguments.length)return Array.from(this,Mo);var n=t?So:xo,r=this._parents,i=this._groups;typeof e!="function"&&(e=ko(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],m=i[l],h=m.length,g=Co(e.call(c,c&&c.__data__,l,r)),x=g.length,R=a[l]=new Array(x),V=o[l]=new Array(x),D=u[l]=new Array(h);n(c,m,R,V,D,g,t);for(var j=0,A=0,H,O;j<x;++j)if(H=R[j]){for(j>=A&&(A=j+1);!(O=V[A])&&++A<x;);H._next=O||null}}return o=new Oe(o,r),o._enter=a,o._exit=u,o}function Co(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ao(){return new Oe(this._exit||this._groups.map(gi),this._parents)}function Do(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function To(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],m=l.length,h=a[u]=new Array(m),g,x=0;x<m;++x)(g=l[x]||c[x])&&(h[x]=g);for(;u<i;++u)a[u]=n[u];return new Oe(a,this._parents)}function Ro(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function qo(e){e||(e=No);function t(m,h){return m&&h?e(m.__data__,h.__data__):!m-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Oe(i,this._parents).order()}function No(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Lo(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Io(){return Array.from(this)}function zo(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Oo(){let e=0;for(const t of this)++e;return e}function Po(){return!this.node()}function Fo(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Vo(e){return function(){this.removeAttribute(e)}}function Bo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ho(e,t){return function(){this.setAttribute(e,t)}}function Xo(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Uo(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Yo(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Wo(e,t){var n=dn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Bo:Vo:typeof t=="function"?n.local?Yo:Uo:n.local?Xo:Ho)(n,t))}function _i(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ko(e){return function(){this.style.removeProperty(e)}}function Qo(e,t,n){return function(){this.style.setProperty(e,t,n)}}function jo(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Go(e,t,n){return arguments.length>1?this.each((t==null?Ko:typeof t=="function"?jo:Qo)(e,t,n==null?"":n)):yt(this.node(),e)}function yt(e,t){return e.style.getPropertyValue(t)||_i(e).getComputedStyle(e,null).getPropertyValue(t)}function Zo(e){return function(){delete this[e]}}function Jo(e,t){return function(){this[e]=t}}function $o(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function el(e,t){return arguments.length>1?this.each((t==null?Zo:typeof t=="function"?$o:Jo)(e,t)):this.node()[e]}function yi(e){return e.trim().split(/^|\s+/)}function Qn(e){return e.classList||new wi(e)}function wi(e){this._node=e,this._names=yi(e.getAttribute("class")||"")}wi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function vi(e,t){for(var n=Qn(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function bi(e,t){for(var n=Qn(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function tl(e){return function(){vi(this,e)}}function nl(e){return function(){bi(this,e)}}function rl(e,t){return function(){(t.apply(this,arguments)?vi:bi)(this,e)}}function il(e,t){var n=yi(e+"");if(arguments.length<2){for(var r=Qn(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?rl:t?tl:nl)(n,t))}function sl(){this.textContent=""}function ol(e){return function(){this.textContent=e}}function ll(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function al(e){return arguments.length?this.each(e==null?sl:(typeof e=="function"?ll:ol)(e)):this.node().textContent}function ul(){this.innerHTML=""}function cl(e){return function(){this.innerHTML=e}}function fl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function hl(e){return arguments.length?this.each(e==null?ul:(typeof e=="function"?fl:cl)(e)):this.node().innerHTML}function dl(){this.nextSibling&&this.parentNode.appendChild(this)}function pl(){return this.each(dl)}function ml(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gl(){return this.each(ml)}function _l(e){var t=typeof e=="function"?e:hi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function yl(){return null}function wl(e,t){var n=typeof e=="function"?e:hi(e),r=t==null?yl:typeof t=="function"?t:Kn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function vl(){var e=this.parentNode;e&&e.removeChild(this)}function bl(){return this.each(vl)}function kl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sl(e){return this.select(e?xl:kl)}function Ml(e){return arguments.length?this.property("__data__",e):this.node().__data__}function El(e){return function(t){e.call(this,t,this.__data__)}}function Cl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Al(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Dl(e,t,n){return function(){var r=this.__on,i,s=El(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Tl(e,t,n){var r=Cl(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Dl:Al,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function ki(e,t,n){var r=_i(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Rl(e,t){return function(){return ki(this,e,t)}}function ql(e,t){return function(){return ki(this,e,t.apply(this,arguments))}}function Nl(e,t){return this.each((typeof t=="function"?ql:Rl)(e,t))}function*Ll(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var xi=[null];function Oe(e,t){this._groups=e,this._parents=t}function qt(){return new Oe([[document.documentElement]],xi)}function Il(){return this}Oe.prototype=qt.prototype={constructor:Oe,select:oo,selectAll:co,selectChild:mo,selectChildren:wo,filter:vo,data:Eo,enter:bo,exit:Ao,join:Do,merge:To,selection:Il,order:Ro,sort:qo,call:Lo,nodes:Io,node:zo,size:Oo,empty:Po,each:Fo,attr:Wo,style:Go,property:el,classed:il,text:al,html:hl,raise:pl,lower:gl,append:_l,insert:wl,remove:bl,clone:Sl,datum:Ml,on:Tl,dispatch:Nl,[Symbol.iterator]:Ll};function it(e){return typeof e=="string"?new Oe([[document.querySelector(e)]],[document.documentElement]):new Oe([[e]],xi)}function zl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function st(e,t){if(e=zl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Nn={capture:!0,passive:!1};function Ln(e){e.preventDefault(),e.stopImmediatePropagation()}function Ol(e){var t=e.document.documentElement,n=it(e).on("dragstart.drag",Ln,Nn);"onselectstart"in t?n.on("selectstart.drag",Ln,Nn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Pl(e,t){var n=e.document.documentElement,r=it(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ln,Nn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var wt=0,xt=0,vt=0,Si=1e3,rn,St,sn=0,ct=0,pn=0,Tt=typeof performance=="object"&&performance.now?performance:Date,Mi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jn(){return ct||(Mi(Fl),ct=Tt.now()+pn)}function Fl(){ct=0}function on(){this._call=this._time=this._next=null}on.prototype=Ei.prototype={constructor:on,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jn():+n)+(t==null?0:+t),!this._next&&St!==this&&(St?St._next=this:rn=this,St=this),this._call=e,this._time=n,In()},stop:function(){this._call&&(this._call=null,this._time=1/0,In())}};function Ei(e,t,n){var r=new on;return r.restart(e,t,n),r}function Vl(){jn(),++wt;for(var e=rn,t;e;)(t=ct-e._time)>=0&&e._call.call(void 0,t),e=e._next;--wt}function xr(){ct=(sn=Tt.now())+pn,wt=xt=0;try{Vl()}finally{wt=0,Hl(),ct=0}}function Bl(){var e=Tt.now(),t=e-sn;t>Si&&(pn-=t,sn=e)}function Hl(){for(var e,t=rn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:rn=n);St=e,In(r)}function In(e){if(!wt){xt&&(xt=clearTimeout(xt));var t=e-ct;t>24?(e<1/0&&(xt=setTimeout(xr,e-Tt.now()-pn)),vt&&(vt=clearInterval(vt))):(vt||(sn=Tt.now(),vt=setInterval(Bl,Si)),wt=1,Mi(xr))}}function Sr(e,t,n){var r=new on;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Xl=Wn("start","end","cancel","interrupt"),Ul=[],Ci=0,Mr=1,zn=2,Yt=3,Er=4,On=5,Wt=6;function mn(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Yl(e,n,{name:t,index:r,group:i,on:Xl,tween:Ul,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ci})}function Gn(e,t){var n=Ue(e,t);if(n.state>Ci)throw new Error("too late; already scheduled");return n}function Ke(e,t){var n=Ue(e,t);if(n.state>Yt)throw new Error("too late; already running");return n}function Ue(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Yl(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ei(s,0,n.time);function s(l){n.state=Mr,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,m,h,g;if(n.state!==Mr)return u();for(c in r)if(g=r[c],g.name===n.name){if(g.state===Yt)return Sr(o);g.state===Er?(g.state=Wt,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[c]):+c<t&&(g.state=Wt,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[c])}if(Sr(function(){n.state===Yt&&(n.state=Er,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=zn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===zn){for(n.state=Yt,i=new Array(h=n.tween.length),c=0,m=-1;c<h;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++m]=g);i.length=m+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=On,1),m=-1,h=i.length;++m<h;)i[m].call(e,c);n.state===On&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Wt,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Kt(e,t){var n=e.__transition,r,i,s=!0,o;if(!!n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>zn&&r.state<On,r.state=Wt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Wl(e){return this.each(function(){Kt(this,e)})}function Kl(e,t){var n,r;return function(){var i=Ke(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Ql(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ke(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function jl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ue(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Kl:Ql)(n,e,t))}function Zn(e,t,n){var r=e._id;return e.each(function(){var i=Ke(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ue(i,r).value[t]}}function Ai(e,t){var n;return(typeof t=="number"?Be:t instanceof ut?$t:(n=ut(t))?(t=n,$t):si)(e,t)}function Gl(e){return function(){this.removeAttribute(e)}}function Zl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Jl(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function $l(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function ea(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function ta(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function na(e,t){var n=dn(e),r=n==="transform"?Cs:Ai;return this.attrTween(e,typeof t=="function"?(n.local?ta:ea)(n,r,Zn(this,"attr."+e,t)):t==null?(n.local?Zl:Gl)(n):(n.local?$l:Jl)(n,r,t))}function ra(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ia(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function sa(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ia(e,s)),n}return i._value=t,i}function oa(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ra(e,s)),n}return i._value=t,i}function la(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=dn(e);return this.tween(n,(r.local?sa:oa)(r,t))}function aa(e,t){return function(){Gn(this,e).delay=+t.apply(this,arguments)}}function ua(e,t){return t=+t,function(){Gn(this,e).delay=t}}function ca(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?aa:ua)(t,e)):Ue(this.node(),t).delay}function fa(e,t){return function(){Ke(this,e).duration=+t.apply(this,arguments)}}function ha(e,t){return t=+t,function(){Ke(this,e).duration=t}}function da(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fa:ha)(t,e)):Ue(this.node(),t).duration}function pa(e,t){if(typeof t!="function")throw new Error;return function(){Ke(this,e).ease=t}}function ma(e){var t=this._id;return arguments.length?this.each(pa(t,e)):Ue(this.node(),t).ease}function ga(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ke(this,e).ease=n}}function _a(e){if(typeof e!="function")throw new Error;return this.each(ga(this._id,e))}function ya(e){typeof e!="function"&&(e=pi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Je(r,this._parents,this._name,this._id)}function wa(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,m=o[a]=new Array(c),h,g=0;g<c;++g)(h=u[g]||l[g])&&(m[g]=h);for(;a<r;++a)o[a]=t[a];return new Je(o,this._parents,this._name,this._id)}function va(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ba(e,t,n){var r,i,s=va(t)?Gn:Ke;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function ka(e,t){var n=this._id;return arguments.length<2?Ue(this.node(),n).on.on(e):this.each(ba(n,e,t))}function xa(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Sa(){return this.on("end.remove",xa(this._id))}function Ma(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Kn(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,m,h=0;h<u;++h)(c=a[h])&&(m=e.call(c,c.__data__,h,a))&&("__data__"in c&&(m.__data__=c.__data__),l[h]=m,mn(l[h],t,n,h,l,Ue(c,n)));return new Je(s,this._parents,t,n)}function Ea(e){var t=this._name,n=this._id;typeof e!="function"&&(e=di(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,m=0;m<l;++m)if(c=u[m]){for(var h=e.call(c,c.__data__,m,u),g,x=Ue(c,n),R=0,V=h.length;R<V;++R)(g=h[R])&&mn(g,t,n,R,h,x);s.push(h),o.push(c)}return new Je(s,o,t,n)}var Ca=qt.prototype.constructor;function Aa(){return new Ca(this._groups,this._parents)}function Da(e,t){var n,r,i;return function(){var s=yt(this,e),o=(this.style.removeProperty(e),yt(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Di(e){return function(){this.style.removeProperty(e)}}function Ta(e,t,n){var r,i=n+"",s;return function(){var o=yt(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Ra(e,t,n){var r,i,s;return function(){var o=yt(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),yt(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function qa(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Ke(this,e),l=u.on,c=u.value[s]==null?a||(a=Di(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Na(e,t,n){var r=(e+="")=="transform"?Es:Ai;return t==null?this.styleTween(e,Da(e,r)).on("end.style."+e,Di(e)):typeof t=="function"?this.styleTween(e,Ra(e,r,Zn(this,"style."+e,t))).each(qa(this._id,e)):this.styleTween(e,Ta(e,r,t),n).on("end.style."+e,null)}function La(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ia(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&La(e,o,n)),r}return s._value=t,s}function za(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ia(e,t,n==null?"":n))}function Oa(e){return function(){this.textContent=e}}function Pa(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Fa(e){return this.tween("text",typeof e=="function"?Pa(Zn(this,"text",e)):Oa(e==null?"":e+""))}function Va(e){return function(t){this.textContent=e.call(this,t)}}function Ba(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Va(i)),t}return r._value=e,r}function Ha(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ba(e))}function Xa(){for(var e=this._name,t=this._id,n=Ti(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Ue(u,t);mn(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Je(r,this._parents,e,n)}function Ua(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Ke(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Ya=0;function Je(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ti(){return++Ya}var je=qt.prototype;Je.prototype={constructor:Je,select:Ma,selectAll:Ea,selectChild:je.selectChild,selectChildren:je.selectChildren,filter:ya,merge:wa,selection:Aa,transition:Xa,call:je.call,nodes:je.nodes,node:je.node,size:je.size,empty:je.empty,each:je.each,on:ka,attr:na,attrTween:la,style:Na,styleTween:za,text:Fa,textTween:Ha,remove:Sa,tween:jl,delay:ca,duration:da,ease:ma,easeVarying:_a,end:Ua,[Symbol.iterator]:je[Symbol.iterator]};function Wa(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ka={time:null,delay:0,duration:250,ease:Wa};function Qa(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ja(e){var t,n;e instanceof Je?(t=e._id,e=e._name):(t=Ti(),(n=Ka).time=jn(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&mn(u,e,t,l,o,n||Qa(u,t));return new Je(r,this._parents,e,t)}qt.prototype.interrupt=Wl;qt.prototype.transition=ja;const Vt=e=>()=>e;function Ga(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ze(e,t,n){this.k=e,this.x=t,this.y=n}Ze.prototype={constructor:Ze,scale:function(e){return e===1?this:new Ze(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ze(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Et=new Ze(1,0,0);Ze.prototype;function bn(e){e.stopImmediatePropagation()}function bt(e){e.preventDefault(),e.stopImmediatePropagation()}function Za(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Ja(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Cr(){return this.__zoom||Et}function $a(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function eu(){return navigator.maxTouchPoints||"ontouchstart"in this}function tu(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function nu(){var e=Za,t=Ja,n=tu,r=$a,i=eu,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Rs,l=Wn("start","zoom","end"),c,m,h,g=500,x=150,R=0,V=10;function D(_){_.property("__zoom",Cr).on("wheel.zoom",p,{passive:!1}).on("mousedown.zoom",d).on("dblclick.zoom",y).filter(i).on("touchstart.zoom",v).on("touchmove.zoom",f).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}D.transform=function(_,q,S,w){var k=_.selection?_.selection():_;k.property("__zoom",Cr),_!==k?O(_,q,S,w):k.interrupt().each(function(){W(this,arguments).event(w).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},D.scaleBy=function(_,q,S,w){D.scaleTo(_,function(){var k=this.__zoom.k,E=typeof q=="function"?q.apply(this,arguments):q;return k*E},S,w)},D.scaleTo=function(_,q,S,w){D.transform(_,function(){var k=t.apply(this,arguments),E=this.__zoom,X=S==null?H(k):typeof S=="function"?S.apply(this,arguments):S,N=E.invert(X),P=typeof q=="function"?q.apply(this,arguments):q;return n(A(j(E,P),X,N),k,o)},S,w)},D.translateBy=function(_,q,S,w){D.transform(_,function(){return n(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),o)},null,w)},D.translateTo=function(_,q,S,w,k){D.transform(_,function(){var E=t.apply(this,arguments),X=this.__zoom,N=w==null?H(E):typeof w=="function"?w.apply(this,arguments):w;return n(Et.translate(N[0],N[1]).scale(X.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof S=="function"?-S.apply(this,arguments):-S),E,o)},w,k)};function j(_,q){return q=Math.max(s[0],Math.min(s[1],q)),q===_.k?_:new Ze(q,_.x,_.y)}function A(_,q,S){var w=q[0]-S[0]*_.k,k=q[1]-S[1]*_.k;return w===_.x&&k===_.y?_:new Ze(_.k,w,k)}function H(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function O(_,q,S,w){_.on("start.zoom",function(){W(this,arguments).event(w).start()}).on("interrupt.zoom end.zoom",function(){W(this,arguments).event(w).end()}).tween("zoom",function(){var k=this,E=arguments,X=W(k,E).event(w),N=t.apply(k,E),P=S==null?H(N):typeof S=="function"?S.apply(k,E):S,F=Math.max(N[1][0]-N[0][0],N[1][1]-N[0][1]),ee=k.__zoom,se=typeof q=="function"?q.apply(k,E):q,ae=u(ee.invert(P).concat(F/ee.k),se.invert(P).concat(F/se.k));return function(ue){if(ue===1)ue=se;else{var Q=ae(ue),Z=F/Q[2];ue=new Ze(Z,P[0]-Q[0]*Z,P[1]-Q[1]*Z)}X.zoom(null,ue)}})}function W(_,q,S){return!S&&_.__zooming||new I(_,q)}function I(_,q){this.that=_,this.args=q,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,q),this.taps=0}I.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,q){return this.mouse&&_!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var q=it(this.that).datum();l.call(_,this.that,new Ga(_,{sourceEvent:this.sourceEvent,target:D,type:_,transform:this.that.__zoom,dispatch:l}),q)}};function p(_,...q){if(!e.apply(this,arguments))return;var S=W(this,q).event(_),w=this.__zoom,k=Math.max(s[0],Math.min(s[1],w.k*Math.pow(2,r.apply(this,arguments)))),E=st(_);if(S.wheel)(S.mouse[0][0]!==E[0]||S.mouse[0][1]!==E[1])&&(S.mouse[1]=w.invert(S.mouse[0]=E)),clearTimeout(S.wheel);else{if(w.k===k)return;S.mouse=[E,w.invert(E)],Kt(this),S.start()}bt(_),S.wheel=setTimeout(X,x),S.zoom("mouse",n(A(j(w,k),S.mouse[0],S.mouse[1]),S.extent,o));function X(){S.wheel=null,S.end()}}function d(_,...q){if(h||!e.apply(this,arguments))return;var S=_.currentTarget,w=W(this,q,!0).event(_),k=it(_.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",F,!0),E=st(_,S),X=_.clientX,N=_.clientY;Ol(_.view),bn(_),w.mouse=[E,this.__zoom.invert(E)],Kt(this),w.start();function P(ee){if(bt(ee),!w.moved){var se=ee.clientX-X,ae=ee.clientY-N;w.moved=se*se+ae*ae>R}w.event(ee).zoom("mouse",n(A(w.that.__zoom,w.mouse[0]=st(ee,S),w.mouse[1]),w.extent,o))}function F(ee){k.on("mousemove.zoom mouseup.zoom",null),Pl(ee.view,w.moved),bt(ee),w.event(ee).end()}}function y(_,...q){if(!!e.apply(this,arguments)){var S=this.__zoom,w=st(_.changedTouches?_.changedTouches[0]:_,this),k=S.invert(w),E=S.k*(_.shiftKey?.5:2),X=n(A(j(S,E),w,k),t.apply(this,q),o);bt(_),a>0?it(this).transition().duration(a).call(O,X,w,_):it(this).call(D.transform,X,w,_)}}function v(_,...q){if(!!e.apply(this,arguments)){var S=_.touches,w=S.length,k=W(this,q,_.changedTouches.length===w).event(_),E,X,N,P;for(bn(_),X=0;X<w;++X)N=S[X],P=st(N,this),P=[P,this.__zoom.invert(P),N.identifier],k.touch0?!k.touch1&&k.touch0[2]!==P[2]&&(k.touch1=P,k.taps=0):(k.touch0=P,E=!0,k.taps=1+!!c);c&&(c=clearTimeout(c)),E&&(k.taps<2&&(m=P[0],c=setTimeout(function(){c=null},g)),Kt(this),k.start())}}function f(_,...q){if(!!this.__zooming){var S=W(this,q).event(_),w=_.changedTouches,k=w.length,E,X,N,P;for(bt(_),E=0;E<k;++E)X=w[E],N=st(X,this),S.touch0&&S.touch0[2]===X.identifier?S.touch0[0]=N:S.touch1&&S.touch1[2]===X.identifier&&(S.touch1[0]=N);if(X=S.that.__zoom,S.touch1){var F=S.touch0[0],ee=S.touch0[1],se=S.touch1[0],ae=S.touch1[1],ue=(ue=se[0]-F[0])*ue+(ue=se[1]-F[1])*ue,Q=(Q=ae[0]-ee[0])*Q+(Q=ae[1]-ee[1])*Q;X=j(X,Math.sqrt(ue/Q)),N=[(F[0]+se[0])/2,(F[1]+se[1])/2],P=[(ee[0]+ae[0])/2,(ee[1]+ae[1])/2]}else if(S.touch0)N=S.touch0[0],P=S.touch0[1];else return;S.zoom("touch",n(A(X,N,P),S.extent,o))}}function M(_,...q){if(!!this.__zooming){var S=W(this,q).event(_),w=_.changedTouches,k=w.length,E,X;for(bn(_),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),E=0;E<k;++E)X=w[E],S.touch0&&S.touch0[2]===X.identifier?delete S.touch0:S.touch1&&S.touch1[2]===X.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(X=st(X,this),Math.hypot(m[0]-X[0],m[1]-X[1])<V)){var N=it(this).on("dblclick.zoom");N&&N.apply(this,arguments)}}}return D.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:Vt(+_),D):r},D.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Vt(!!_),D):e},D.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:Vt(!!_),D):i},D.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Vt([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),D):t},D.scaleExtent=function(_){return arguments.length?(s[0]=+_[0],s[1]=+_[1],D):[s[0],s[1]]},D.translateExtent=function(_){return arguments.length?(o[0][0]=+_[0][0],o[1][0]=+_[1][0],o[0][1]=+_[0][1],o[1][1]=+_[1][1],D):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},D.constrain=function(_){return arguments.length?(n=_,D):n},D.duration=function(_){return arguments.length?(a=+_,D):a},D.interpolate=function(_){return arguments.length?(u=_,D):u},D.on=function(){var _=l.on.apply(l,arguments);return _===l?D:_},D.clickDistance=function(_){return arguments.length?(R=(_=+_)*_,D):Math.sqrt(R)},D.tapDistance=function(_){return arguments.length?(V=+_,D):V},D}function ru(e){let t,n,r,i,s,o,a,u,l,c,m;return{c(){t=z("div"),n=z("div"),r=z("button"),r.textContent="+",i=oe(),s=z("button"),s.textContent="\u2212",o=oe(),a=z("button"),a.textContent="\u27F2",u=oe(),l=z("canvas"),b(r,"class","zoom-btn svelte-1mu4qvl"),b(r,"aria-label","Zoom in"),b(r,"title","Zoom in"),b(s,"class","zoom-btn svelte-1mu4qvl"),b(s,"aria-label","Zoom out"),b(s,"title","Zoom out"),b(a,"class","zoom-btn svelte-1mu4qvl"),b(a,"aria-label","Reset zoom"),b(a,"title","Reset zoom"),b(n,"class","zoom-controls svelte-1mu4qvl"),b(n,"aria-label","Zoom controls"),b(l,"width",e[0]),b(l,"height",e[1]),b(l,"class","svelte-1mu4qvl"),b(t,"class","chart-container svelte-1mu4qvl")},m(h,g){re(h,t,g),C(t,n),C(n,r),C(n,i),C(n,s),C(n,o),C(n,a),C(t,u),C(t,l),e[32](l),e[33](t),c||(m=[ye(r,"click",e[8]),ye(s,"click",e[9]),ye(a,"click",e[10]),ye(l,"mousemove",e[4]),ye(l,"mouseleave",e[6]),ye(l,"click",e[5]),ye(l,"touchend",e[7])],c=!0)},p(h,g){g[0]&1&&b(l,"width",h[0]),g[0]&2&&b(l,"height",h[1])},i:Ne,o:Ne,d(h){h&&te(t),e[32](null),e[33](null),c=!1,$e(m)}}}const ht=10,iu=.5,su=20,Ar=800;function nt(e,t){if(!t||!e)return!1;try{return new RegExp(t,"i").test(e)}catch{return e.toLowerCase().includes(t.toLowerCase())}}function ou(e,t,n){let r,i,s,o,a,u,l,c,m,{data:h=[]}=t,{domainColumn:g="category"}=t,{opacity:x=1}=t,{selectedValues:R=new Set}=t,{searchQuery:V=""}=t,{showAnnotations:D=!0}=t,{highlightedData:j=[]}=t,{startDate:A=null}=t,{endDate:H=null}=t,{uniqueValues:O=[]}=t,{hoveredData:W=null}=t,{selectedData:I=null}=t,{clusterLabels:p=[]}=t,d=[],y,v,f,M=800,_=600;const q={top:40,right:400,bottom:60,left:320};let S=null,w=Et,k=!1,E=0,X=null,N="";function P(){k=!0,E=performance.now(),X&&cancelAnimationFrame(X),F()}function F(){performance.now()-E<Ar?(Z(),X=requestAnimationFrame(F)):(k=!1,Z())}let ee,se,ae,ue=1;function Q(){if(!y||!v)return;const T=v.getBoundingClientRect();T.width>0&&T.height>0&&(n(0,M=Math.floor(T.width)),n(1,_=Math.floor(T.height))),ue=Math.max(window.devicePixelRatio||1,1),n(2,y.style.width="100%",y),n(2,y.style.height="100%",y),n(2,y.width=Math.max(1,Math.floor(M*ue)),y),n(2,y.height=Math.max(1,Math.floor(_*ue)),y),n(24,f=y.getContext("2d")),f.setTransform(ue,0,0,ue,0,0)}function Z(){if(console.log("Scatterplot draw() called, data.length:",h.length),!f||!h.length)return;f.clearRect(0,0,M,_),f.save(),f.translate(w.x,w.y),f.scale(w.k,w.k);let T=0,$=1;if(k){const B=(performance.now()-E)/Ar,ne=Math.max(0,1-B),ie=Math.sin(B*Math.PI*8);T=ie*ne*4,$=1+ie*ne*.3}if(h.forEach(U=>{f.beginPath();let B=q.left+u(U.x),ne=q.top+m(U.y),ie=Math.max(.5,ht/w.k);k&&U.isActive&&(B+=T/w.k,ne+=T*.5/w.k,ie*=$),f.arc(B,ne,ie,0,Math.PI*2);const ge=U[g]||"",ke=ge.includes(";")?ge.split(";")[0].trim():ge;n(24,f.fillStyle=ae(ke),f);const ve=Math.max(.1,Math.min(1,x));n(24,f.globalAlpha=U.isActive?ve:ve*.15,f),f.fill(),n(24,f.globalAlpha=1,f)}),p&&p.length>0){n(24,f.globalAlpha=.85,f),n(24,f.textAlign="center",f);const U=M<600,B=U?9:15,ne=U?7:11;p.forEach(ie=>{const ge=q.left+u(ie.x),ke=q.top+m(ie.y),ve=ie.label.match(/^(.+?)\s*\(Read:\s*(.+?)\)\s*$/),ce=ve?ve[1].trim():ie.label,Me=ve?ve[2].trim():null,Ce=Math.max(U?8:12,B/w.k);if(n(24,f.font=`bold ${Ce}px Arial`,f),n(24,f.textBaseline=Me?"bottom":"middle",f),n(24,f.strokeStyle="white",f),n(24,f.lineWidth=Math.max(U?1.5:2,3/w.k),f),f.strokeText(ce,ge,ke),n(24,f.fillStyle="#333",f),f.fillText(ce,ge,ke),Me&&!U){const L=Math.max(9,ne/w.k);n(24,f.font=`${L}px Arial`,f),n(24,f.textBaseline="top",f);const K=ke+2/w.k;n(24,f.strokeStyle="white",f),n(24,f.lineWidth=Math.max(1.5,2.5/w.k),f),f.strokeText(Me,ge,K),n(24,f.fillStyle="#555",f),f.fillText(Me,ge,K)}})}if(D&&d.forEach(U=>{n(24,f.globalAlpha=1,f),f.beginPath(),f.arc(U.x,U.y,U.radius,0,Math.PI*2),n(24,f.strokeStyle="red",f),n(24,f.lineWidth=2,f),f.setLineDash([5,5]),f.stroke();const B=180,ne=12;n(24,f.font="16px Arial",f);const ie=U.x+U.label_x,ge=U.y+U.label_y;let ke=0,ve=0,ce=[];if(U.label){const Re=U.label.split(" ");let Ae="";Re.forEach((Pe,Ye)=>{const Ve=Ae+Pe+" ";f.measureText(Ve).width>B&&Ye>0?(ce.push(Ae),ke=Math.max(ke,f.measureText(Ae).width),Ae=Pe+" "):Ae=Ve}),ce.push(Ae),ke=Math.max(ke,f.measureText(Ae).width),ve=ne*ce.length}const Me=ie,Ce=ge-ne,L=ke,K=ve;let Y,G;U.x<Me?Y=Me:U.x>Me+L?Y=Me+L:Y=U.x,U.y<Ce?G=Ce:U.y>Ce+K?G=Ce+K:G=U.y;const xe=Math.atan2(G-U.y,Y-U.x),De=U.x+U.radius*Math.cos(xe),Te=U.y+U.radius*Math.sin(xe);if(f.setLineDash([]),f.beginPath(),f.moveTo(De,Te),f.lineTo(Y,G),n(24,f.strokeStyle="red",f),n(24,f.lineWidth=1,f),f.stroke(),U.label){n(24,f.font="16px Arial",f),n(24,f.fillStyle="red",f);const Re=16;ce.forEach((Ae,Pe)=>{f.fillText(Ae,ie,ge+Pe*Re)})}}),f.setLineDash([]),I){const U=q.left+u(I.x),B=q.top+m(I.y);f.beginPath(),f.arc(U,B,Math.max(.5,(ht+2)/w.k),0,Math.PI*2),n(24,f.fillStyle=ae(I[g]),f),n(24,f.globalAlpha=1,f),f.fill(),n(24,f.strokeStyle="#1976d2",f),n(24,f.lineWidth=Math.max(1,3/w.k),f),f.stroke()}if(W&&W!==I){const U=q.left+u(W.x),B=q.top+m(W.y);f.beginPath(),f.arc(U,B,Math.max(.5,ht/w.k),0,Math.PI*2),n(24,f.fillStyle=ae(W[g]),f),n(24,f.globalAlpha=1,f),f.fill(),n(24,f.strokeStyle="black",f),n(24,f.lineWidth=Math.max(1,2/w.k),f),f.stroke()}f.restore()}function fe(T){const $=y.getBoundingClientRect(),U=M/$.width,B=_/$.height,ne=(T.clientX-$.left)*U,ie=(T.clientY-$.top)*B,[ge,ke]=w.invert([ne,ie]),ve=h.find(ce=>{var Ye,Ve,Qe,et,tt;const Me=q.left+u(ce.x),Ce=q.top+m(ce.y),L=Me-ge,K=Ce-ke,Y=Math.sqrt(L*L+K*K)<(ht+3)/w.k,xe=!!(V&&String(V).trim().length)?nt((Ye=ce.title)!=null?Ye:"",V)||nt((Ve=ce.text)!=null?Ve:"",V)||nt((Qe=ce.article_text)!=null?Qe:"",V)||nt((et=ce.summary)!=null?et:"",V):!0,De=R&&R.size>0&&R.size<r,Te=(tt=ce[g])!=null?tt:"";let Re=!0;De&&(Te.startsWith("No target;")?Re=R.has(Te):Re=R.has(Te)||[...R].some(ft=>Te.includes(ft)));const Ae=A&&H?ce.date>=A&&ce.date<=H:!0;return Y&&(xe&&Re&&Ae)});ve?(n(12,W=ve),S=ve,n(2,y.style.cursor="pointer",y)):(n(12,W=null),S=null,n(2,y.style.cursor="crosshair",y)),Z()}function le(T){const $=y.getBoundingClientRect(),U=M/$.width,B=_/$.height,ne=(T.clientX-$.left)*U,ie=(T.clientY-$.top)*B,[ge,ke]=w.invert([ne,ie]),ve=h.find(ce=>{var Ye,Ve,Qe,et,tt;const Me=q.left+u(ce.x),Ce=q.top+m(ce.y),L=Me-ge,K=Ce-ke,Y=Math.sqrt(L*L+K*K)<(ht+3)/w.k,xe=!!(V&&String(V).trim().length)?nt((Ye=ce.title)!=null?Ye:"",V)||nt((Ve=ce.text)!=null?Ve:"",V)||nt((Qe=ce.article_text)!=null?Qe:"",V)||nt((et=ce.summary)!=null?et:"",V):!0,De=R&&R.size>0&&R.size<r,Te=(tt=ce[g])!=null?tt:"";let Re=!0;De&&(Te.startsWith("No target;")?Re=R.has(Te):Re=R.has(Te)||[...R].some(ft=>Te.includes(ft)));const Ae=A&&H?ce.date>=A&&ce.date<=H:!0;return Y&&(xe&&Re&&Ae)});if(!ve){n(11,I=null),Z();return}if(T.ctrlKey||T.metaKey){const ce=ve.url||ve.link||ve.href||ve.permalink||ve.item_url;ce&&typeof window<"u"&&window.open(ce,"_blank","noopener,noreferrer");return}I===ve?n(11,I=null):n(11,I=ve),Z()}function _e(){n(12,W=S),Z()}function we(T){if(T.changedTouches&&T.changedTouches.length>0){const $=T.changedTouches[0],U=y.getBoundingClientRect(),B=M/U.width,ne=_/U.height,ie=($.clientX-U.left)*B,ge=($.clientY-U.top)*ne,[ke,ve]=w.invert([ie,ge]),ce=h.find(Me=>{const Ce=q.left+u(Me.x),L=q.top+m(Me.y),K=Ce-ke,Y=L-ve;return Math.sqrt(K*K+Y*Y)<(ht+5)/w.k&&Me.isActive});ce&&(n(11,I=ce),Z())}}let pe;Fn(()=>{if(console.log("Scatterplot mounted, canvas:",y),n(24,f=y.getContext("2d")),console.log("Canvas context:",f),Q(),window.ResizeObserver&&(pe=new ResizeObserver(()=>{Q(),Z()}),pe.observe(v)),ee=nu().scaleExtent([iu,su]).filter(T=>{const $=T;return $.type==="wheel"||$.type==="touchstart"||$.type==="touchmove"?!0:$.type==="mousedown"?$.button===0&&!$.ctrlKey&&!$.metaKey&&!$.shiftKey:!$.ctrlKey&&!$.metaKey&&!$.shiftKey}).on("zoom",T=>{w=T.transform,Z()}),se=it(y),se.call(ee),M<600){const $=M/2,U=_/2,B=Et.translate($*(1-1.5),U*(1-1.5)).scale(1.5);se.call(ee.transform,B)}return Z(),()=>{pe&&pe.disconnect()}});function he(T,$){var ne;if((ne=$==null?void 0:$.stopPropagation)==null||ne.call($),!se||!ee)return;const U=M/2,B=_/2;se.transition().duration(200).call(ee.scaleBy,T,[U,B])}function J(T){he(1.25,T)}function me(T){he(1/1.25,T)}function de(T){var $;($=T==null?void 0:T.stopPropagation)==null||$.call(T),!(!se||!ee)&&se.transition().duration(200).call(ee.transform,Et)}function be(T){Xe[T?"unshift":"push"](()=>{y=T,n(2,y)})}function Se(T){Xe[T?"unshift":"push"](()=>{v=T,n(3,v)})}return e.$$set=T=>{"data"in T&&n(13,h=T.data),"domainColumn"in T&&n(14,g=T.domainColumn),"opacity"in T&&n(15,x=T.opacity),"selectedValues"in T&&n(16,R=T.selectedValues),"searchQuery"in T&&n(17,V=T.searchQuery),"showAnnotations"in T&&n(18,D=T.showAnnotations),"highlightedData"in T&&n(19,j=T.highlightedData),"startDate"in T&&n(20,A=T.startDate),"endDate"in T&&n(21,H=T.endDate),"uniqueValues"in T&&n(22,O=T.uniqueValues),"hoveredData"in T&&n(12,W=T.hoveredData),"selectedData"in T&&n(11,I=T.selectedData),"clusterLabels"in T&&n(23,p=T.clusterLabels)},e.$$.update=()=>{if(e.$$.dirty[0]&524288&&new Set(j.map(T=>T.id)),e.$$.dirty[0]&24576&&(r=new Set(h.map(T=>T[g])).size),e.$$.dirty[0]&33619968){const T=[...R].sort().join("|");T!==N&&(n(25,N=T),R.size>0&&P())}e.$$.dirty[0]&1&&n(29,i=M-q.left-q.right),e.$$.dirty[0]&2&&n(26,s=_-q.top-q.bottom),e.$$.dirty[0]&8192&&n(31,o=[rr(h,T=>T.x),nr(h,T=>T.x)]),e.$$.dirty[1]&1&&n(30,a=o[0]===o[1]?[o[0]-1,o[1]+1]:o),e.$$.dirty[0]&1610612736&&(u=Rn().domain(a).range([0,i])),e.$$.dirty[0]&8192&&n(28,l=[rr(h,T=>T.y),nr(h,T=>T.y)]),e.$$.dirty[0]&268435456&&n(27,c=l[0]===l[1]?[l[0]-1,l[1]+1]:l),e.$$.dirty[0]&201326592&&(m=Rn().domain(c).range([s,0])),e.$$.dirty[0]&4210688&&(ae=Bn(fi).domain(g?O:[])),e.$$.dirty[0]&8192&&h.length&&new Date(Math.min(...h.map(T=>T.date.getTime()))),e.$$.dirty[0]&8192&&h.length&&new Date(Math.max(...h.map(T=>T.date.getTime()))),e.$$.dirty[0]&28829696&&f&&h.length&&Z()},[M,_,y,v,fe,le,_e,we,J,me,de,I,W,h,g,x,R,V,D,j,A,H,O,p,f,N,s,c,l,i,a,o,be,Se]}class lu extends hn{constructor(t){super(),fn(this,t,ou,ru,an,{data:13,domainColumn:14,opacity:15,selectedValues:16,searchQuery:17,showAnnotations:18,highlightedData:19,startDate:20,endDate:21,uniqueValues:22,hoveredData:12,selectedData:11,clusterLabels:23},null,[-1,-1])}}function Dr(e,t,n){const r=e.slice();return r[31]=t[n],r}function Tr(e){let t,n,r,i,s=e[31].label+"",o,a;return{c(){t=z("div"),n=z("div"),r=oe(),i=z("div"),o=Ee(s),b(n,"class","marker-line svelte-ynwhj4"),b(i,"class","marker-label svelte-ynwhj4"),b(t,"class","marker svelte-ynwhj4"),qe(t,"left",e[31].percent+"%"),b(t,"title",a=e[31].label)},m(u,l){re(u,t,l),C(t,n),C(t,r),C(t,i),C(i,o)},p(u,l){l[0]&8&&s!==(s=u[31].label+"")&&ze(o,s),l[0]&8&&qe(t,"left",u[31].percent+"%"),l[0]&8&&a!==(a=u[31].label)&&b(t,"title",a)},d(u){u&&te(t)}}}function au(e){let t,n,r,i,s,o,a,u,l,c,m=e[3],h=[];for(let g=0;g<m.length;g+=1)h[g]=Tr(Dr(e,m,g));return{c(){t=z("div"),n=z("div"),r=z("div"),i=oe();for(let g=0;g<h.length;g+=1)h[g].c();s=oe(),o=z("div"),a=oe(),u=z("div"),b(r,"class","track-inner svelte-ynwhj4"),b(n,"class","track svelte-ynwhj4"),b(o,"class","thumb start-thumb svelte-ynwhj4"),qe(o,"left",e[5]+"%"),b(u,"class","thumb end-thumb svelte-ynwhj4"),qe(u,"left",e[4]+"%"),b(t,"class","range-slider svelte-ynwhj4"),qe(t,"--start-percent",e[5]+"%"),qe(t,"--end-percent",e[4]+"%")},m(g,x){re(g,t,x),C(t,n),C(n,r),C(t,i);for(let R=0;R<h.length;R+=1)h[R].m(t,null);C(t,s),C(t,o),e[15](o),C(t,a),C(t,u),e[18](u),e[21](t),l||(c=[ye(r,"mousedown",e[13]),ye(r,"touchstart",e[14]),ye(o,"mousedown",e[16]),ye(o,"touchstart",e[17]),ye(u,"mousedown",e[19]),ye(u,"touchstart",e[20])],l=!0)},p(g,x){if(x[0]&8){m=g[3];let R;for(R=0;R<m.length;R+=1){const V=Dr(g,m,R);h[R]?h[R].p(V,x):(h[R]=Tr(V),h[R].c(),h[R].m(t,s))}for(;R<h.length;R+=1)h[R].d(1);h.length=m.length}x[0]&32&&qe(o,"left",g[5]+"%"),x[0]&16&&qe(u,"left",g[4]+"%"),x[0]&32&&qe(t,"--start-percent",g[5]+"%"),x[0]&16&&qe(t,"--end-percent",g[4]+"%")},i:Ne,o:Ne,d(g){g&&te(t),Pn(h,g),e[15](null),e[18](null),e[21](null),l=!1,$e(c)}}}function uu(e,t,n){let r,i,s,{min:o=0}=t,{max:a=100}=t,{startValue:u}=t,{endValue:l}=t,{markers:c=[]}=t;const m=Gr();let h,g,x,R=!1,V=null,D=null,j=0;function A(k,E){R=!0,V=E,D=h.getBoundingClientRect(),E==="range"&&(j=l-u),window.addEventListener("mousemove",H),window.addEventListener("mouseup",O)}function H(k){if(!R)return;const E=Math.min(Math.max(0,(k.clientX-D.left)/D.width),1),X=Math.round(E*(a-o)+o);if(V==="start")n(8,u=Math.min(X,l)),m("startChange",u);else if(V==="end")n(9,l=Math.max(X,u)),m("endChange",l);else if(V==="range"){let N=X-Math.floor(j/2),P=X+Math.ceil(j/2);N<o&&(N=o,P=o+j),P>a&&(P=a,N=a-j),N=Math.max(o,N),P=Math.min(a,P),n(8,u=N),n(9,l=P),m("startChange",u),m("endChange",l)}}function O(){R=!1,window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",O)}function W(k,E){k.preventDefault(),R=!0,V=E,D=h.getBoundingClientRect(),E==="range"&&(j=l-u),window.addEventListener("touchmove",I,{passive:!1}),window.addEventListener("touchend",p)}function I(k){if(k.preventDefault(),!R)return;const E=k.touches[0],X=Math.min(Math.max(0,(E.clientX-D.left)/D.width),1),N=Math.round(X*(a-o)+o);if(V==="start")n(8,u=Math.min(N,l)),m("startChange",u);else if(V==="end")n(9,l=Math.max(N,u)),m("endChange",l);else if(V==="range"){let P=N-Math.floor(j/2),F=N+Math.ceil(j/2);P<o&&(P=o,F=o+j),F>a&&(F=a,P=a-j),P=Math.max(o,P),F=Math.min(a,F),n(8,u=P),n(9,l=F),m("startChange",u),m("endChange",l)}}function p(){R=!1,window.removeEventListener("touchmove",I),window.removeEventListener("touchend",p)}const d=k=>A(k,"range"),y=k=>W(k,"range");function v(k){Xe[k?"unshift":"push"](()=>{g=k,n(1,g)})}const f=k=>A(k,"start"),M=k=>W(k,"start");function _(k){Xe[k?"unshift":"push"](()=>{x=k,n(2,x)})}const q=k=>A(k,"end"),S=k=>W(k,"end");function w(k){Xe[k?"unshift":"push"](()=>{h=k,n(0,h)})}return e.$$set=k=>{"min"in k&&n(10,o=k.min),"max"in k&&n(11,a=k.max),"startValue"in k&&n(8,u=k.startValue),"endValue"in k&&n(9,l=k.endValue),"markers"in k&&n(12,c=k.markers)},e.$$.update=()=>{e.$$.dirty[0]&3328&&n(5,r=a>o?(u-o)/(a-o)*100:0),e.$$.dirty[0]&3584&&n(4,i=a>o?(l-o)/(a-o)*100:100),e.$$.dirty[0]&7168&&n(3,s=c.map(k=>({...k,percent:a>o?(k.index-o)/(a-o)*100:0})))},[h,g,x,s,i,r,A,W,u,l,o,a,c,d,y,v,f,M,_,q,S,w]}class cu extends hn{constructor(t){super(),fn(this,t,uu,au,an,{min:10,max:11,startValue:8,endValue:9,markers:12},null,[-1,-1])}}function fu(e){const t=e.slice(),n=Ri(t[0][t[1]]);return t[13]=n,t}function hu(e){let t,n=e[4]?"Click on a circle to pin it here.":"Hover over a circle to see details here.",r;return{c(){t=z("p"),r=Ee(n),b(t,"class","placeholder-text svelte-eqdgu9")},m(i,s){re(i,t,s),C(t,r)},p(i,s){s&16&&n!==(n=i[4]?"Click on a circle to pin it here.":"Hover over a circle to see details here.")&&ze(r,n)},d(i){i&&te(t)}}}function du(e){let t,n,r=pt(e[0].title,e[3])+"",i,s,o,a,u,l,c=e[0].date.toISOString().split("T")[0]+"",m,h,g,x,R,V,D,j=pt(e[0].text||e[0].article_text,e[3])+"",A=e[4]&&Rr(e),H=(e[0].url||e[0].link||e[0].href||e[0].permalink||e[0].item_url)&&qr(e),O=e[0].pofma_link&&Nr(e);function W(f,M){return M&3&&(g=null),g==null&&(g=!!(f[1]==="topic"&&Ri(f[0][f[1]]).sub)),g?Lr:pu}function I(f,M){return M===Lr?fu(f):f}let p=W(e,-1),d=p(I(e,p)),y=e[6]&&Ir(e),v=e[0].summary&&Or(e);return{c(){A&&A.c(),t=oe(),n=z("h1"),i=oe(),s=z("div"),o=z("div"),H&&H.c(),a=oe(),O&&O.c(),u=oe(),l=z("span"),m=Ee(c),h=oe(),d.c(),x=oe(),y&&y.c(),R=oe(),v&&v.c(),V=oe(),D=z("p"),b(n,"class","svelte-eqdgu9"),b(o,"class","meta-links svelte-eqdgu9"),b(l,"class","article-date svelte-eqdgu9"),b(s,"class","meta-row svelte-eqdgu9"),b(D,"class","svelte-eqdgu9")},m(f,M){A&&A.m(f,M),re(f,t,M),re(f,n,M),n.innerHTML=r,re(f,i,M),re(f,s,M),C(s,o),H&&H.m(o,null),C(o,a),O&&O.m(o,null),C(s,u),C(s,l),C(l,m),re(f,h,M),d.m(f,M),re(f,x,M),y&&y.m(f,M),re(f,R,M),v&&v.m(f,M),re(f,V,M),re(f,D,M),D.innerHTML=j},p(f,M){f[4]?A?A.p(f,M):(A=Rr(f),A.c(),A.m(t.parentNode,t)):A&&(A.d(1),A=null),M&9&&r!==(r=pt(f[0].title,f[3])+"")&&(n.innerHTML=r),f[0].url||f[0].link||f[0].href||f[0].permalink||f[0].item_url?H?H.p(f,M):(H=qr(f),H.c(),H.m(o,a)):H&&(H.d(1),H=null),f[0].pofma_link?O?O.p(f,M):(O=Nr(f),O.c(),O.m(o,null)):O&&(O.d(1),O=null),M&1&&c!==(c=f[0].date.toISOString().split("T")[0]+"")&&ze(m,c),p===(p=W(f,M))&&d?d.p(I(f,p),M):(d.d(1),d=p(I(f,p)),d&&(d.c(),d.m(x.parentNode,x))),f[6]?y?y.p(f,M):(y=Ir(f),y.c(),y.m(R.parentNode,R)):y&&(y.d(1),y=null),f[0].summary?v?v.p(f,M):(v=Or(f),v.c(),v.m(V.parentNode,V)):v&&(v.d(1),v=null),M&9&&j!==(j=pt(f[0].text||f[0].article_text,f[3])+"")&&(D.innerHTML=j)},d(f){A&&A.d(f),f&&te(t),f&&te(n),f&&te(i),f&&te(s),H&&H.d(),O&&O.d(),f&&te(h),d.d(f),f&&te(x),y&&y.d(f),f&&te(R),v&&v.d(f),f&&te(V),f&&te(D)}}}function Rr(e){let t,n,r,i,s,o;return{c(){t=z("div"),n=z("span"),n.textContent="\u{1F4CC} Pinned",r=oe(),i=z("button"),i.textContent="\u2715",b(n,"class","pin-indicator svelte-eqdgu9"),b(i,"class","unpin-btn svelte-eqdgu9"),b(t,"class","pin-header svelte-eqdgu9")},m(a,u){re(a,t,u),C(t,n),C(t,r),C(t,i),s||(o=ye(i,"click",e[9]),s=!0)},p:Ne,d(a){a&&te(t),s=!1,o()}}}function qr(e){let t,n,r;return{c(){t=z("a"),n=Ee("View on Factually"),b(t,"class","article-link svelte-eqdgu9"),b(t,"href",r=e[0].url||e[0].link||e[0].href||e[0].permalink||e[0].item_url),b(t,"target","_blank"),b(t,"rel","noopener noreferrer")},m(i,s){re(i,t,s),C(t,n)},p(i,s){s&1&&r!==(r=i[0].url||i[0].link||i[0].href||i[0].permalink||i[0].item_url)&&b(t,"href",r)},d(i){i&&te(t)}}}function Nr(e){let t,n,r;return{c(){t=z("a"),n=Ee("View POFMA release"),b(t,"class","article-link svelte-eqdgu9"),b(t,"href",r=e[0].pofma_link),b(t,"target","_blank"),b(t,"rel","noopener noreferrer")},m(i,s){re(i,t,s),C(t,n)},p(i,s){s&1&&r!==(r=i[0].pofma_link)&&b(t,"href",r)},d(i){i&&te(t)}}}function pu(e){let t,n=(e[5]?e[5](e[1],e[0][e[1]]):e[0][e[1]])+"",r;return{c(){t=z("span"),r=Ee(n),qe(t,"background",e[2](ln(e[0][e[1]]))),b(t,"class","svelte-eqdgu9")},m(i,s){re(i,t,s),C(t,r)},p(i,s){s&35&&n!==(n=(i[5]?i[5](i[1],i[0][i[1]]):i[0][i[1]])+"")&&ze(r,n),s&7&&qe(t,"background",i[2](ln(i[0][i[1]])))},d(i){i&&te(t)}}}function Lr(e){let t,n,r=e[13].main+"",i,s,o,a=e[13].sub+"",u;return{c(){t=z("span"),n=z("span"),i=Ee(r),s=oe(),o=z("span"),u=Ee(a),b(n,"class","topic-main svelte-eqdgu9"),b(o,"class","topic-sub svelte-eqdgu9"),b(t,"class","topic-badge svelte-eqdgu9"),qe(t,"background",e[2](ln(e[0][e[1]])))},m(l,c){re(l,t,c),C(t,n),C(n,i),C(t,s),C(t,o),C(o,u)},p(l,c){c&3&&r!==(r=l[13].main+"")&&ze(i,r),c&3&&a!==(a=l[13].sub+"")&&ze(u,a),c&7&&qe(t,"background",l[2](ln(l[0][l[1]])))},d(l){l&&te(t)}}}function Ir(e){let t=e[6](e[1],e[0][e[1]]),n,r=t&&zr(e);return{c(){r&&r.c(),n=Qr()},m(i,s){r&&r.m(i,s),re(i,n,s)},p(i,s){s&67&&(t=i[6](i[1],i[0][i[1]])),t?r?r.p(i,s):(r=zr(i),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(i){r&&r.d(i),i&&te(n)}}}function zr(e){let t,n,r=e[6](e[1],e[0][e[1]])+"",i;return{c(){t=z("p"),n=z("em"),i=Ee(r),b(t,"class","svelte-eqdgu9")},m(s,o){re(s,t,o),C(t,n),C(n,i)},p(s,o){o&67&&r!==(r=s[6](s[1],s[0][s[1]])+"")&&ze(i,r)},d(s){s&&te(t)}}}function Or(e){let t,n=pt(e[0].summary,e[3])+"";return{c(){t=z("p"),b(t,"class","summary svelte-eqdgu9")},m(r,i){re(r,t,i),t.innerHTML=n},p(r,i){i&9&&n!==(n=pt(r[0].summary,r[3])+"")&&(t.innerHTML=n)},d(r){r&&te(t)}}}function mu(e){let t;function n(s,o){return s[0]?du:hu}let r=n(e),i=r(e);return{c(){t=z("div"),i.c(),b(t,"class","detail-card svelte-eqdgu9")},m(s,o){re(s,t,o),i.m(t,null)},p(s,[o]){r===(r=n(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(t,null)))},i:Ne,o:Ne,d(s){s&&te(t),i.d()}}}function ln(e){if(!e)return"";const t=String(e);return t.includes(";")?t.split(";")[0].trim():t}function Ri(e){if(!e)return{main:"",sub:""};const t=String(e),n=t.match(/^(.+?)\s*\(Read:\s*(.+?)\)\s*$/);return n?{main:n[1].trim(),sub:n[2].trim()}:{main:t,sub:""}}function pt(e,t){if(!t||!e)return e;try{const n=new RegExp(`(${t})`,"gi");return e.replace(n,"<mark>$1</mark>")}catch{const r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`(${r})`,"gi");return e.replace(i,"<mark>$1</mark>")}}function gu(e,t,n){const r=Gr();let{hoveredData:i}=t,{domainColumn:s}=t,{data:o}=t,{colorScale:a}=t,{searchQuery:u=""}=t,{isPinned:l=!1}=t,{labelOverride:c=null}=t,{descriptionOverride:m=null}=t;Fn(()=>{a.domain(o.map(g=>g[s]))});const h=()=>r("unpin");return e.$$set=g=>{"hoveredData"in g&&n(0,i=g.hoveredData),"domainColumn"in g&&n(1,s=g.domainColumn),"data"in g&&n(8,o=g.data),"colorScale"in g&&n(2,a=g.colorScale),"searchQuery"in g&&n(3,u=g.searchQuery),"isPinned"in g&&n(4,l=g.isPinned),"labelOverride"in g&&n(5,c=g.labelOverride),"descriptionOverride"in g&&n(6,m=g.descriptionOverride)},[i,s,a,u,l,c,m,r,o,h]}class _u extends hn{constructor(t){super(),fn(this,t,gu,mu,an,{hoveredData:0,domainColumn:1,data:8,colorScale:2,searchQuery:3,isPinned:4,labelOverride:5,descriptionOverride:6})}}function Pr(e,t,n){const r=e.slice();return r[72]=t[n],r}function Fr(e,t,n){const r=e.slice();return r[75]=t[n],r}function yu(e){let t;return{c(){t=z("div"),t.innerHTML='<p class="waiting-text svelte-2qcy7t">Waiting for data...</p>',b(t,"class","loading-overlay svelte-2qcy7t")},m(n,r){re(n,t,r)},p:Ne,i:Ne,o:Ne,d(n){n&&te(t)}}}function wu(e){let t,n,r,i;function s(m,h){return m[20]==="downloading"?xu:m[20]==="parsing"?ku:bu}let o=s(e),a=o(e);function u(m,h){return m[20]==="downloading"?Mu:Su}let l=u(e),c=l(e);return{c(){t=z("div"),n=z("div"),r=z("div"),a.c(),i=oe(),c.c(),b(r,"class","progress-header svelte-2qcy7t"),b(n,"class","progress-wrap svelte-2qcy7t"),b(t,"class","loading-overlay svelte-2qcy7t")},m(m,h){re(m,t,h),C(t,n),C(n,r),a.m(r,null),C(n,i),c.m(n,null)},p(m,h){o!==(o=s(m))&&(a.d(1),a=o(m),a&&(a.c(),a.m(r,null))),l===(l=u(m))&&c?c.p(m,h):(c.d(1),c=l(m),c&&(c.c(),c.m(n,null)))},i:Ne,o:Ne,d(m){m&&te(t),a.d(),c.d()}}}function vu(e){let t,n,r,i;function s(u){e[42](u)}function o(u){e[43](u)}let a={data:e[6],domainColumn:e[1],selectedValues:e[3],opacity:e[14],searchQuery:e[10],showAnnotations:e[16],highlightedData:e[9],startDate:e[4],endDate:e[5],uniqueValues:e[2],clusterLabels:e[17]};return e[11]!==void 0&&(a.hoveredData=e[11]),e[12]!==void 0&&(a.selectedData=e[12]),t=new lu({props:a}),Xe.push(()=>Gt(t,"hoveredData",s)),Xe.push(()=>Gt(t,"selectedData",o)),{c(){Vn(t.$$.fragment)},m(u,l){un(t,u,l),i=!0},p(u,l){const c={};l[0]&64&&(c.data=u[6]),l[0]&2&&(c.domainColumn=u[1]),l[0]&8&&(c.selectedValues=u[3]),l[0]&16384&&(c.opacity=u[14]),l[0]&1024&&(c.searchQuery=u[10]),l[0]&65536&&(c.showAnnotations=u[16]),l[0]&512&&(c.highlightedData=u[9]),l[0]&16&&(c.startDate=u[4]),l[0]&32&&(c.endDate=u[5]),l[0]&4&&(c.uniqueValues=u[2]),l[0]&131072&&(c.clusterLabels=u[17]),!n&&l[0]&2048&&(n=!0,c.hoveredData=u[11],jt(()=>n=!1)),!r&&l[0]&4096&&(r=!0,c.selectedData=u[12],jt(()=>r=!1)),t.$set(c)},i(u){i||(Fe(t.$$.fragment,u),i=!0)},o(u){Ge(t.$$.fragment,u),i=!1},d(u){cn(t,u)}}}function bu(e){let t;return{c(){t=Ee("Loading...")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function ku(e){let t;return{c(){t=Ee("Processing...")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function xu(e){let t;return{c(){t=Ee("Downloading data...")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Su(e){let t;return{c(){t=z("div"),b(t,"class","progress-bar indeterminate svelte-2qcy7t")},m(n,r){re(n,t,r)},p:Ne,d(n){n&&te(t)}}}function Mu(e){let t;function n(s,o){return s[22]?Cu:Eu}let r=n(e),i=r(e);return{c(){i.c(),t=Qr()},m(s,o){i.m(s,o),re(s,t,o)},p(s,o){r===(r=n(s))&&i?i.p(s,o):(i.d(1),i=r(s),i&&(i.c(),i.m(t.parentNode,t)))},d(s){i.d(s),s&&te(t)}}}function Eu(e){let t,n,r,i=mt(e[21])+"",s;return{c(){t=z("div"),n=oe(),r=z("div"),s=Ee(i),b(t,"class","progress-bar indeterminate svelte-2qcy7t"),b(r,"class","progress-label svelte-2qcy7t")},m(o,a){re(o,t,a),re(o,n,a),re(o,r,a),C(r,s)},p(o,a){a[0]&2097152&&i!==(i=mt(o[21])+"")&&ze(s,i)},d(o){o&&te(t),o&&te(n),o&&te(r)}}}function Cu(e){let t,n,r,i,s,o,a=mt(e[21])+"",u,l,c=mt(e[22])+"",m,h;return{c(){t=z("div"),n=z("div"),r=oe(),i=z("div"),s=Ee(e[23]),o=Ee("% ("),u=Ee(a),l=Ee(" / "),m=Ee(c),h=Ee(")"),b(n,"class","progress-fill svelte-2qcy7t"),qe(n,"width",e[23]+"%"),b(t,"class","progress-bar svelte-2qcy7t"),b(i,"class","progress-label svelte-2qcy7t")},m(g,x){re(g,t,x),C(t,n),re(g,r,x),re(g,i,x),C(i,s),C(i,o),C(i,u),C(i,l),C(i,m),C(i,h)},p(g,x){x[0]&8388608&&qe(n,"width",g[23]+"%"),x[0]&8388608&&ze(s,g[23]),x[0]&2097152&&a!==(a=mt(g[21])+"")&&ze(u,a),x[0]&4194304&&c!==(c=mt(g[22])+"")&&ze(m,c)},d(g){g&&te(t),g&&te(r),g&&te(i)}}}function Au(e){let t;return{c(){t=z("span"),t.textContent="\u2039",b(t,"class","toggle-arrow svelte-2qcy7t")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Du(e){let t;return{c(){t=z("span"),t.textContent="\u203A",b(t,"class","toggle-arrow svelte-2qcy7t")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Vr(e){let t,n,r,i,s,o,a,u,l,c,m,h,g,x,R,V,D,j,A,H,O,W,I,p,d,y,v,f,M,_,q,S,w,k,E,X,N,P,F,ee,se,ae,ue,Q,Z,fe,le,_e,we,pe,he,J=e[13].length&&Br(e),me=e[2].length&&Xr(e);function de(B){e[50](B)}function be(B){e[51](B)}let Se={min:0,max:e[24],markers:e[25]};e[7]!==void 0&&(Se.startValue=e[7]),e[8]!==void 0&&(Se.endValue=e[8]),w=new cu({props:Se}),Xe.push(()=>Gt(w,"startValue",de)),Xe.push(()=>Gt(w,"endValue",be)),w.$on("startChange",e[52]),w.$on("endChange",e[53]);function T(B,ne){return B[15]?Ru:Tu}let $=T(e),U=$(e);return{c(){t=z("div"),n=z("div"),r=z("span"),r.textContent="Filters",i=oe(),s=z("button"),s.textContent="Reset",o=oe(),a=z("div"),u=z("label"),u.textContent="Search",l=oe(),c=z("input"),m=oe(),J&&J.c(),h=oe(),me&&me.c(),g=oe(),x=z("div"),R=z("label"),R.textContent="Opacity",V=oe(),D=z("input"),j=oe(),A=z("div"),H=z("span"),H.textContent="Date range",O=oe(),W=z("div"),I=z("input"),y=oe(),v=z("span"),v.textContent="\u2013",f=oe(),M=z("input"),S=oe(),Vn(w.$$.fragment),X=oe(),N=z("div"),P=z("button"),P.textContent="-1W",F=oe(),ee=z("button"),ee.textContent="-1D",se=oe(),ae=z("button"),U.c(),ue=oe(),Q=z("button"),Q.textContent="+1D",Z=oe(),fe=z("button"),fe.textContent="+1W",le=oe(),_e=z("details"),_e.innerHTML=`<summary class="svelte-2qcy7t">About this map</summary> 
            <div class="info-content svelte-2qcy7t"><p class="svelte-2qcy7t">A semantic map shows how pieces of language relate to each other based on meaning. Each dot here represents a correction or clarification published on Factually.gov.sg. Dots with similar misinformation themes appear closer together. Explore patterns on the map by shortening the time range and scrubbing the timeline, or conducting a search.</p></div>`,b(r,"class","panel-title svelte-2qcy7t"),b(s,"class","reset-btn svelte-2qcy7t"),b(n,"class","panel-header svelte-2qcy7t"),b(u,"class","filter-label svelte-2qcy7t"),b(u,"for","search-input"),b(c,"id","search-input"),b(c,"type","text"),b(c,"class","filter-input svelte-2qcy7t"),b(c,"placeholder","Search keywords..."),b(a,"class","filter-section svelte-2qcy7t"),b(R,"class","filter-label svelte-2qcy7t"),b(R,"for","opacity-slider"),b(D,"id","opacity-slider"),b(D,"type","range"),b(D,"class","filter-range svelte-2qcy7t"),b(D,"min","0.1"),b(D,"max","1"),b(D,"step","0.05"),b(x,"class","filter-section svelte-2qcy7t"),b(H,"class","filter-label svelte-2qcy7t"),b(I,"id","start-date"),b(I,"type","date"),b(I,"class","filter-input date-input svelte-2qcy7t"),I.value=p=rt(e[4]),b(I,"max",d=rt(e[26])),b(v,"class","date-separator svelte-2qcy7t"),b(M,"id","end-date"),b(M,"type","date"),b(M,"class","filter-input date-input svelte-2qcy7t"),M.value=_=rt(e[5]),b(M,"max",q=rt(e[26])),b(W,"class","date-inputs svelte-2qcy7t"),b(P,"class","nav-btn svelte-2qcy7t"),b(ee,"class","nav-btn svelte-2qcy7t"),b(ae,"class","nav-btn play-btn svelte-2qcy7t"),b(Q,"class","nav-btn svelte-2qcy7t"),b(fe,"class","nav-btn svelte-2qcy7t"),b(N,"class","date-navigation svelte-2qcy7t"),b(A,"class","filter-section date-section svelte-2qcy7t"),b(_e,"class","info-accordion svelte-2qcy7t"),b(t,"class","panel-content svelte-2qcy7t")},m(B,ne){re(B,t,ne),C(t,n),C(n,r),C(n,i),C(n,s),C(t,o),C(t,a),C(a,u),C(a,l),C(a,c),Nt(c,e[10]),C(t,m),J&&J.m(t,null),C(t,h),me&&me.m(t,null),C(t,g),C(t,x),C(x,R),C(x,V),C(x,D),Nt(D,e[14]),C(t,j),C(t,A),C(A,H),C(A,O),C(A,W),C(W,I),C(W,y),C(W,v),C(W,f),C(W,M),C(A,S),un(w,A,null),C(A,X),C(A,N),C(N,P),C(N,F),C(N,ee),C(N,se),C(N,ae),U.m(ae,null),C(N,ue),C(N,Q),C(N,Z),C(N,fe),C(t,le),C(t,_e),we=!0,pe||(he=[ye(s,"click",e[38]),ye(c,"input",e[45]),ye(c,"input",e[36]),ye(D,"change",e[47]),ye(D,"input",e[47]),ye(D,"input",e[37]),ye(I,"change",e[48]),ye(M,"change",e[49]),ye(P,"click",e[54]),ye(ee,"click",e[55]),ye(ae,"click",e[35]),ye(Q,"click",e[56]),ye(fe,"click",e[57])],pe=!0)},p(B,ne){ne[0]&1024&&c.value!==B[10]&&Nt(c,B[10]),B[13].length?J?J.p(B,ne):(J=Br(B),J.c(),J.m(t,h)):J&&(J.d(1),J=null),B[2].length?me?me.p(B,ne):(me=Xr(B),me.c(),me.m(t,g)):me&&(me.d(1),me=null),ne[0]&16384&&Nt(D,B[14]),(!we||ne[0]&16&&p!==(p=rt(B[4])))&&(I.value=p),(!we||ne[0]&67108864&&d!==(d=rt(B[26])))&&b(I,"max",d),(!we||ne[0]&32&&_!==(_=rt(B[5])))&&(M.value=_),(!we||ne[0]&67108864&&q!==(q=rt(B[26])))&&b(M,"max",q);const ie={};ne[0]&16777216&&(ie.max=B[24]),ne[0]&33554432&&(ie.markers=B[25]),!k&&ne[0]&128&&(k=!0,ie.startValue=B[7],jt(()=>k=!1)),!E&&ne[0]&256&&(E=!0,ie.endValue=B[8],jt(()=>E=!1)),w.$set(ie),$!==($=T(B))&&(U.d(1),U=$(B),U&&(U.c(),U.m(ae,null)))},i(B){we||(Fe(w.$$.fragment,B),we=!0)},o(B){Ge(w.$$.fragment,B),we=!1},d(B){B&&te(t),J&&J.d(),me&&me.d(),cn(w),U.d(),pe=!1,$e(he)}}}function Br(e){let t,n,r,i,s,o,a,u=e[13],l=[];for(let c=0;c<u.length;c+=1)l[c]=Hr(Fr(e,u,c));return{c(){t=z("div"),n=z("label"),n.textContent="Colour by",r=oe(),i=z("select"),s=z("option"),s.textContent="Select column";for(let c=0;c<l.length;c+=1)l[c].c();b(n,"class","filter-label svelte-2qcy7t"),b(n,"for","domain-column"),s.__value="",s.value=s.__value,s.disabled=!0,b(i,"id","domain-column"),b(i,"class","filter-select svelte-2qcy7t"),e[1]===void 0&&Qt(()=>e[46].call(i)),b(t,"class","filter-section svelte-2qcy7t")},m(c,m){re(c,t,m),C(t,n),C(t,r),C(t,i),C(i,s);for(let h=0;h<l.length;h+=1)l[h].m(i,null);$n(i,e[1]),o||(a=[ye(i,"change",e[31]),ye(i,"change",e[46])],o=!0)},p(c,m){if(m[0]&536879104){u=c[13];let h;for(h=0;h<u.length;h+=1){const g=Fr(c,u,h);l[h]?l[h].p(g,m):(l[h]=Hr(g),l[h].c(),l[h].m(i,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=u.length}m[0]&8194&&$n(i,c[1])},d(c){c&&te(t),Pn(l,c),o=!1,$e(a)}}}function Hr(e){let t,n=(e[29][e[75]]||e[75])+"",r,i;return{c(){t=z("option"),r=Ee(n),t.__value=i=e[75],t.value=t.__value},m(s,o){re(s,t,o),C(t,r)},p(s,o){o[0]&8192&&n!==(n=(s[29][s[75]]||s[75])+"")&&ze(r,n),o[0]&8192&&i!==(i=s[75])&&(t.__value=i,t.value=t.__value)},d(s){s&&te(t)}}}function Xr(e){let t,n,r,i,s,o,a,u,l,c=e[2],m=[];for(let h=0;h<c.length;h+=1)m[h]=Ur(Pr(e,c,h));return{c(){t=z("div"),n=z("label"),n.textContent="Highlight",r=oe(),i=z("select"),s=z("option"),o=Ee("\u2605 Show All");for(let h=0;h<m.length;h+=1)m[h].c();b(n,"class","filter-label svelte-2qcy7t"),b(n,"for","value-select"),s.__value="__ALL__",s.value=s.__value,s.selected=a=e[3].size===0,b(i,"id","value-select"),i.multiple=!0,b(i,"size","5"),b(i,"class","filter-select multi-select svelte-2qcy7t"),b(t,"class","filter-section svelte-2qcy7t")},m(h,g){re(h,t,g),C(t,n),C(t,r),C(t,i),C(i,s),C(s,o);for(let x=0;x<m.length;x+=1)m[x].m(i,null);u||(l=ye(i,"change",e[32]),u=!0)},p(h,g){if(g[0]&8&&a!==(a=h[3].size===0)&&(s.selected=a),g[0]&1073741836){c=h[2];let x;for(x=0;x<c.length;x+=1){const R=Pr(h,c,x);m[x]?m[x].p(R,g):(m[x]=Ur(R),m[x].c(),m[x].m(i,null))}for(;x<m.length;x+=1)m[x].d(1);m.length=c.length}},d(h){h&&te(t),Pn(m,h),u=!1,l()}}}function Ur(e){let t,n=e[30](e[72])+"",r,i,s;return{c(){t=z("option"),r=Ee(n),t.__value=i=e[72],t.value=t.__value,t.selected=s=e[3].has(e[72])},m(o,a){re(o,t,a),C(t,r)},p(o,a){a[0]&4&&n!==(n=o[30](o[72])+"")&&ze(r,n),a[0]&4&&i!==(i=o[72])&&(t.__value=i,t.value=t.__value),a[0]&12&&s!==(s=o[3].has(o[72]))&&(t.selected=s)},d(o){o&&te(t)}}}function Tu(e){let t;return{c(){t=Ee("\u25B6")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Ru(e){let t;return{c(){t=Ee("\u23F8")},m(n,r){re(n,t,r)},d(n){n&&te(t)}}}function Yr(e){let t,n,r,i,s,o,a;return i=new _u({props:{hoveredData:e[28],data:e[0],domainColumn:e[1],colorScale:e[27],searchQuery:e[10],isPinned:!!e[12]}}),i.$on("unpin",e[59]),{c(){t=z("button"),t.textContent="\xD7",n=oe(),r=z("div"),Vn(i.$$.fragment),b(t,"class","panel-close svelte-2qcy7t"),b(t,"aria-label","Close"),b(r,"class","panel-content svelte-2qcy7t")},m(u,l){re(u,t,l),re(u,n,l),re(u,r,l),un(i,r,null),s=!0,o||(a=ye(t,"click",e[58]),o=!0)},p(u,l){const c={};l[0]&268435456&&(c.hoveredData=u[28]),l[0]&1&&(c.data=u[0]),l[0]&2&&(c.domainColumn=u[1]),l[0]&134217728&&(c.colorScale=u[27]),l[0]&1024&&(c.searchQuery=u[10]),l[0]&4096&&(c.isPinned=!!u[12]),i.$set(c)},i(u){s||(Fe(i.$$.fragment,u),s=!0)},o(u){Ge(i.$$.fragment,u),s=!1},d(u){u&&te(t),u&&te(n),u&&te(r),cn(i),o=!1,a()}}}function qu(e){let t,n,r,i,s,o,a,u,l,c,m,h,g,x,R,V;const D=[vu,wu,yu],j=[];function A(d,y){return d[6].length?0:d[19]?1:2}o=A(e),a=j[o]=D[o](e);function H(d,y){return d[18]?Du:Au}let O=H(e),W=O(e),I=!e[18]&&Vr(e),p=e[28]&&Yr(e);return{c(){t=z("div"),n=z("header"),n.innerHTML=`<div class="title-row svelte-2qcy7t"><h1 class="title svelte-2qcy7t">What Factually Moves to Correct \u{1F440}</h1> 
      <div class="header-right svelte-2qcy7t"><a href="https://github.com/wongpeiting/factually-semantic-map" target="_blank" rel="noopener noreferrer" class="help-btn svelte-2qcy7t" title="View on GitHub">?</a> 
        <span class="data-date svelte-2qcy7t">Data as of Feb 5, 2026.</span></div></div> 
    <p class="tagline svelte-2qcy7t">Drawing on cases published on Factually \u2014 Singapore&#39;s state-run fact-checking site used alongside the Protection from Online Falsehoods and Manipulation Act (POFMA) \u2014 this semantic map shows how government-identified falsehoods cluster.</p> 
    <p class="subtitle svelte-2qcy7t">Each dot represents a disputed claim, revealing where official corrections concentrate.</p>`,r=oe(),i=z("main"),s=z("div"),a.c(),u=oe(),l=z("aside"),c=z("button"),W.c(),m=oe(),I&&I.c(),h=oe(),g=z("aside"),p&&p.c(),b(n,"class","header svelte-2qcy7t"),b(s,"class","scatterplot-wrapper svelte-2qcy7t"),b(c,"class","panel-toggle svelte-2qcy7t"),b(c,"aria-label","Toggle filters"),b(l,"class","floating-panel filter-panel svelte-2qcy7t"),Lt(l,"collapsed",e[18]),b(g,"class","floating-panel detail-panel svelte-2qcy7t"),Lt(g,"visible",!!e[28]),b(i,"class","main-content svelte-2qcy7t"),b(t,"class","app-container svelte-2qcy7t")},m(d,y){re(d,t,y),C(t,n),C(t,r),C(t,i),C(i,s),j[o].m(s,null),C(i,u),C(i,l),C(l,c),W.m(c,null),C(l,m),I&&I.m(l,null),C(i,h),C(i,g),p&&p.m(g,null),x=!0,R||(V=ye(c,"click",e[44]),R=!0)},p(d,y){let v=o;o=A(d),o===v?j[o].p(d,y):(_n(),Ge(j[v],1,1,()=>{j[v]=null}),yn(),a=j[o],a?a.p(d,y):(a=j[o]=D[o](d),a.c()),Fe(a,1),a.m(s,null)),O!==(O=H(d))&&(W.d(1),W=O(d),W&&(W.c(),W.m(c,null))),d[18]?I&&(_n(),Ge(I,1,1,()=>{I=null}),yn()):I?(I.p(d,y),y[0]&262144&&Fe(I,1)):(I=Vr(d),I.c(),Fe(I,1),I.m(l,null)),(!x||y[0]&262144)&&Lt(l,"collapsed",d[18]),d[28]?p?(p.p(d,y),y[0]&268435456&&Fe(p,1)):(p=Yr(d),p.c(),Fe(p,1),p.m(g,null)):p&&(_n(),Ge(p,1,1,()=>{p=null}),yn()),(!x||y[0]&268435456)&&Lt(g,"visible",!!d[28])},i(d){x||(Fe(a),Fe(I),Fe(p),x=!0)},o(d){Ge(a),Ge(I),Ge(p),x=!1},d(d){d&&te(t),j[o].d(),W.d(),I&&I.d(),p&&p.d(),R=!1,V()}}}function Nu(){try{const e=new URLSearchParams(window.location.search),t=e.get("url"),n=e.get("filename"),r=e.get("bucket");if(t&&/^https?:\/\//i.test(t))return t;if(n){let i="";return r?/^https?:\/\//i.test(r)?i=r:r.includes(".")?i=`https://${r}`:i=`https://${r}.s3.amazonaws.com`:i={BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_S3_BASE_URL||{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_BASE_URL||"https://pink-slime-public.s3.amazonaws.com/",i&&!i.endsWith("/")&&(i+="/"),i?i+n:n}return{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}catch(e){return console.warn("Failed to resolve data URL from query params:",e),{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}}function mt(e){if(!e||e<=0)return"0 KB";const t=["B","KB","MB","GB","TB"];let n=e,r=0;for(;n>=1024&&r<t.length-1;)n/=1024,r++;const i=r===0?0:1;return`${n.toFixed(i)} ${t[r]}`}function rt(e){return e?e.toISOString().split("T")[0]:""}function Lu(e,t,n){let r,i,s,o,a,u,l="",c=[],m=[],h="target",g=[],x=new Set,R=.6,V=null,D=null,j=[],A=[],H=0,O=0,W=!1,I=null,p=[],d="",y=!1,v=null,f=[],M=null,_=!1;const q={target:"Directed at",directed_at:"Directed at",org:"Organisation",state:"State",pofma_ed:"POFMA ED"},S=["General Clarification","General Explainer"];function w(L){if(!L)return L;const K=String(L),Y=K.match(/^(.+?)\s*\(Read:\s*.+?\)\s*$/),G=Y?Y[1].trim():K;return S.includes(G)?`\u2605 ${G}`:G}const k=[{date:new Date("2020-07-10"),label:"GE2020"},{date:new Date("2025-05-03"),label:"GE2025"}];let E=!1,X="idle",N=0,P=0,F=0;Fn(async()=>{try{n(19,E=!0),n(20,X="downloading"),n(21,N=0),n(22,P=0),n(23,F=0),n(39,l=Nu()),console.log("Loading data from:",l);const L=await fetch(l,{mode:"cors",cache:"no-store"});if(!L.ok)throw new Error(`HTTP ${L.status}`);const K=L.headers.get("content-length");n(22,P=K?parseInt(K,10):0);let Y="";if(L.body&&L.body.getReader){const G=L.body.getReader(),xe=[];let De=0;for(;;){const{done:Ae,value:Pe}=await G.read();if(Ae)break;xe.push(Pe),De+=Pe.byteLength,n(21,N=De),P&&n(23,F=Math.round(De/P*100))}const Te=new Uint8Array(De);let Re=0;for(const Ae of xe)Te.set(Ae,Re),Re+=Ae.byteLength;Y=new TextDecoder().decode(Te),console.log("CSV head:",Y.split(`
`).slice(0,5).join(`
`))}else Y=await L.text();n(20,X="parsing"),await Promise.resolve(ee(Y));try{const G=await fetch("cluster_labels.json");G.ok&&(n(17,f=await G.json()),console.log("Loaded cluster labels:",f))}catch(G){console.warn("Could not load cluster labels:",G)}n(20,X="idle")}catch(L){console.error("Failed to load CSV:",L)}finally{n(19,E=!1)}return()=>{I&&clearInterval(I)}});function ee(L){const K=L.split(/\r?\n/);if(K.length>0){const xe=K[0].split(",").map(De=>De.trim().toLowerCase()).join(",");K[0]=xe,L=K.join(`
`)}const Y=Xi.parse(L,{header:!0});console.log("Parsed CSV fields:",Y.meta.fields),console.log("Parsed rows (before filter):",Y.data.length),console.log("Sample row:",Y.data[0]),n(0,c=Y.data.filter(G=>G.x&&G.y&&G.date).map((G,xe)=>({...G,x:+G.x,y:+G.y,date:new Date(G.date),id:xe}))),console.log("Data after filter:",c.length),console.log("Sample data point:",c[0]),console.log("domainColumn:",h),console.log("columns:",m),console.log("allDates:",A.length,"from",A[0],"to",A[A.length-1]),n(40,m=Y.meta.fields||[]),n(41,A=[...new Set(c.map(G=>G.date.getTime()))].sort((G,xe)=>G-xe).map(G=>new Date(G))),n(4,V=A[0]),n(5,D=A[A.length-1]),n(7,H=0),n(8,O=A.length-1),Q(),h&&n(2,g=[...new Set(c.map(G=>G[h]).filter(G=>G!=null&&G!==""))].sort((G,xe)=>String(G).localeCompare(String(xe))))}function se(L){n(1,h=L.target.value),n(2,g=h?[...new Set(c.map(K=>K[h]).filter(Boolean))].sort((K,Y)=>String(K).localeCompare(String(Y))):[]),n(3,x=new Set),n(16,y=!1)}function ae(L){const K=[...L.target.selectedOptions].map(xe=>xe.value),Y=K.includes("__ALL__"),G=K.length===g.length;Y||G||K.length===0?(n(3,x=new Set),n(9,p=[])):(n(3,x=new Set(K)),n(9,p=c.filter(xe=>x.has(xe[h])&&(!V||xe.date>=V)&&(!D||xe.date<=D)))),n(16,y=!1)}function ue(L,K,Y=!1){Y?(n(4,V=A[L]||A[0]),n(5,D=A[K]||A[A.length-1])):(n(4,V=L),n(5,D=K)),n(16,y=!1),Q()}function Q(){if(V){const L=V.getTime();n(7,H=Math.max(0,A.findIndex(K=>K.getTime()>=L)))}else n(7,H=0);if(D){const L=D.getTime();let K=-1;for(let Y=A.length-1;Y>=0;Y--)if(A[Y].getTime()<=L){K=Y;break}n(8,O=K>=0?K:A.length-1)}else n(8,O=A.length-1);H>O&&n(7,H=O),O<H&&n(8,O=H)}function Z(L,K){if(L.detail!==void 0)K==="start"?(n(7,H=L.detail),H>O&&n(7,H=O)):(n(8,O=L.detail),O<H&&n(8,O=H)),ue(H,O,!0);else{const Y=L.target.value?new Date(L.target.value):null;K==="start"?ue(Y,D):ue(V,Y),Q()}}function fe(L){const K=O-H;let Y=H+L,G=O+L;Y<0&&(Y=0,G=Math.min(K,A.length-1)),G>=A.length&&(G=A.length-1,Y=Math.max(0,G-K)),n(7,H=Y),n(8,O=G),ue(H,O,!0)}function le(){W?(clearInterval(I),n(15,W=!1)):(n(15,W=!0),n(16,y=!1),I=setInterval(()=>{if(O>=A.length-1){clearInterval(I),n(15,W=!1);return}fe(1)},500))}function _e(L){n(10,d=L.target.value),n(16,y=!1)}function we(){n(16,y=!1)}function pe(){W&&I&&(clearInterval(I),n(15,W=!1));const L=m.includes("target")?"target":m.includes("org")?"org":o[0]||"";n(1,h=L),n(3,x=new Set),n(9,p=[]),n(10,d=""),n(16,y=!1),n(14,R=.02),n(14,R=+R),A.length?(n(7,H=0),n(8,O=A.length-1),ue(H,O,!0)):(n(4,V=null),n(5,D=null),n(7,H=0),n(8,O=0))}function he(L){v=L,n(11,v)}function J(L){M=L,n(12,M)}const me=()=>n(18,_=!_);function de(){d=this.value,n(10,d)}function be(){h=zi(this),n(1,h),n(40,m),n(13,o),n(13,o),n(40,m)}function Se(){R=Li(this.value),n(14,R)}const T=L=>Z(L,"start"),$=L=>Z(L,"end");function U(L){H=L,n(7,H)}function B(L){O=L,n(8,O)}const ne=L=>Z(L,"start"),ie=L=>Z(L,"end"),ge=()=>fe(-7),ke=()=>fe(-1),ve=()=>fe(1),ce=()=>fe(7),Me=()=>n(12,M=null),Ce=()=>n(12,M=null);return e.$$.update=()=>{if(e.$$.dirty[1]&256&&/^https?:\/\//i.test(l),e.$$.dirty[0]&512&&new Set(p.map(L=>L.id)),e.$$.dirty[0]&6144&&n(28,r=M||v),e.$$.dirty[1]&512&&n(13,o=m.filter(L=>L==="target"||L==="org"||L==="state"||L==="pofma_ed"||L==="directed_at")),e.$$.dirty[0]&8194|e.$$.dirty[1]&512&&(!m||m.length===0||(o.length&&!o.includes(h)?n(1,h=o[0]):o.length===0&&n(1,h=""))),e.$$.dirty[0]&3&&h&&c.length>0&&n(2,g=[...new Set(c.flatMap(L=>{const K=L[h];if(K==null||K==="")return[];const Y=String(K);return Y.startsWith("No target;")?[Y]:Y.includes(";")?Y.split(";").map(G=>G.trim()):[Y]}))].sort((L,K)=>String(L).localeCompare(String(K)))),e.$$.dirty[0]&6&&n(27,i=Bn(fi).domain(h?g:[])),e.$$.dirty[1]&1024&&A.length>0&&A[0],e.$$.dirty[1]&1024&&n(26,s=A.length>0?A[A.length-1]:null),e.$$.dirty[1]&1024&&n(25,a=A.length>0?k.map(L=>{let K=0,Y=1/0;return A.forEach((G,xe)=>{const De=Math.abs(G.getTime()-L.date.getTime());De<Y&&(Y=De,K=xe)}),{index:K,label:L.label}}).filter(L=>L.index>=0&&L.index<=A.length-1):[]),e.$$.dirty[0]&1535|e.$$.dirty[1]&1024){A.length&&H===0&&A.length-1;const L=x.size>0&&x.size<g.length,K=d&&d.trim().length>0;n(6,j=c.map(Y=>{var Re,Ae,Pe,Ye,Ve,Qe,et,tt,ft;const G=(!V||Y.date>=V)&&(!D||Y.date<=D);let xe=!0;if(L){const Le=(Re=Y[h])!=null?Re:"";Le.startsWith("No target;")?xe=x.has(Le):xe=x.has(Le)||[...x].some(qi=>Le.includes(qi))}let De=!0;if(K)try{const Le=new RegExp(d,"i");De=Le.test((Ae=Y.title)!=null?Ae:"")||Le.test((Pe=Y.text)!=null?Pe:"")||Le.test((Ye=Y.article_text)!=null?Ye:"")||Le.test((Ve=Y.summary)!=null?Ve:"")}catch{const Le=d.toLowerCase();De=((Qe=Y.title)!=null?Qe:"").toLowerCase().includes(Le)||((et=Y.text)!=null?et:"").toLowerCase().includes(Le)||((tt=Y.article_text)!=null?tt:"").toLowerCase().includes(Le)||((ft=Y.summary)!=null?ft:"").toLowerCase().includes(Le)}const Te=G&&xe&&De;return{...Y,isActive:Te,isHighlighted:Te}})),console.log("filteredData length:",j.length,"active:",j.filter(Y=>Y.isActive).length)}e.$$.dirty[0]&128|e.$$.dirty[1]&1024&&A.length>1&&H/(A.length-1)*100,e.$$.dirty[0]&256|e.$$.dirty[1]&1024&&A.length>1&&O/(A.length-1)*100,e.$$.dirty[1]&1024&&n(24,u=A.length>0?A.length-1:0)},[c,h,g,x,V,D,j,H,O,p,d,v,M,o,R,W,y,f,_,E,X,N,P,F,u,a,s,i,r,q,w,se,ae,Z,fe,le,_e,we,pe,l,m,A,he,J,me,de,be,Se,T,$,U,B,ne,ie,ge,ke,ve,ce,Me,Ce]}class Iu extends hn{constructor(t){super(),fn(this,t,Lu,qu,an,{},null,[-1,-1,-1])}}new Iu({target:document.getElementById("app")});
