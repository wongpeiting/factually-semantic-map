(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ne(){}function Ur(e){return e()}function Jn(){return Object.create(null)}function Je(e){e.forEach(Ur)}function Yr(e){return typeof e=="function"}function ln(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ni(e){return Object.keys(e).length===0}function D(e,t){e.appendChild(t)}function te(e,t,n){e.insertBefore(t,n||null)}function ee(e){e.parentNode.removeChild(e)}function Pn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function P(e){return document.createElement(e)}function Me(e){return document.createTextNode(e)}function oe(){return Me(" ")}function Wr(){return Me("")}function be(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function k(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Li(e){return e===""?null:+e}function Ii(e){return Array.from(e.childNodes)}function Pe(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Rt(e,t){e.value=t==null?"":t}function Re(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function $n(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t){r.selected=!0;return}}e.selectedIndex=-1}function zi(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function Nt(e,t,n){e.classList[n?"add":"remove"](t)}function Oi(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}let Mt;function St(e){Mt=e}function Kr(){if(!Mt)throw new Error("Function called outside component initialization");return Mt}function Fn(e){Kr().$$.on_mount.push(e)}function Qr(){const e=Kr();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Oi(t,n,{cancelable:r});return i.slice().forEach(s=>{s.call(e,o)}),!o.defaultPrevented}return!0}}const bt=[],Be=[],jt=[],bn=[],Pi=Promise.resolve();let kn=!1;function Fi(){kn||(kn=!0,Pi.then(Gr))}function Yt(e){jt.push(e)}function Wt(e){bn.push(e)}const mn=new Set;let Lt=0;function Gr(){const e=Mt;do{for(;Lt<bt.length;){const t=bt[Lt];Lt++,St(t),ji(t.$$)}for(St(null),bt.length=0,Lt=0;Be.length;)Be.pop()();for(let t=0;t<jt.length;t+=1){const n=jt[t];mn.has(n)||(mn.add(n),n())}jt.length=0}while(bt.length);for(;bn.length;)bn.pop()();kn=!1,mn.clear(),St(e)}function ji(e){if(e.fragment!==null){e.update(),Je(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Yt)}}const Vt=new Set;let ot;function gn(){ot={r:0,c:[],p:ot}}function _n(){ot.r||Je(ot.c),ot=ot.p}function je(e,t){e&&e.i&&(Vt.delete(e),e.i(t))}function Qe(e,t,n,r){if(e&&e.o){if(Vt.has(e))return;Vt.add(e),ot.c.push(()=>{Vt.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Kt(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function jn(e){e&&e.c()}function an(e,t,n,r){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),r||Yt(()=>{const s=e.$$.on_mount.map(Ur).filter(Yr);e.$$.on_destroy?e.$$.on_destroy.push(...s):Je(s),e.$$.on_mount=[]}),o.forEach(Yt)}function un(e,t){const n=e.$$;n.fragment!==null&&(Je(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Vi(e,t){e.$$.dirty[0]===-1&&(bt.push(e),Fi(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fn(e,t,n,r,i,o,s,a=[-1]){const u=Mt;St(e);const l=e.$$={fragment:null,ctx:[],props:o,update:Ne,not_equal:i,bound:Jn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Jn(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};s&&s(l.root);let f=!1;if(l.ctx=n?n(e,t.props||{},(p,d,...g)=>{const b=g.length?g[0]:d;return l.ctx&&i(l.ctx[p],l.ctx[p]=b)&&(!l.skip_bound&&l.bound[p]&&l.bound[p](b),f&&Vi(e,p)),d}):[],l.update(),f=!0,Je(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const p=Ii(t.target);l.fragment&&l.fragment.l(p),p.forEach(ee)}else l.fragment&&l.fragment.c();t.intro&&je(e.$$.fragment),an(e,t.target,t.anchor,t.customElement),Gr()}St(u)}class cn{$destroy(){un(this,1),this.$destroy=Ne}$on(t,n){if(!Yr(n))return Ne;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Ni(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var qi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zr={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,r)=>{e.exports=r()})(qi,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,o=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,a={},u=0,l={};function f(c){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(h){var y=j(h);y.chunkSize=parseInt(y.chunkSize),h.step||h.chunk||(y.chunkSize=null),this._handle=new R(y),(this._handle.streamer=this)._config=y}.call(this,c),this.parseChunk=function(h,y){var x=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<x){let V=this._config.newline;V||(m=this._config.quoteChar||'"',V=this._handle.guessLineEndings(h,m)),h=[...h.split(V).slice(x)].join(V)}this.isFirstChunk&&A(this._config.beforeFirstChunk)&&(m=this._config.beforeFirstChunk(h))!==void 0&&(h=m),this.isFirstChunk=!1,this._halted=!1;var x=this._partialLine+h,m=(this._partialLine="",this._handle.parse(x,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(h=m.meta.cursor,x=(this._finished||(this._partialLine=x.substring(h-this._baseIndex),this._baseIndex=h),m&&m.data&&(this._rowCount+=m.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)r.postMessage({results:m,workerId:l.WORKER_ID,finished:x});else if(A(this._config.chunk)&&!y){if(this._config.chunk(m,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=m=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(m.data),this._completeResults.errors=this._completeResults.errors.concat(m.errors),this._completeResults.meta=m.meta),this._completed||!x||!A(this._config.complete)||m&&m.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),x||m&&m.meta.paused||this._nextChunk(),m}this._halted=!0},this._sendError=function(h){A(this._config.error)?this._config.error(h):s&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:h,finished:!1})}}function p(c){var h;(c=c||{}).chunkSize||(c.chunkSize=l.RemoteChunkSize),f.call(this,c),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(y){this._input=y,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(h=new XMLHttpRequest,this._config.withCredentials&&(h.withCredentials=this._config.withCredentials),o||(h.onload=q(this._chunkLoaded,this),h.onerror=q(this._chunkError,this)),h.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var y,x=this._config.downloadRequestHeaders;for(y in x)h.setRequestHeader(y,x[y])}var m;this._config.chunkSize&&(m=this._start+this._config.chunkSize-1,h.setRequestHeader("Range","bytes="+this._start+"-"+m));try{h.send(this._config.downloadRequestBody)}catch(V){this._chunkError(V.message)}o&&h.status===0&&this._chunkError()}},this._chunkLoaded=function(){h.readyState===4&&(h.status<200||400<=h.status?this._chunkError():(this._start+=this._config.chunkSize||h.responseText.length,this._finished=!this._config.chunkSize||this._start>=(y=>(y=y.getResponseHeader("Content-Range"))!==null?parseInt(y.substring(y.lastIndexOf("/")+1)):-1)(h),this.parseChunk(h.responseText)))},this._chunkError=function(y){y=h.statusText||y,this._sendError(new Error(y))}}function d(c){(c=c||{}).chunkSize||(c.chunkSize=l.LocalChunkSize),f.call(this,c);var h,y,x=typeof FileReader<"u";this.stream=function(m){this._input=m,y=m.slice||m.webkitSlice||m.mozSlice,x?((h=new FileReader).onload=q(this._chunkLoaded,this),h.onerror=q(this._chunkError,this)):h=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var m=this._input,V=(this._config.chunkSize&&(V=Math.min(this._start+this._config.chunkSize,this._input.size),m=y.call(m,this._start,V)),h.readAsText(m,this._config.encoding));x||this._chunkLoaded({target:{result:V}})},this._chunkLoaded=function(m){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(m.target.result)},this._chunkError=function(){this._sendError(h.error)}}function g(c){var h;f.call(this,c=c||{}),this.stream=function(y){return h=y,this._nextChunk()},this._nextChunk=function(){var y,x;if(!this._finished)return y=this._config.chunkSize,h=y?(x=h.substring(0,y),h.substring(y)):(x=h,""),this._finished=!h,this.parseChunk(x)}}function b(c){f.call(this,c=c||{});var h=[],y=!0,x=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(m){this._input=m,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){x&&h.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),h.length?this.parseChunk(h.shift()):y=!0},this._streamData=q(function(m){try{h.push(typeof m=="string"?m:m.toString(this._config.encoding)),y&&(y=!1,this._checkIsFinished(),this.parseChunk(h.shift()))}catch(V){this._streamError(V)}},this),this._streamError=q(function(m){this._streamCleanUp(),this._sendError(m)},this),this._streamEnd=q(function(){this._streamCleanUp(),x=!0,this._streamData("")},this),this._streamCleanUp=q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function R(c){var h,y,x,m,V=Math.pow(2,53),_=-V,L=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,S=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,w=this,v=0,M=0,B=!1,T=!1,O=[],F={data:[],errors:[],meta:{}};function $(K){return c.skipEmptyLines==="greedy"?K.join("").trim()==="":K.length===1&&K[0].length===0}function ie(){if(F&&x&&(ue("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),x=!1),c.skipEmptyLines&&(F.data=F.data.filter(function(_e){return!$(_e)})),le()){let _e=function(ge,ye){A(c.transformHeader)&&(ge=c.transformHeader(ge,ye)),O.push(ge)};var se=_e;if(F)if(Array.isArray(F.data[0])){for(var K=0;le()&&K<F.data.length;K++)F.data[K].forEach(_e);F.data.splice(0,1)}else F.data.forEach(_e)}function Z(_e,ge){for(var ye=c.header?{}:[],de=0;de<_e.length;de++){var Q=de,pe=_e[de],pe=((he,ke)=>(E=>(c.dynamicTypingFunction&&c.dynamicTyping[E]===void 0&&(c.dynamicTyping[E]=c.dynamicTypingFunction(E)),(c.dynamicTyping[E]||c.dynamicTyping)===!0))(he)?ke==="true"||ke==="TRUE"||ke!=="false"&&ke!=="FALSE"&&((E=>{if(L.test(E)&&(E=parseFloat(E),_<E&&E<V))return 1})(ke)?parseFloat(ke):S.test(ke)?new Date(ke):ke===""?null:ke):ke)(Q=c.header?de>=O.length?"__parsed_extra":O[de]:Q,pe=c.transform?c.transform(pe,Q):pe);Q==="__parsed_extra"?(ye[Q]=ye[Q]||[],ye[Q].push(pe)):ye[Q]=pe}return c.header&&(de>O.length?ue("FieldMismatch","TooManyFields","Too many fields: expected "+O.length+" fields but parsed "+de,M+ge):de<O.length&&ue("FieldMismatch","TooFewFields","Too few fields: expected "+O.length+" fields but parsed "+de,M+ge)),ye}var ce;F&&(c.header||c.dynamicTyping||c.transform)&&(ce=1,!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(Z),ce=F.data.length):F.data=Z(F.data,0),c.header&&F.meta&&(F.meta.fields=O),M+=ce)}function le(){return c.header&&O.length===0}function ue(K,Z,ce,se){K={type:K,code:Z,message:ce},se!==void 0&&(K.row=se),F.errors.push(K)}A(c.step)&&(m=c.step,c.step=function(K){F=K,le()?ie():(ie(),F.data.length!==0&&(v+=K.data.length,c.preview&&v>c.preview?y.abort():(F.data=F.data[0],m(F,w))))}),this.parse=function(K,Z,ce){var se=c.quoteChar||'"',se=(c.newline||(c.newline=this.guessLineEndings(K,se)),x=!1,c.delimiter?A(c.delimiter)&&(c.delimiter=c.delimiter(K),F.meta.delimiter=c.delimiter):((se=((_e,ge,ye,de,Q)=>{var pe,he,ke,E;Q=Q||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var re=0;re<Q.length;re++){for(var Y,fe=Q[re],H=0,ne=0,ae=0,we=(ke=void 0,new C({comments:de,delimiter:fe,newline:ge,preview:10}).parse(_e)),ve=0;ve<we.data.length;ve++)ye&&$(we.data[ve])?ae++:(Y=we.data[ve].length,ne+=Y,ke===void 0?ke=Y:0<Y&&(H+=Math.abs(Y-ke),ke=Y));0<we.data.length&&(ne/=we.data.length-ae),(he===void 0||H<=he)&&(E===void 0||E<ne)&&1.99<ne&&(he=H,pe=fe,E=ne)}return{successful:!!(c.delimiter=pe),bestDelimiter:pe}})(K,c.newline,c.skipEmptyLines,c.comments,c.delimitersToGuess)).successful?c.delimiter=se.bestDelimiter:(x=!0,c.delimiter=l.DefaultDelimiter),F.meta.delimiter=c.delimiter),j(c));return c.preview&&c.header&&se.preview++,h=K,y=new C(se),F=y.parse(h,Z,ce),ie(),B?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return B},this.pause=function(){B=!0,y.abort(),h=A(c.chunk)?"":h.substring(y.getCharIndex())},this.resume=function(){w.streamer._halted?(B=!1,w.streamer.parseChunk(h,!0)):setTimeout(w.resume,3)},this.aborted=function(){return T},this.abort=function(){T=!0,y.abort(),F.meta.aborted=!0,A(c.complete)&&c.complete(F),h=""},this.guessLineEndings=function(_e,se){_e=_e.substring(0,1048576);var se=new RegExp(I(se)+"([^]*?)"+I(se),"gm"),ce=(_e=_e.replace(se,"")).split("\r"),se=_e.split(`
`),_e=1<se.length&&se[0].length<ce[0].length;if(ce.length===1||_e)return`
`;for(var ge=0,ye=0;ye<ce.length;ye++)ce[ye][0]===`
`&&ge++;return ge>=ce.length/2?`\r
`:"\r"}}function I(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function C(c){var h=(c=c||{}).delimiter,y=c.newline,x=c.comments,m=c.step,V=c.preview,_=c.fastMode,L=null,S=!1,w=c.quoteChar==null?'"':c.quoteChar,v=w;if(c.escapeChar!==void 0&&(v=c.escapeChar),(typeof h!="string"||-1<l.BAD_DELIMITERS.indexOf(h))&&(h=","),x===h)throw new Error("Comment character same as delimiter");x===!0?x="#":(typeof x!="string"||-1<l.BAD_DELIMITERS.indexOf(x))&&(x=!1),y!==`
`&&y!=="\r"&&y!==`\r
`&&(y=`
`);var M=0,B=!1;this.parse=function(T,O,F){if(typeof T!="string")throw new Error("Input must be a string");var $=T.length,ie=h.length,le=y.length,ue=x.length,K=A(m),Z=[],ce=[],se=[],_e=M=0;if(!T)return H();if(_||_!==!1&&T.indexOf(w)===-1){for(var ge=T.split(y),ye=0;ye<ge.length;ye++){if(se=ge[ye],M+=se.length,ye!==ge.length-1)M+=y.length;else if(F)return H();if(!x||se.substring(0,ue)!==x){if(K){if(Z=[],E(se.split(h)),ne(),B)return H()}else E(se.split(h));if(V&&V<=ye)return Z=Z.slice(0,V),H(!0)}}return H()}for(var de=T.indexOf(h,M),Q=T.indexOf(y,M),pe=new RegExp(I(v)+I(w),"g"),he=T.indexOf(w,M);;)if(T[M]===w)for(he=M,M++;;){if((he=T.indexOf(w,he+1))===-1)return F||ce.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Z.length,index:M}),Y();if(he===$-1)return Y(T.substring(M,he).replace(pe,w));if(w===v&&T[he+1]===v)he++;else if(w===v||he===0||T[he-1]!==v){de!==-1&&de<he+1&&(de=T.indexOf(h,he+1));var ke=re((Q=Q!==-1&&Q<he+1?T.indexOf(y,he+1):Q)===-1?de:Math.min(de,Q));if(T.substr(he+1+ke,ie)===h){se.push(T.substring(M,he).replace(pe,w)),T[M=he+1+ke+ie]!==w&&(he=T.indexOf(w,M)),de=T.indexOf(h,M),Q=T.indexOf(y,M);break}if(ke=re(Q),T.substring(he+1+ke,he+1+ke+le)===y){if(se.push(T.substring(M,he).replace(pe,w)),fe(he+1+ke+le),de=T.indexOf(h,M),he=T.indexOf(w,M),K&&(ne(),B))return H();if(V&&Z.length>=V)return H(!0);break}ce.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Z.length,index:M}),he++}}else if(x&&se.length===0&&T.substring(M,M+ue)===x){if(Q===-1)return H();M=Q+le,Q=T.indexOf(y,M),de=T.indexOf(h,M)}else if(de!==-1&&(de<Q||Q===-1))se.push(T.substring(M,de)),M=de+ie,de=T.indexOf(h,M);else{if(Q===-1)break;if(se.push(T.substring(M,Q)),fe(Q+le),K&&(ne(),B))return H();if(V&&Z.length>=V)return H(!0)}return Y();function E(ae){Z.push(ae),_e=M}function re(ae){var we=0;return we=ae!==-1&&(ae=T.substring(he+1,ae))&&ae.trim()===""?ae.length:we}function Y(ae){return F||(ae===void 0&&(ae=T.substring(M)),se.push(ae),M=$,E(se),K&&ne()),H()}function fe(ae){M=ae,E(se),se=[],Q=T.indexOf(y,M)}function H(ae){if(c.header&&!O&&Z.length&&!S){var we=Z[0],ve={},me=new Set(we);let Te=!1;for(let Ae=0;Ae<we.length;Ae++){let Ee=we[Ae];if(ve[Ee=A(c.transformHeader)?c.transformHeader(Ee,Ae):Ee]){let z,W=ve[Ee];for(;z=Ee+"_"+W,W++,me.has(z););me.add(z),we[Ae]=z,ve[Ee]++,Te=!0,(L=L===null?{}:L)[z]=Ee}else ve[Ee]=1,we[Ae]=Ee;me.add(Ee)}Te&&console.warn("Duplicate headers found and renamed."),S=!0}return{data:Z,errors:ce,meta:{delimiter:h,linebreak:y,aborted:B,truncated:!!ae,cursor:_e+(O||0),renamedHeaders:L}}}function ne(){m(H()),Z=[],ce=[]}},this.abort=function(){B=!0},this.getCharIndex=function(){return M}}function G(c){var h=c.data,y=a[h.workerId],x=!1;if(h.error)y.userError(h.error,h.file);else if(h.results&&h.results.data){var m={abort:function(){x=!0,N(h.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:X,resume:X};if(A(y.userStep)){for(var V=0;V<h.results.data.length&&(y.userStep({data:h.results.data[V],errors:h.results.errors,meta:h.results.meta},m),!x);V++);delete h.results}else A(y.userChunk)&&(y.userChunk(h.results,m,h.file),delete h.results)}h.finished&&!x&&N(h.workerId,h.results)}function N(c,h){var y=a[c];A(y.userComplete)&&y.userComplete(h),y.terminate(),delete a[c]}function X(){throw new Error("Not implemented.")}function j(c){if(typeof c!="object"||c===null)return c;var h,y=Array.isArray(c)?[]:{};for(h in c)y[h]=j(c[h]);return y}function q(c,h){return function(){c.apply(h,arguments)}}function A(c){return typeof c=="function"}return l.parse=function(c,h){var y=(h=h||{}).dynamicTyping||!1;if(A(y)&&(h.dynamicTypingFunction=y,y={}),h.dynamicTyping=y,h.transform=!!A(h.transform)&&h.transform,!h.worker||!l.WORKERS_SUPPORTED)return y=null,l.NODE_STREAM_INPUT,typeof c=="string"?(c=(x=>x.charCodeAt(0)!==65279?x:x.slice(1))(c),y=new(h.download?p:g)(h)):c.readable===!0&&A(c.read)&&A(c.on)?y=new b(h):(r.File&&c instanceof File||c instanceof Object)&&(y=new d(h)),y.stream(c);(y=(()=>{var x;return!!l.WORKERS_SUPPORTED&&(x=(()=>{var m=r.URL||r.webkitURL||null,V=n.toString();return l.BLOB_URL||(l.BLOB_URL=m.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",V,")();"],{type:"text/javascript"})))})(),(x=new r.Worker(x)).onmessage=G,x.id=u++,a[x.id]=x)})()).userStep=h.step,y.userChunk=h.chunk,y.userComplete=h.complete,y.userError=h.error,h.step=A(h.step),h.chunk=A(h.chunk),h.complete=A(h.complete),h.error=A(h.error),delete h.worker,y.postMessage({input:c,config:h,workerId:y.id})},l.unparse=function(c,h){var y=!1,x=!0,m=",",V=`\r
`,_='"',L=_+_,S=!1,w=null,v=!1,M=((()=>{if(typeof h=="object"){if(typeof h.delimiter!="string"||l.BAD_DELIMITERS.filter(function(O){return h.delimiter.indexOf(O)!==-1}).length||(m=h.delimiter),typeof h.quotes!="boolean"&&typeof h.quotes!="function"&&!Array.isArray(h.quotes)||(y=h.quotes),typeof h.skipEmptyLines!="boolean"&&typeof h.skipEmptyLines!="string"||(S=h.skipEmptyLines),typeof h.newline=="string"&&(V=h.newline),typeof h.quoteChar=="string"&&(_=h.quoteChar),typeof h.header=="boolean"&&(x=h.header),Array.isArray(h.columns)){if(h.columns.length===0)throw new Error("Option columns is empty");w=h.columns}h.escapeChar!==void 0&&(L=h.escapeChar+_),h.escapeFormulae instanceof RegExp?v=h.escapeFormulae:typeof h.escapeFormulae=="boolean"&&h.escapeFormulae&&(v=/^[=+\-@\t\r].*$/)}})(),new RegExp(I(_),"g"));if(typeof c=="string"&&(c=JSON.parse(c)),Array.isArray(c)){if(!c.length||Array.isArray(c[0]))return B(null,c,S);if(typeof c[0]=="object")return B(w||Object.keys(c[0]),c,S)}else if(typeof c=="object")return typeof c.data=="string"&&(c.data=JSON.parse(c.data)),Array.isArray(c.data)&&(c.fields||(c.fields=c.meta&&c.meta.fields||w),c.fields||(c.fields=Array.isArray(c.data[0])?c.fields:typeof c.data[0]=="object"?Object.keys(c.data[0]):[]),Array.isArray(c.data[0])||typeof c.data[0]=="object"||(c.data=[c.data])),B(c.fields||[],c.data||[],S);throw new Error("Unable to serialize unrecognized input");function B(O,F,$){var ie="",le=(typeof O=="string"&&(O=JSON.parse(O)),typeof F=="string"&&(F=JSON.parse(F)),Array.isArray(O)&&0<O.length),ue=!Array.isArray(F[0]);if(le&&x){for(var K=0;K<O.length;K++)0<K&&(ie+=m),ie+=T(O[K],K);0<F.length&&(ie+=V)}for(var Z=0;Z<F.length;Z++){var ce=(le?O:F[Z]).length,se=!1,_e=le?Object.keys(F[Z]).length===0:F[Z].length===0;if($&&!le&&(se=$==="greedy"?F[Z].join("").trim()==="":F[Z].length===1&&F[Z][0].length===0),$==="greedy"&&le){for(var ge=[],ye=0;ye<ce;ye++){var de=ue?O[ye]:ye;ge.push(F[Z][de])}se=ge.join("").trim()===""}if(!se){for(var Q=0;Q<ce;Q++){0<Q&&!_e&&(ie+=m);var pe=le&&ue?O[Q]:Q;ie+=T(F[Z][pe],Q)}Z<F.length-1&&(!$||0<ce&&!_e)&&(ie+=V)}}return ie}function T(O,F){var $,ie;return O==null?"":O.constructor===Date?JSON.stringify(O).slice(1,25):(ie=!1,v&&typeof O=="string"&&v.test(O)&&(O="'"+O,ie=!0),$=O.toString().replace(M,L),(ie=ie||y===!0||typeof y=="function"&&y(O,F)||Array.isArray(y)&&y[F]||((le,ue)=>{for(var K=0;K<ue.length;K++)if(-1<le.indexOf(ue[K]))return!0;return!1})($,l.BAD_DELIMITERS)||-1<$.indexOf(m)||$.charAt(0)===" "||$.charAt($.length-1)===" ")?_+$+_:$)}},l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!o&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=C,l.ParserHandle=R,l.NetworkStreamer=p,l.FileStreamer=d,l.StringStreamer=g,l.ReadableStreamStreamer=b,r.jQuery&&((i=r.jQuery).fn.parse=function(c){var h=c.config||{},y=[];return this.each(function(V){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var _=0;_<this.files.length;_++)y.push({file:this.files[_],inputElem:this,instanceConfig:i.extend({},h)})}),x(),this;function x(){if(y.length===0)A(c.complete)&&c.complete();else{var V,_,L,S,w=y[0];if(A(c.before)){var v=c.before(w.file,w.inputElem);if(typeof v=="object"){if(v.action==="abort")return V="AbortError",_=w.file,L=w.inputElem,S=v.reason,void(A(c.error)&&c.error({name:V},_,L,S));if(v.action==="skip")return void m();typeof v.config=="object"&&(w.instanceConfig=i.extend(w.instanceConfig,v.config))}else if(v==="skip")return void m()}var M=w.instanceConfig.complete;w.instanceConfig.complete=function(B){A(M)&&M(B,w.file,w.inputElem),m()},l.parse(w.file,w.instanceConfig)}}function m(){y.splice(0,1),x()}}),s&&(r.onmessage=function(c){c=c.data,l.WORKER_ID===void 0&&c&&(l.WORKER_ID=c.workerId),typeof c.input=="string"?r.postMessage({workerId:l.WORKER_ID,results:l.parse(c.input,c.config),finished:!0}):(r.File&&c.input instanceof File||c.input instanceof Object)&&(c=l.parse(c.input,c.config))&&r.postMessage({workerId:l.WORKER_ID,results:c,finished:!0})}),(p.prototype=Object.create(f.prototype)).constructor=p,(d.prototype=Object.create(f.prototype)).constructor=d,(g.prototype=Object.create(g.prototype)).constructor=g,(b.prototype=Object.create(f.prototype)).constructor=b,l})})(Zr);const Hi=Zr.exports;function qt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Bi(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jr(e){let t,n,r;e.length!==2?(t=qt,n=(a,u)=>qt(e(a),u),r=(a,u)=>e(a)-u):(t=e===qt||e===Bi?e:Xi,n=e,r=e);function i(a,u,l=0,f=a.length){if(l<f){if(t(u,u)!==0)return f;do{const p=l+f>>>1;n(a[p],u)<0?l=p+1:f=p}while(l<f)}return l}function o(a,u,l=0,f=a.length){if(l<f){if(t(u,u)!==0)return f;do{const p=l+f>>>1;n(a[p],u)<=0?l=p+1:f=p}while(l<f)}return l}function s(a,u,l=0,f=a.length){const p=i(a,u,l,f-1);return p>l&&r(a[p-1],u)>-r(a[p],u)?p-1:p}return{left:i,center:s,right:o}}function Xi(){return 0}function Ui(e){return e===null?NaN:+e}const Yi=Jr(qt),Wi=Yi.right;Jr(Ui).center;const Ki=Wi;class er extends Map{constructor(t,n=Zi){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(tr(this,t))}has(t){return super.has(tr(this,t))}set(t,n){return super.set(Qi(this,t),n)}delete(t){return super.delete(Gi(this,t))}}function tr({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Qi({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Gi({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Zi(e){return e!==null&&typeof e=="object"?e.valueOf():e}var xn=Math.sqrt(50),Sn=Math.sqrt(10),Mn=Math.sqrt(2);function Ji(e,t,n){var r,i=-1,o,s,a;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(o=e,e=t,t=o),(a=$r(e,t,n))===0||!isFinite(a))return[];if(a>0){let u=Math.round(e/a),l=Math.round(t/a);for(u*a<e&&++u,l*a>t&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)*a}else{a=-a;let u=Math.round(e*a),l=Math.round(t*a);for(u/a<e&&++u,l/a>t&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)/a}return r&&s.reverse(),s}function $r(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=xn?10:o>=Sn?5:o>=Mn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=xn?10:o>=Sn?5:o>=Mn?2:1)}function $i(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=xn?i*=10:o>=Sn?i*=5:o>=Mn&&(i*=2),t<e?-i:i}function nr(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function rr(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function ei(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const ir=Symbol("implicit");function Vn(){var e=new er,t=[],n=[],r=ir;function i(o){let s=e.get(o);if(s===void 0){if(r!==ir)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new er;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Vn(t,n).unknown(r)},ei.apply(i,arguments),i}function qn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ti(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Dt(){}var Et=.7,Qt=1/Et,pt="\\s*([+-]?\\d+)\\s*",Ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eo=/^#([0-9a-f]{3,8})$/,to=new RegExp(`^rgb\\(${pt},${pt},${pt}\\)$`),no=new RegExp(`^rgb\\(${Ue},${Ue},${Ue}\\)$`),ro=new RegExp(`^rgba\\(${pt},${pt},${pt},${Ct}\\)$`),io=new RegExp(`^rgba\\(${Ue},${Ue},${Ue},${Ct}\\)$`),oo=new RegExp(`^hsl\\(${Ct},${Ue},${Ue}\\)$`),so=new RegExp(`^hsla\\(${Ct},${Ue},${Ue},${Ct}\\)$`),or={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qn(Dt,at,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sr,formatHex:sr,formatHex8:lo,formatHsl:ao,formatRgb:lr,toString:lr});function sr(){return this.rgb().formatHex()}function lo(){return this.rgb().formatHex8()}function ao(){return ni(this).formatHsl()}function lr(){return this.rgb().formatRgb()}function at(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=eo.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ar(t):n===3?new ze(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?It(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?It(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=to.exec(e))?new ze(t[1],t[2],t[3],1):(t=no.exec(e))?new ze(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ro.exec(e))?It(t[1],t[2],t[3],t[4]):(t=io.exec(e))?It(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=oo.exec(e))?cr(t[1],t[2]/100,t[3]/100,1):(t=so.exec(e))?cr(t[1],t[2]/100,t[3]/100,t[4]):or.hasOwnProperty(e)?ar(or[e]):e==="transparent"?new ze(NaN,NaN,NaN,0):null}function ar(e){return new ze(e>>16&255,e>>8&255,e&255,1)}function It(e,t,n,r){return r<=0&&(e=t=n=NaN),new ze(e,t,n,r)}function uo(e){return e instanceof Dt||(e=at(e)),e?(e=e.rgb(),new ze(e.r,e.g,e.b,e.opacity)):new ze}function En(e,t,n,r){return arguments.length===1?uo(e):new ze(e,t,n,r==null?1:r)}function ze(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}qn(ze,En,ti(Dt,{brighter(e){return e=e==null?Qt:Math.pow(Qt,e),new ze(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Et:Math.pow(Et,e),new ze(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ze(lt(this.r),lt(this.g),lt(this.b),Gt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ur,formatHex:ur,formatHex8:fo,formatRgb:fr,toString:fr}));function ur(){return`#${st(this.r)}${st(this.g)}${st(this.b)}`}function fo(){return`#${st(this.r)}${st(this.g)}${st(this.b)}${st((isNaN(this.opacity)?1:this.opacity)*255)}`}function fr(){const e=Gt(this.opacity);return`${e===1?"rgb(":"rgba("}${lt(this.r)}, ${lt(this.g)}, ${lt(this.b)}${e===1?")":`, ${e})`}`}function Gt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function lt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function st(e){return e=lt(e),(e<16?"0":"")+e.toString(16)}function cr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new He(e,t,n,r)}function ni(e){if(e instanceof He)return new He(e.h,e.s,e.l,e.opacity);if(e instanceof Dt||(e=at(e)),!e)return new He;if(e instanceof He)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new He(s,a,u,e.opacity)}function co(e,t,n,r){return arguments.length===1?ni(e):new He(e,t,n,r==null?1:r)}function He(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}qn(He,co,ti(Dt,{brighter(e){return e=e==null?Qt:Math.pow(Qt,e),new He(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Et:Math.pow(Et,e),new He(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ze(yn(e>=240?e-240:e+120,i,r),yn(e,i,r),yn(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new He(hr(this.h),zt(this.s),zt(this.l),Gt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gt(this.opacity);return`${e===1?"hsl(":"hsla("}${hr(this.h)}, ${zt(this.s)*100}%, ${zt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hr(e){return e=(e||0)%360,e<0?e+360:e}function zt(e){return Math.max(0,Math.min(1,e||0))}function yn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Hn=e=>()=>e;function ho(e,t){return function(n){return e+n*t}}function po(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function mo(e){return(e=+e)==1?ri:function(t,n){return n-t?po(t,n,e):Hn(isNaN(t)?n:t)}}function ri(e,t){var n=t-e;return n?ho(e,n):Hn(isNaN(e)?t:e)}const Zt=function e(t){var n=mo(t);function r(i,o){var s=n((i=En(i)).r,(o=En(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=ri(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=u(f),i.opacity=l(f),i+""}}return r.gamma=e,r}(1);function go(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function _o(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function yo(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Bn(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function wo(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function qe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vo(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Bn(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Cn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wn=new RegExp(Cn.source,"g");function bo(e){return function(){return e}}function ko(e){return function(t){return e(t)+""}}function ii(e,t){var n=Cn.lastIndex=wn.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Cn.exec(e))&&(i=wn.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:qe(r,i)})),n=wn.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?ko(u[0].x):bo(t):(t=u.length,function(l){for(var f=0,p;f<t;++f)a[(p=u[f]).i]=p.x(l);return a.join("")})}function Bn(e,t){var n=typeof t,r;return t==null||n==="boolean"?Hn(t):(n==="number"?qe:n==="string"?(r=at(t))?(t=r,Zt):ii:t instanceof at?Zt:t instanceof Date?wo:_o(t)?go:Array.isArray(t)?yo:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?vo:qe)(e,t)}function xo(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var dr=180/Math.PI,An={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oi(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*dr,skewX:Math.atan(u)*dr,scaleX:s,scaleY:a}}var Ot;function So(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?An:oi(t.a,t.b,t.c,t.d,t.e,t.f)}function Mo(e){return e==null||(Ot||(Ot=document.createElementNS("http://www.w3.org/2000/svg","g")),Ot.setAttribute("transform",e),!(e=Ot.transform.baseVal.consolidate()))?An:(e=e.matrix,oi(e.a,e.b,e.c,e.d,e.e,e.f))}function si(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,f,p,d,g,b){if(l!==p||f!==d){var R=g.push("translate(",null,t,null,n);b.push({i:R-4,x:qe(l,p)},{i:R-2,x:qe(f,d)})}else(p||d)&&g.push("translate("+p+t+d+n)}function s(l,f,p,d){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),d.push({i:p.push(i(p)+"rotate(",null,r)-2,x:qe(l,f)})):f&&p.push(i(p)+"rotate("+f+r)}function a(l,f,p,d){l!==f?d.push({i:p.push(i(p)+"skewX(",null,r)-2,x:qe(l,f)}):f&&p.push(i(p)+"skewX("+f+r)}function u(l,f,p,d,g,b){if(l!==p||f!==d){var R=g.push(i(g)+"scale(",null,",",null,")");b.push({i:R-4,x:qe(l,p)},{i:R-2,x:qe(f,d)})}else(p!==1||d!==1)&&g.push(i(g)+"scale("+p+","+d+")")}return function(l,f){var p=[],d=[];return l=e(l),f=e(f),o(l.translateX,l.translateY,f.translateX,f.translateY,p,d),s(l.rotate,f.rotate,p,d),a(l.skewX,f.skewX,p,d),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,p,d),l=f=null,function(g){for(var b=-1,R=d.length,I;++b<R;)p[(I=d[b]).i]=I.x(g);return p.join("")}}}var Eo=si(So,"px, ","px)","deg)"),Co=si(Mo,", ",")",")"),Ao=1e-12;function pr(e){return((e=Math.exp(e))+1/e)/2}function Do(e){return((e=Math.exp(e))-1/e)/2}function To(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ro=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],f=s[0],p=s[1],d=s[2],g=f-a,b=p-u,R=g*g+b*b,I,C;if(R<Ao)C=Math.log(d/l)/t,I=function(A){return[a+A*g,u+A*b,l*Math.exp(t*A*C)]};else{var G=Math.sqrt(R),N=(d*d-l*l+r*R)/(2*l*n*G),X=(d*d-l*l-r*R)/(2*d*n*G),j=Math.log(Math.sqrt(N*N+1)-N),q=Math.log(Math.sqrt(X*X+1)-X);C=(q-j)/t,I=function(A){var c=A*C,h=pr(j),y=l/(n*G)*(h*To(t*c+j)-Do(j));return[a+y*g,u+y*b,l*h/pr(t*c+j)]}}return I.duration=C*1e3*t/Math.SQRT2,I}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);function No(e){return function(){return e}}function Lo(e){return+e}var mr=[0,1];function ct(e){return e}function Dn(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:No(isNaN(t)?NaN:.5)}function Io(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function zo(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=Dn(i,r),o=n(s,o)):(r=Dn(r,i),o=n(o,s)),function(a){return o(r(a))}}function Oo(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=Dn(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var u=Ki(e,a,1,r)-1;return o[u](i[u](a))}}function Po(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Fo(){var e=mr,t=mr,n=Bn,r,i,o,s=ct,a,u,l;function f(){var d=Math.min(e.length,t.length);return s!==ct&&(s=Io(e[0],e[d-1])),a=d>2?Oo:zo,u=l=null,p}function p(d){return d==null||isNaN(d=+d)?o:(u||(u=a(e.map(r),t,n)))(r(s(d)))}return p.invert=function(d){return s(i((l||(l=a(t,e.map(r),qe)))(d)))},p.domain=function(d){return arguments.length?(e=Array.from(d,Lo),f()):e.slice()},p.range=function(d){return arguments.length?(t=Array.from(d),f()):t.slice()},p.rangeRound=function(d){return t=Array.from(d),n=xo,f()},p.clamp=function(d){return arguments.length?(s=d?!0:ct,f()):s!==ct},p.interpolate=function(d){return arguments.length?(n=d,f()):n},p.unknown=function(d){return arguments.length?(o=d,p):o},function(d,g){return r=d,i=g,f()}}function jo(){return Fo()(ct,ct)}function Vo(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Jt(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function mt(e){return e=Jt(Math.abs(e)),e?e[1]:NaN}function qo(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function Ho(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Bo=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $t(e){if(!(t=Bo.exec(e)))throw new Error("invalid format: "+e);var t;return new Xn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$t.prototype=Xn.prototype;function Xn(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xo(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var li;function Uo(e,t){var n=Jt(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(li=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Jt(e,Math.max(0,t+o-1))[0]}function gr(e,t){var n=Jt(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _r={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Vo,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gr(e*100,t),r:gr,s:Uo,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yr(e){return e}var wr=Array.prototype.map,vr=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Yo(e){var t=e.grouping===void 0||e.thousands===void 0?yr:qo(wr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?yr:Ho(wr.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"\u2212":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(p){p=$t(p);var d=p.fill,g=p.align,b=p.sign,R=p.symbol,I=p.zero,C=p.width,G=p.comma,N=p.precision,X=p.trim,j=p.type;j==="n"?(G=!0,j="g"):_r[j]||(N===void 0&&(N=12),X=!0,j="g"),(I||d==="0"&&g==="=")&&(I=!0,d="0",g="=");var q=R==="$"?n:R==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",A=R==="$"?r:/[%p]/.test(j)?s:"",c=_r[j],h=/[defgprs%]/.test(j);N=N===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function y(x){var m=q,V=A,_,L,S;if(j==="c")V=c(x)+V,x="";else{x=+x;var w=x<0||1/x<0;if(x=isNaN(x)?u:c(Math.abs(x),N),X&&(x=Xo(x)),w&&+x==0&&b!=="+"&&(w=!1),m=(w?b==="("?b:a:b==="-"||b==="("?"":b)+m,V=(j==="s"?vr[8+li/3]:"")+V+(w&&b==="("?")":""),h){for(_=-1,L=x.length;++_<L;)if(S=x.charCodeAt(_),48>S||S>57){V=(S===46?i+x.slice(_+1):x.slice(_))+V,x=x.slice(0,_);break}}}G&&!I&&(x=t(x,1/0));var v=m.length+x.length+V.length,M=v<C?new Array(C-v+1).join(d):"";switch(G&&I&&(x=t(M+x,M.length?C-V.length:1/0),M=""),g){case"<":x=m+x+V+M;break;case"=":x=m+M+x+V;break;case"^":x=M.slice(0,v=M.length>>1)+m+x+V+M.slice(v);break;default:x=M+m+x+V;break}return o(x)}return y.toString=function(){return p+""},y}function f(p,d){var g=l((p=$t(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(mt(d)/3)))*3,R=Math.pow(10,-b),I=vr[8+b/3];return function(C){return g(R*C)+I}}return{format:l,formatPrefix:f}}var Pt,ai,ui;Wo({thousands:",",grouping:[3],currency:["$",""]});function Wo(e){return Pt=Yo(e),ai=Pt.format,ui=Pt.formatPrefix,Pt}function Ko(e){return Math.max(0,-mt(Math.abs(e)))}function Qo(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mt(t)/3)))*3-mt(Math.abs(e)))}function Go(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mt(t)-mt(e))+1}function Zo(e,t,n,r){var i=$i(e,t,n),o;switch(r=$t(r==null?",f":r),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=Qo(i,s))&&(r.precision=o),ui(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Go(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Ko(i))&&(r.precision=o-(r.type==="%")*2);break}}return ai(r)}function Jo(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ji(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var i=t();return Zo(i[0],i[i.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,f=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);f-- >0;){if(l=$r(s,a,n),l===u)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Tn(){var e=jo();return e.copy=function(){return Po(e,Tn())},ei.apply(e,arguments),Jo(e)}function $o(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const fi=$o("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var es={value:()=>{}};function Un(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ht(n)}function Ht(e){this._=e}function ts(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ht.prototype=Un.prototype={constructor:Ht,on:function(e,t){var n=this._,r=ts(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=ns(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=br(n[i],e.name,t);else if(t==null)for(i in n)n[i]=br(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ht(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function ns(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function br(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=es,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Rn="http://www.w3.org/1999/xhtml";const kr={svg:"http://www.w3.org/2000/svg",xhtml:Rn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),kr.hasOwnProperty(t)?{space:kr[t],local:e}:e}function rs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Rn&&t.documentElement.namespaceURI===Rn?t.createElement(e):t.createElementNS(n,e)}}function is(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ci(e){var t=hn(e);return(t.local?is:rs)(t)}function os(){}function Yn(e){return e==null?os:function(){return this.querySelector(e)}}function ss(e){typeof e!="function"&&(e=Yn(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,l,f=0;f<s;++f)(u=o[f])&&(l=e.call(u,u.__data__,f,o))&&("__data__"in u&&(l.__data__=u.__data__),a[f]=l);return new Fe(r,this._parents)}function ls(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function as(){return[]}function hi(e){return e==null?as:function(){return this.querySelectorAll(e)}}function us(e){return function(){return ls(e.apply(this,arguments))}}function fs(e){typeof e=="function"?e=us(e):e=hi(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(e.call(u,u.__data__,l,s)),i.push(u));return new Fe(r,i)}function di(e){return function(){return this.matches(e)}}function pi(e){return function(t){return t.matches(e)}}var cs=Array.prototype.find;function hs(e){return function(){return cs.call(this.children,e)}}function ds(){return this.firstElementChild}function ps(e){return this.select(e==null?ds:hs(typeof e=="function"?e:pi(e)))}var ms=Array.prototype.filter;function gs(){return Array.from(this.children)}function _s(e){return function(){return ms.call(this.children,e)}}function ys(e){return this.selectAll(e==null?gs:_s(typeof e=="function"?e:pi(e)))}function ws(e){typeof e!="function"&&(e=di(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new Fe(r,this._parents)}function mi(e){return new Array(e.length)}function vs(){return new Fe(this._enter||this._groups.map(mi),this._parents)}function en(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}en.prototype={constructor:en,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function bs(e){return function(){return e}}function ks(e,t,n,r,i,o){for(var s=0,a,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new en(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function xs(e,t,n,r,i,o,s){var a,u,l=new Map,f=t.length,p=o.length,d=new Array(f),g;for(a=0;a<f;++a)(u=t[a])&&(d[a]=g=s.call(u,u.__data__,a,t)+"",l.has(g)?i[a]=u:l.set(g,u));for(a=0;a<p;++a)g=s.call(e,o[a],a,o)+"",(u=l.get(g))?(r[a]=u,u.__data__=o[a],l.delete(g)):n[a]=new en(e,o[a]);for(a=0;a<f;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Ss(e){return e.__data__}function Ms(e,t){if(!arguments.length)return Array.from(this,Ss);var n=t?xs:ks,r=this._parents,i=this._groups;typeof e!="function"&&(e=bs(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var f=r[l],p=i[l],d=p.length,g=Es(e.call(f,f&&f.__data__,l,r)),b=g.length,R=a[l]=new Array(b),I=s[l]=new Array(b),C=u[l]=new Array(d);n(f,p,R,I,C,g,t);for(var G=0,N=0,X,j;G<b;++G)if(X=R[G]){for(G>=N&&(N=G+1);!(j=I[N])&&++N<b;);X._next=j||null}}return s=new Fe(s,r),s._enter=a,s._exit=u,s}function Es(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Cs(){return new Fe(this._exit||this._groups.map(mi),this._parents)}function As(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Ds(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l=n[u],f=r[u],p=l.length,d=a[u]=new Array(p),g,b=0;b<p;++b)(g=l[b]||f[b])&&(d[b]=g);for(;u<i;++u)a[u]=n[u];return new Fe(a,this._parents)}function Ts(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Rs(e){e||(e=Ns);function t(p,d){return p&&d?e(p.__data__,d.__data__):!p-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,f=0;f<a;++f)(l=s[f])&&(u[f]=l);u.sort(t)}return new Fe(i,this._parents).order()}function Ns(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ls(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Is(){return Array.from(this)}function zs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Os(){let e=0;for(const t of this)++e;return e}function Ps(){return!this.node()}function Fs(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function js(e){return function(){this.removeAttribute(e)}}function Vs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qs(e,t){return function(){this.setAttribute(e,t)}}function Hs(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Bs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Xs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Us(e,t){var n=hn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Vs:js:typeof t=="function"?n.local?Xs:Bs:n.local?Hs:qs)(n,t))}function gi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ys(e){return function(){this.style.removeProperty(e)}}function Ws(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ks(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Qs(e,t,n){return arguments.length>1?this.each((t==null?Ys:typeof t=="function"?Ks:Ws)(e,t,n==null?"":n)):gt(this.node(),e)}function gt(e,t){return e.style.getPropertyValue(t)||gi(e).getComputedStyle(e,null).getPropertyValue(t)}function Gs(e){return function(){delete this[e]}}function Zs(e,t){return function(){this[e]=t}}function Js(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function $s(e,t){return arguments.length>1?this.each((t==null?Gs:typeof t=="function"?Js:Zs)(e,t)):this.node()[e]}function _i(e){return e.trim().split(/^|\s+/)}function Wn(e){return e.classList||new yi(e)}function yi(e){this._node=e,this._names=_i(e.getAttribute("class")||"")}yi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wi(e,t){for(var n=Wn(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function vi(e,t){for(var n=Wn(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function el(e){return function(){wi(this,e)}}function tl(e){return function(){vi(this,e)}}function nl(e,t){return function(){(t.apply(this,arguments)?wi:vi)(this,e)}}function rl(e,t){var n=_i(e+"");if(arguments.length<2){for(var r=Wn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?nl:t?el:tl)(n,t))}function il(){this.textContent=""}function ol(e){return function(){this.textContent=e}}function sl(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function ll(e){return arguments.length?this.each(e==null?il:(typeof e=="function"?sl:ol)(e)):this.node().textContent}function al(){this.innerHTML=""}function ul(e){return function(){this.innerHTML=e}}function fl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function cl(e){return arguments.length?this.each(e==null?al:(typeof e=="function"?fl:ul)(e)):this.node().innerHTML}function hl(){this.nextSibling&&this.parentNode.appendChild(this)}function dl(){return this.each(hl)}function pl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ml(){return this.each(pl)}function gl(e){var t=typeof e=="function"?e:ci(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _l(){return null}function yl(e,t){var n=typeof e=="function"?e:ci(e),r=t==null?_l:typeof t=="function"?t:Yn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function wl(){var e=this.parentNode;e&&e.removeChild(this)}function vl(){return this.each(wl)}function bl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xl(e){return this.select(e?kl:bl)}function Sl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ml(e){return function(t){e.call(this,t,this.__data__)}}function El(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Cl(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Al(e,t,n){return function(){var r=this.__on,i,o=Ml(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Dl(e,t,n){var r=El(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,f;u<l;++u)for(i=0,f=a[u];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(a=t?Al:Cl,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function bi(e,t,n){var r=gi(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Tl(e,t){return function(){return bi(this,e,t)}}function Rl(e,t){return function(){return bi(this,e,t.apply(this,arguments))}}function Nl(e,t){return this.each((typeof t=="function"?Rl:Tl)(e,t))}function*Ll(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var ki=[null];function Fe(e,t){this._groups=e,this._parents=t}function Tt(){return new Fe([[document.documentElement]],ki)}function Il(){return this}Fe.prototype=Tt.prototype={constructor:Fe,select:ss,selectAll:fs,selectChild:ps,selectChildren:ys,filter:ws,data:Ms,enter:vs,exit:Cs,join:As,merge:Ds,selection:Il,order:Ts,sort:Rs,call:Ls,nodes:Is,node:zs,size:Os,empty:Ps,each:Fs,attr:Us,style:Qs,property:$s,classed:rl,text:ll,html:cl,raise:dl,lower:ml,append:gl,insert:yl,remove:vl,clone:xl,datum:Sl,on:Dl,dispatch:Nl,[Symbol.iterator]:Ll};function rt(e){return typeof e=="string"?new Fe([[document.querySelector(e)]],[document.documentElement]):new Fe([[e]],ki)}function zl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function it(e,t){if(e=zl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Nn={capture:!0,passive:!1};function Ln(e){e.preventDefault(),e.stopImmediatePropagation()}function Ol(e){var t=e.document.documentElement,n=rt(e).on("dragstart.drag",Ln,Nn);"onselectstart"in t?n.on("selectstart.drag",Ln,Nn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Pl(e,t){var n=e.document.documentElement,r=rt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ln,Nn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var _t=0,kt=0,yt=0,xi=1e3,tn,xt,nn=0,ut=0,dn=0,At=typeof performance=="object"&&performance.now?performance:Date,Si=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Kn(){return ut||(Si(Fl),ut=At.now()+dn)}function Fl(){ut=0}function rn(){this._call=this._time=this._next=null}rn.prototype=Mi.prototype={constructor:rn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Kn():+n)+(t==null?0:+t),!this._next&&xt!==this&&(xt?xt._next=this:tn=this,xt=this),this._call=e,this._time=n,In()},stop:function(){this._call&&(this._call=null,this._time=1/0,In())}};function Mi(e,t,n){var r=new rn;return r.restart(e,t,n),r}function jl(){Kn(),++_t;for(var e=tn,t;e;)(t=ut-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_t}function xr(){ut=(nn=At.now())+dn,_t=kt=0;try{jl()}finally{_t=0,ql(),ut=0}}function Vl(){var e=At.now(),t=e-nn;t>xi&&(dn-=t,nn=e)}function ql(){for(var e,t=tn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:tn=n);xt=e,In(r)}function In(e){if(!_t){kt&&(kt=clearTimeout(kt));var t=e-ut;t>24?(e<1/0&&(kt=setTimeout(xr,e-At.now()-dn)),yt&&(yt=clearInterval(yt))):(yt||(nn=At.now(),yt=setInterval(Vl,xi)),_t=1,Si(xr))}}function Sr(e,t,n){var r=new rn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Hl=Un("start","end","cancel","interrupt"),Bl=[],Ei=0,Mr=1,zn=2,Bt=3,Er=4,On=5,Xt=6;function pn(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Xl(e,n,{name:t,index:r,group:i,on:Hl,tween:Bl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ei})}function Qn(e,t){var n=Xe(e,t);if(n.state>Ei)throw new Error("too late; already scheduled");return n}function Ye(e,t){var n=Xe(e,t);if(n.state>Bt)throw new Error("too late; already running");return n}function Xe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xl(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Mi(o,0,n.time);function o(l){n.state=Mr,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var f,p,d,g;if(n.state!==Mr)return u();for(f in r)if(g=r[f],g.name===n.name){if(g.state===Bt)return Sr(s);g.state===Er?(g.state=Xt,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[f]):+f<t&&(g.state=Xt,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[f])}if(Sr(function(){n.state===Bt&&(n.state=Er,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=zn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===zn){for(n.state=Bt,i=new Array(d=n.tween.length),f=0,p=-1;f<d;++f)(g=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=g);i.length=p+1}}function a(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=On,1),p=-1,d=i.length;++p<d;)i[p].call(e,f);n.state===On&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Xt,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Ut(e,t){var n=e.__transition,r,i,o=!0,s;if(!!n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>zn&&r.state<On,r.state=Xt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Ul(e){return this.each(function(){Ut(this,e)})}function Yl(e,t){var n,r;return function(){var i=Ye(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Wl(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ye(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function Kl(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Xe(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Yl:Wl)(n,e,t))}function Gn(e,t,n){var r=e._id;return e.each(function(){var i=Ye(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Xe(i,r).value[t]}}function Ci(e,t){var n;return(typeof t=="number"?qe:t instanceof at?Zt:(n=at(t))?(t=n,Zt):ii)(e,t)}function Ql(e){return function(){this.removeAttribute(e)}}function Gl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zl(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Jl(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function $l(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function ea(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function ta(e,t){var n=hn(e),r=n==="transform"?Co:Ci;return this.attrTween(e,typeof t=="function"?(n.local?ea:$l)(n,r,Gn(this,"attr."+e,t)):t==null?(n.local?Gl:Ql)(n):(n.local?Jl:Zl)(n,r,t))}function na(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ra(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ia(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&ra(e,o)),n}return i._value=t,i}function oa(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&na(e,o)),n}return i._value=t,i}function sa(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=hn(e);return this.tween(n,(r.local?ia:oa)(r,t))}function la(e,t){return function(){Qn(this,e).delay=+t.apply(this,arguments)}}function aa(e,t){return t=+t,function(){Qn(this,e).delay=t}}function ua(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?la:aa)(t,e)):Xe(this.node(),t).delay}function fa(e,t){return function(){Ye(this,e).duration=+t.apply(this,arguments)}}function ca(e,t){return t=+t,function(){Ye(this,e).duration=t}}function ha(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fa:ca)(t,e)):Xe(this.node(),t).duration}function da(e,t){if(typeof t!="function")throw new Error;return function(){Ye(this,e).ease=t}}function pa(e){var t=this._id;return arguments.length?this.each(da(t,e)):Xe(this.node(),t).ease}function ma(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ye(this,e).ease=n}}function ga(e){if(typeof e!="function")throw new Error;return this.each(ma(this._id,e))}function _a(e){typeof e!="function"&&(e=di(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new Ze(r,this._parents,this._name,this._id)}function ya(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],l=n[a],f=u.length,p=s[a]=new Array(f),d,g=0;g<f;++g)(d=u[g]||l[g])&&(p[g]=d);for(;a<r;++a)s[a]=t[a];return new Ze(s,this._parents,this._name,this._id)}function wa(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function va(e,t,n){var r,i,o=wa(t)?Qn:Ye;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function ba(e,t){var n=this._id;return arguments.length<2?Xe(this.node(),n).on.on(e):this.each(va(n,e,t))}function ka(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function xa(){return this.on("end.remove",ka(this._id))}function Sa(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Yn(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,l=o[s]=new Array(u),f,p,d=0;d<u;++d)(f=a[d])&&(p=e.call(f,f.__data__,d,a))&&("__data__"in f&&(p.__data__=f.__data__),l[d]=p,pn(l[d],t,n,d,l,Xe(f,n)));return new Ze(o,this._parents,t,n)}function Ma(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hi(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],l=u.length,f,p=0;p<l;++p)if(f=u[p]){for(var d=e.call(f,f.__data__,p,u),g,b=Xe(f,n),R=0,I=d.length;R<I;++R)(g=d[R])&&pn(g,t,n,R,d,b);o.push(d),s.push(f)}return new Ze(o,s,t,n)}var Ea=Tt.prototype.constructor;function Ca(){return new Ea(this._groups,this._parents)}function Aa(e,t){var n,r,i;return function(){var o=gt(this,e),s=(this.style.removeProperty(e),gt(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function Ai(e){return function(){this.style.removeProperty(e)}}function Da(e,t,n){var r,i=n+"",o;return function(){var s=gt(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function Ta(e,t,n){var r,i,o;return function(){var s=gt(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),gt(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function Ra(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=Ye(this,e),l=u.on,f=u.value[o]==null?a||(a=Ai(t)):void 0;(l!==n||i!==f)&&(r=(n=l).copy()).on(s,i=f),u.on=r}}function Na(e,t,n){var r=(e+="")=="transform"?Eo:Ci;return t==null?this.styleTween(e,Aa(e,r)).on("end.style."+e,Ai(e)):typeof t=="function"?this.styleTween(e,Ta(e,r,Gn(this,"style."+e,t))).each(Ra(this._id,e)):this.styleTween(e,Da(e,r,t),n).on("end.style."+e,null)}function La(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ia(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&La(e,s,n)),r}return o._value=t,o}function za(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ia(e,t,n==null?"":n))}function Oa(e){return function(){this.textContent=e}}function Pa(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Fa(e){return this.tween("text",typeof e=="function"?Pa(Gn(this,"text",e)):Oa(e==null?"":e+""))}function ja(e){return function(t){this.textContent=e.call(this,t)}}function Va(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&ja(i)),t}return r._value=e,r}function qa(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Va(e))}function Ha(){for(var e=this._name,t=this._id,n=Di(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var f=Xe(u,t);pn(u,e,n,l,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Ze(r,this._parents,e,n)}function Ba(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var l=Ye(this,r),f=l.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&o()})}var Xa=0;function Ze(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Di(){return++Xa}var Ke=Tt.prototype;Ze.prototype={constructor:Ze,select:Sa,selectAll:Ma,selectChild:Ke.selectChild,selectChildren:Ke.selectChildren,filter:_a,merge:ya,selection:Ca,transition:Ha,call:Ke.call,nodes:Ke.nodes,node:Ke.node,size:Ke.size,empty:Ke.empty,each:Ke.each,on:ba,attr:ta,attrTween:sa,style:Na,styleTween:za,text:Fa,textTween:qa,remove:xa,tween:Kl,delay:ua,duration:ha,ease:pa,easeVarying:ga,end:Ba,[Symbol.iterator]:Ke[Symbol.iterator]};function Ua(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ya={time:null,delay:0,duration:250,ease:Ua};function Wa(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ka(e){var t,n;e instanceof Ze?(t=e._id,e=e._name):(t=Di(),(n=Ya).time=Kn(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&pn(u,e,t,l,s,n||Wa(u,t));return new Ze(r,this._parents,e,t)}Tt.prototype.interrupt=Ul;Tt.prototype.transition=Ka;const Ft=e=>()=>e;function Qa(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ge(e,t,n){this.k=e,this.x=t,this.y=n}Ge.prototype={constructor:Ge,scale:function(e){return e===1?this:new Ge(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ge(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var on=new Ge(1,0,0);Ge.prototype;function vn(e){e.stopImmediatePropagation()}function wt(e){e.preventDefault(),e.stopImmediatePropagation()}function Ga(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Za(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Cr(){return this.__zoom||on}function Ja(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function $a(){return navigator.maxTouchPoints||"ontouchstart"in this}function eu(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function tu(){var e=Ga,t=Za,n=eu,r=Ja,i=$a,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,u=Ro,l=Un("start","zoom","end"),f,p,d,g=500,b=150,R=0,I=10;function C(_){_.property("__zoom",Cr).on("wheel.zoom",c,{passive:!1}).on("mousedown.zoom",h).on("dblclick.zoom",y).filter(i).on("touchstart.zoom",x).on("touchmove.zoom",m).on("touchend.zoom touchcancel.zoom",V).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(_,L,S,w){var v=_.selection?_.selection():_;v.property("__zoom",Cr),_!==v?j(_,L,S,w):v.interrupt().each(function(){q(this,arguments).event(w).start().zoom(null,typeof L=="function"?L.apply(this,arguments):L).end()})},C.scaleBy=function(_,L,S,w){C.scaleTo(_,function(){var v=this.__zoom.k,M=typeof L=="function"?L.apply(this,arguments):L;return v*M},S,w)},C.scaleTo=function(_,L,S,w){C.transform(_,function(){var v=t.apply(this,arguments),M=this.__zoom,B=S==null?X(v):typeof S=="function"?S.apply(this,arguments):S,T=M.invert(B),O=typeof L=="function"?L.apply(this,arguments):L;return n(N(G(M,O),B,T),v,s)},S,w)},C.translateBy=function(_,L,S,w){C.transform(_,function(){return n(this.__zoom.translate(typeof L=="function"?L.apply(this,arguments):L,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),s)},null,w)},C.translateTo=function(_,L,S,w,v){C.transform(_,function(){var M=t.apply(this,arguments),B=this.__zoom,T=w==null?X(M):typeof w=="function"?w.apply(this,arguments):w;return n(on.translate(T[0],T[1]).scale(B.k).translate(typeof L=="function"?-L.apply(this,arguments):-L,typeof S=="function"?-S.apply(this,arguments):-S),M,s)},w,v)};function G(_,L){return L=Math.max(o[0],Math.min(o[1],L)),L===_.k?_:new Ge(L,_.x,_.y)}function N(_,L,S){var w=L[0]-S[0]*_.k,v=L[1]-S[1]*_.k;return w===_.x&&v===_.y?_:new Ge(_.k,w,v)}function X(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function j(_,L,S,w){_.on("start.zoom",function(){q(this,arguments).event(w).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(w).end()}).tween("zoom",function(){var v=this,M=arguments,B=q(v,M).event(w),T=t.apply(v,M),O=S==null?X(T):typeof S=="function"?S.apply(v,M):S,F=Math.max(T[1][0]-T[0][0],T[1][1]-T[0][1]),$=v.__zoom,ie=typeof L=="function"?L.apply(v,M):L,le=u($.invert(O).concat(F/$.k),ie.invert(O).concat(F/ie.k));return function(ue){if(ue===1)ue=ie;else{var K=le(ue),Z=F/K[2];ue=new Ge(Z,O[0]-K[0]*Z,O[1]-K[1]*Z)}B.zoom(null,ue)}})}function q(_,L,S){return!S&&_.__zooming||new A(_,L)}function A(_,L){this.that=_,this.args=L,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,L),this.taps=0}A.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,L){return this.mouse&&_!=="mouse"&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var L=rt(this.that).datum();l.call(_,this.that,new Qa(_,{sourceEvent:this.sourceEvent,target:C,type:_,transform:this.that.__zoom,dispatch:l}),L)}};function c(_,...L){if(!e.apply(this,arguments))return;var S=q(this,L).event(_),w=this.__zoom,v=Math.max(o[0],Math.min(o[1],w.k*Math.pow(2,r.apply(this,arguments)))),M=it(_);if(S.wheel)(S.mouse[0][0]!==M[0]||S.mouse[0][1]!==M[1])&&(S.mouse[1]=w.invert(S.mouse[0]=M)),clearTimeout(S.wheel);else{if(w.k===v)return;S.mouse=[M,w.invert(M)],Ut(this),S.start()}wt(_),S.wheel=setTimeout(B,b),S.zoom("mouse",n(N(G(w,v),S.mouse[0],S.mouse[1]),S.extent,s));function B(){S.wheel=null,S.end()}}function h(_,...L){if(d||!e.apply(this,arguments))return;var S=_.currentTarget,w=q(this,L,!0).event(_),v=rt(_.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",F,!0),M=it(_,S),B=_.clientX,T=_.clientY;Ol(_.view),vn(_),w.mouse=[M,this.__zoom.invert(M)],Ut(this),w.start();function O($){if(wt($),!w.moved){var ie=$.clientX-B,le=$.clientY-T;w.moved=ie*ie+le*le>R}w.event($).zoom("mouse",n(N(w.that.__zoom,w.mouse[0]=it($,S),w.mouse[1]),w.extent,s))}function F($){v.on("mousemove.zoom mouseup.zoom",null),Pl($.view,w.moved),wt($),w.event($).end()}}function y(_,...L){if(!!e.apply(this,arguments)){var S=this.__zoom,w=it(_.changedTouches?_.changedTouches[0]:_,this),v=S.invert(w),M=S.k*(_.shiftKey?.5:2),B=n(N(G(S,M),w,v),t.apply(this,L),s);wt(_),a>0?rt(this).transition().duration(a).call(j,B,w,_):rt(this).call(C.transform,B,w,_)}}function x(_,...L){if(!!e.apply(this,arguments)){var S=_.touches,w=S.length,v=q(this,L,_.changedTouches.length===w).event(_),M,B,T,O;for(vn(_),B=0;B<w;++B)T=S[B],O=it(T,this),O=[O,this.__zoom.invert(O),T.identifier],v.touch0?!v.touch1&&v.touch0[2]!==O[2]&&(v.touch1=O,v.taps=0):(v.touch0=O,M=!0,v.taps=1+!!f);f&&(f=clearTimeout(f)),M&&(v.taps<2&&(p=O[0],f=setTimeout(function(){f=null},g)),Ut(this),v.start())}}function m(_,...L){if(!!this.__zooming){var S=q(this,L).event(_),w=_.changedTouches,v=w.length,M,B,T,O;for(wt(_),M=0;M<v;++M)B=w[M],T=it(B,this),S.touch0&&S.touch0[2]===B.identifier?S.touch0[0]=T:S.touch1&&S.touch1[2]===B.identifier&&(S.touch1[0]=T);if(B=S.that.__zoom,S.touch1){var F=S.touch0[0],$=S.touch0[1],ie=S.touch1[0],le=S.touch1[1],ue=(ue=ie[0]-F[0])*ue+(ue=ie[1]-F[1])*ue,K=(K=le[0]-$[0])*K+(K=le[1]-$[1])*K;B=G(B,Math.sqrt(ue/K)),T=[(F[0]+ie[0])/2,(F[1]+ie[1])/2],O=[($[0]+le[0])/2,($[1]+le[1])/2]}else if(S.touch0)T=S.touch0[0],O=S.touch0[1];else return;S.zoom("touch",n(N(B,T,O),S.extent,s))}}function V(_,...L){if(!!this.__zooming){var S=q(this,L).event(_),w=_.changedTouches,v=w.length,M,B;for(vn(_),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),M=0;M<v;++M)B=w[M],S.touch0&&S.touch0[2]===B.identifier?delete S.touch0:S.touch1&&S.touch1[2]===B.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(B=it(B,this),Math.hypot(p[0]-B[0],p[1]-B[1])<I)){var T=rt(this).on("dblclick.zoom");T&&T.apply(this,arguments)}}}return C.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:Ft(+_),C):r},C.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Ft(!!_),C):e},C.touchable=function(_){return arguments.length?(i=typeof _=="function"?_:Ft(!!_),C):i},C.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Ft([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),C):t},C.scaleExtent=function(_){return arguments.length?(o[0]=+_[0],o[1]=+_[1],C):[o[0],o[1]]},C.translateExtent=function(_){return arguments.length?(s[0][0]=+_[0][0],s[1][0]=+_[1][0],s[0][1]=+_[0][1],s[1][1]=+_[1][1],C):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},C.constrain=function(_){return arguments.length?(n=_,C):n},C.duration=function(_){return arguments.length?(a=+_,C):a},C.interpolate=function(_){return arguments.length?(u=_,C):u},C.on=function(){var _=l.on.apply(l,arguments);return _===l?C:_},C.clickDistance=function(_){return arguments.length?(R=(_=+_)*_,C):Math.sqrt(R)},C.tapDistance=function(_){return arguments.length?(I=+_,C):I},C}function nu(e){let t,n,r,i,o,s,a,u,l,f,p;return{c(){t=P("div"),n=P("div"),r=P("button"),r.textContent="+",i=oe(),o=P("button"),o.textContent="\u2212",s=oe(),a=P("button"),a.textContent="\u27F2",u=oe(),l=P("canvas"),k(r,"class","zoom-btn svelte-1mu4qvl"),k(r,"aria-label","Zoom in"),k(r,"title","Zoom in"),k(o,"class","zoom-btn svelte-1mu4qvl"),k(o,"aria-label","Zoom out"),k(o,"title","Zoom out"),k(a,"class","zoom-btn svelte-1mu4qvl"),k(a,"aria-label","Reset zoom"),k(a,"title","Reset zoom"),k(n,"class","zoom-controls svelte-1mu4qvl"),k(n,"aria-label","Zoom controls"),k(l,"width",e[0]),k(l,"height",e[1]),k(l,"class","svelte-1mu4qvl"),k(t,"class","chart-container svelte-1mu4qvl")},m(d,g){te(d,t,g),D(t,n),D(n,r),D(n,i),D(n,o),D(n,s),D(n,a),D(t,u),D(t,l),e[31](l),e[32](t),f||(p=[be(r,"click",e[7]),be(o,"click",e[8]),be(a,"click",e[9]),be(l,"mousemove",e[4]),be(l,"mouseleave",e[6]),be(l,"click",e[5])],f=!0)},p(d,g){g[0]&1&&k(l,"width",d[0]),g[0]&2&&k(l,"height",d[1])},i:Ne,o:Ne,d(d){d&&ee(t),e[31](null),e[32](null),f=!1,Je(p)}}}const vt=10,ru=.5,iu=20,Ar=800;function tt(e,t){if(!t||!e)return!1;try{return new RegExp(t,"i").test(e)}catch{return e.toLowerCase().includes(t.toLowerCase())}}function ou(e,t,n){let r,i,o,s,a,u,l,f,p,{data:d=[]}=t,{domainColumn:g="category"}=t,{opacity:b=1}=t,{selectedValues:R=new Set}=t,{searchQuery:I=""}=t,{showAnnotations:C=!0}=t,{highlightedData:G=[]}=t,{startDate:N=null}=t,{endDate:X=null}=t,{uniqueValues:j=[]}=t,{hoveredData:q=null}=t,{selectedData:A=null}=t,{clusterLabels:c=[]}=t,h=[],y,x,m,V=800,_=600;const L={top:40,right:400,bottom:60,left:320};let S=null,w=on,v=!1,M=0,B=null,T="";function O(){v=!0,M=performance.now(),B&&cancelAnimationFrame(B),F()}function F(){performance.now()-M<Ar?(Z(),B=requestAnimationFrame(F)):(v=!1,Z())}let $,ie,le,ue=1;function K(){if(!y||!x)return;const E=x.getBoundingClientRect();E.width>0&&E.height>0&&(n(0,V=Math.floor(E.width)),n(1,_=Math.floor(E.height))),ue=Math.max(window.devicePixelRatio||1,1),n(2,y.style.width="100%",y),n(2,y.style.height="100%",y),n(2,y.width=Math.max(1,Math.floor(V*ue)),y),n(2,y.height=Math.max(1,Math.floor(_*ue)),y),n(23,m=y.getContext("2d")),m.setTransform(ue,0,0,ue,0,0)}function Z(){if(console.log("Scatterplot draw() called, data.length:",d.length),!m||!d.length)return;m.clearRect(0,0,V,_),m.save(),m.translate(w.x,w.y),m.scale(w.k,w.k);let E=0,re=1;if(v){const fe=(performance.now()-M)/Ar,H=Math.max(0,1-fe),ne=Math.sin(fe*Math.PI*8);E=ne*H*4,re=1+ne*H*.3}if(d.forEach(Y=>{m.beginPath();let fe=L.left+u(Y.x),H=L.top+p(Y.y),ne=Math.max(.5,vt/w.k);v&&Y.isActive&&(fe+=E/w.k,H+=E*.5/w.k,ne*=re),m.arc(fe,H,ne,0,Math.PI*2);const ae=Y[g]||"",we=ae.includes(";")?ae.split(";")[0].trim():ae;n(23,m.fillStyle=le(we),m);const ve=Math.max(.1,Math.min(1,b));n(23,m.globalAlpha=Y.isActive?ve:ve*.15,m),m.fill(),n(23,m.globalAlpha=1,m)}),c&&c.length>0&&(n(23,m.globalAlpha=.85,m),n(23,m.textAlign="center",m),c.forEach(Y=>{const fe=L.left+u(Y.x),H=L.top+p(Y.y),ne=Y.label.match(/^(.+?)\s*\(Read:\s*(.+?)\)\s*$/),ae=ne?ne[1].trim():Y.label,we=ne?ne[2].trim():null,ve=Math.max(12,15/w.k);if(n(23,m.font=`bold ${ve}px Arial`,m),n(23,m.textBaseline=we?"bottom":"middle",m),n(23,m.strokeStyle="white",m),n(23,m.lineWidth=Math.max(2,3/w.k),m),m.strokeText(ae,fe,H),n(23,m.fillStyle="#333",m),m.fillText(ae,fe,H),we){const me=Math.max(9,11/w.k);n(23,m.font=`${me}px Arial`,m),n(23,m.textBaseline="top",m);const Te=H+2/w.k;n(23,m.strokeStyle="white",m),n(23,m.lineWidth=Math.max(1.5,2.5/w.k),m),m.strokeText(we,fe,Te),n(23,m.fillStyle="#555",m),m.fillText(we,fe,Te)}})),C&&h.forEach(Y=>{n(23,m.globalAlpha=1,m),m.beginPath(),m.arc(Y.x,Y.y,Y.radius,0,Math.PI*2),n(23,m.strokeStyle="red",m),n(23,m.lineWidth=2,m),m.setLineDash([5,5]),m.stroke();const fe=180,H=12;n(23,m.font="16px Arial",m);const ne=Y.x+Y.label_x,ae=Y.y+Y.label_y;let we=0,ve=0,me=[];if(Y.label){const De=Y.label.split(" ");let Ce="";De.forEach((Le,Oe)=>{const Ve=Ce+Le+" ";m.measureText(Ve).width>fe&&Oe>0?(me.push(Ce),we=Math.max(we,m.measureText(Ce).width),Ce=Le+" "):Ce=Ve}),me.push(Ce),we=Math.max(we,m.measureText(Ce).width),ve=H*me.length}const Te=ne,Ae=ae-H,Ee=we,z=ve;let W,U;Y.x<Te?W=Te:Y.x>Te+Ee?W=Te+Ee:W=Y.x,Y.y<Ae?U=Ae:Y.y>Ae+z?U=Ae+z:U=Y.y;const J=Math.atan2(U-Y.y,W-Y.x),xe=Y.x+Y.radius*Math.cos(J),Se=Y.y+Y.radius*Math.sin(J);if(m.setLineDash([]),m.beginPath(),m.moveTo(xe,Se),m.lineTo(W,U),n(23,m.strokeStyle="red",m),n(23,m.lineWidth=1,m),m.stroke(),Y.label){n(23,m.font="16px Arial",m),n(23,m.fillStyle="red",m);const De=16;me.forEach((Ce,Le)=>{m.fillText(Ce,ne,ae+Le*De)})}}),m.setLineDash([]),A){const Y=L.left+u(A.x),fe=L.top+p(A.y);m.beginPath(),m.arc(Y,fe,Math.max(.5,(vt+2)/w.k),0,Math.PI*2),n(23,m.fillStyle=le(A[g]),m),n(23,m.globalAlpha=1,m),m.fill(),n(23,m.strokeStyle="#1976d2",m),n(23,m.lineWidth=Math.max(1,3/w.k),m),m.stroke()}if(q&&q!==A){const Y=L.left+u(q.x),fe=L.top+p(q.y);m.beginPath(),m.arc(Y,fe,Math.max(.5,vt/w.k),0,Math.PI*2),n(23,m.fillStyle=le(q[g]),m),n(23,m.globalAlpha=1,m),m.fill(),n(23,m.strokeStyle="black",m),n(23,m.lineWidth=Math.max(1,2/w.k),m),m.stroke()}m.restore()}function ce(E){const re=y.getBoundingClientRect(),Y=V/re.width,fe=_/re.height,H=(E.clientX-re.left)*Y,ne=(E.clientY-re.top)*fe,[ae,we]=w.invert([H,ne]),ve=d.find(me=>{var Oe,Ve,We,$e,et;const Te=L.left+u(me.x),Ae=L.top+p(me.y),Ee=Te-ae,z=Ae-we,W=Math.sqrt(Ee*Ee+z*z)<(vt+3)/w.k,J=!!(I&&String(I).trim().length)?tt((Oe=me.title)!=null?Oe:"",I)||tt((Ve=me.text)!=null?Ve:"",I)||tt((We=me.article_text)!=null?We:"",I)||tt(($e=me.summary)!=null?$e:"",I):!0,xe=R&&R.size>0&&R.size<r,Se=(et=me[g])!=null?et:"";let De=!0;xe&&(Se.startsWith("No target;")?De=R.has(Se):De=R.has(Se)||[...R].some(ft=>Se.includes(ft)));const Ce=N&&X?me.date>=N&&me.date<=X:!0;return W&&(J&&De&&Ce)});ve?(n(11,q=ve),S=ve,n(2,y.style.cursor="pointer",y)):(n(11,q=null),S=null,n(2,y.style.cursor="crosshair",y)),Z()}function se(E){const re=y.getBoundingClientRect(),Y=V/re.width,fe=_/re.height,H=(E.clientX-re.left)*Y,ne=(E.clientY-re.top)*fe,[ae,we]=w.invert([H,ne]),ve=d.find(me=>{var Oe,Ve,We,$e,et;const Te=L.left+u(me.x),Ae=L.top+p(me.y),Ee=Te-ae,z=Ae-we,W=Math.sqrt(Ee*Ee+z*z)<(vt+3)/w.k,J=!!(I&&String(I).trim().length)?tt((Oe=me.title)!=null?Oe:"",I)||tt((Ve=me.text)!=null?Ve:"",I)||tt((We=me.article_text)!=null?We:"",I)||tt(($e=me.summary)!=null?$e:"",I):!0,xe=R&&R.size>0&&R.size<r,Se=(et=me[g])!=null?et:"";let De=!0;xe&&(Se.startsWith("No target;")?De=R.has(Se):De=R.has(Se)||[...R].some(ft=>Se.includes(ft)));const Ce=N&&X?me.date>=N&&me.date<=X:!0;return W&&(J&&De&&Ce)});if(!ve){n(10,A=null),Z();return}if(E.ctrlKey||E.metaKey){const me=ve.url||ve.link||ve.href||ve.permalink||ve.item_url;me&&typeof window<"u"&&window.open(me,"_blank","noopener,noreferrer");return}A===ve?n(10,A=null):n(10,A=ve),Z()}function _e(){n(11,q=S),Z()}let ge;Fn(()=>(console.log("Scatterplot mounted, canvas:",y),n(23,m=y.getContext("2d")),console.log("Canvas context:",m),K(),window.ResizeObserver&&(ge=new ResizeObserver(()=>{K(),Z()}),ge.observe(x)),$=tu().scaleExtent([ru,iu]).filter(E=>{const re=E;return re.type==="wheel"||re.type==="touchstart"||re.type==="touchmove"?!0:re.type==="mousedown"?re.button===0&&!re.ctrlKey&&!re.metaKey&&!re.shiftKey:!re.ctrlKey&&!re.metaKey&&!re.shiftKey}).on("zoom",E=>{w=E.transform,Z()}),ie=rt(y),ie.call($),Z(),()=>{ge&&ge.disconnect()}));function ye(E,re){var H;if((H=re==null?void 0:re.stopPropagation)==null||H.call(re),!ie||!$)return;const Y=V/2,fe=_/2;ie.transition().duration(200).call($.scaleBy,E,[Y,fe])}function de(E){ye(1.25,E)}function Q(E){ye(1/1.25,E)}function pe(E){var re;(re=E==null?void 0:E.stopPropagation)==null||re.call(E),!(!ie||!$)&&ie.transition().duration(200).call($.transform,on)}function he(E){Be[E?"unshift":"push"](()=>{y=E,n(2,y)})}function ke(E){Be[E?"unshift":"push"](()=>{x=E,n(3,x)})}return e.$$set=E=>{"data"in E&&n(12,d=E.data),"domainColumn"in E&&n(13,g=E.domainColumn),"opacity"in E&&n(14,b=E.opacity),"selectedValues"in E&&n(15,R=E.selectedValues),"searchQuery"in E&&n(16,I=E.searchQuery),"showAnnotations"in E&&n(17,C=E.showAnnotations),"highlightedData"in E&&n(18,G=E.highlightedData),"startDate"in E&&n(19,N=E.startDate),"endDate"in E&&n(20,X=E.endDate),"uniqueValues"in E&&n(21,j=E.uniqueValues),"hoveredData"in E&&n(11,q=E.hoveredData),"selectedData"in E&&n(10,A=E.selectedData),"clusterLabels"in E&&n(22,c=E.clusterLabels)},e.$$.update=()=>{if(e.$$.dirty[0]&262144&&new Set(G.map(E=>E.id)),e.$$.dirty[0]&12288&&(r=new Set(d.map(E=>E[g])).size),e.$$.dirty[0]&16809984){const E=[...R].sort().join("|");E!==T&&(n(24,T=E),R.size>0&&O())}e.$$.dirty[0]&1&&n(28,i=V-L.left-L.right),e.$$.dirty[0]&2&&n(25,o=_-L.top-L.bottom),e.$$.dirty[0]&4096&&n(30,s=[rr(d,E=>E.x),nr(d,E=>E.x)]),e.$$.dirty[0]&1073741824&&n(29,a=s[0]===s[1]?[s[0]-1,s[1]+1]:s),e.$$.dirty[0]&805306368&&(u=Tn().domain(a).range([0,i])),e.$$.dirty[0]&4096&&n(27,l=[rr(d,E=>E.y),nr(d,E=>E.y)]),e.$$.dirty[0]&134217728&&n(26,f=l[0]===l[1]?[l[0]-1,l[1]+1]:l),e.$$.dirty[0]&100663296&&(p=Tn().domain(f).range([o,0])),e.$$.dirty[0]&2105344&&(le=Vn(fi).domain(g?j:[])),e.$$.dirty[0]&4096&&d.length&&new Date(Math.min(...d.map(E=>E.date.getTime()))),e.$$.dirty[0]&4096&&d.length&&new Date(Math.max(...d.map(E=>E.date.getTime()))),e.$$.dirty[0]&14414848&&m&&d.length&&Z()},[V,_,y,x,ce,se,_e,de,Q,pe,A,q,d,g,b,R,I,C,G,N,X,j,c,m,T,o,f,l,i,a,s,he,ke]}class su extends cn{constructor(t){super(),fn(this,t,ou,nu,ln,{data:12,domainColumn:13,opacity:14,selectedValues:15,searchQuery:16,showAnnotations:17,highlightedData:18,startDate:19,endDate:20,uniqueValues:21,hoveredData:11,selectedData:10,clusterLabels:22},null,[-1,-1])}}function Dr(e,t,n){const r=e.slice();return r[31]=t[n],r}function Tr(e){let t,n,r,i,o=e[31].label+"",s,a;return{c(){t=P("div"),n=P("div"),r=oe(),i=P("div"),s=Me(o),k(n,"class","marker-line svelte-ynwhj4"),k(i,"class","marker-label svelte-ynwhj4"),k(t,"class","marker svelte-ynwhj4"),Re(t,"left",e[31].percent+"%"),k(t,"title",a=e[31].label)},m(u,l){te(u,t,l),D(t,n),D(t,r),D(t,i),D(i,s)},p(u,l){l[0]&8&&o!==(o=u[31].label+"")&&Pe(s,o),l[0]&8&&Re(t,"left",u[31].percent+"%"),l[0]&8&&a!==(a=u[31].label)&&k(t,"title",a)},d(u){u&&ee(t)}}}function lu(e){let t,n,r,i,o,s,a,u,l,f,p=e[3],d=[];for(let g=0;g<p.length;g+=1)d[g]=Tr(Dr(e,p,g));return{c(){t=P("div"),n=P("div"),r=P("div"),i=oe();for(let g=0;g<d.length;g+=1)d[g].c();o=oe(),s=P("div"),a=oe(),u=P("div"),k(r,"class","track-inner svelte-ynwhj4"),k(n,"class","track svelte-ynwhj4"),k(s,"class","thumb start-thumb svelte-ynwhj4"),Re(s,"left",e[5]+"%"),k(u,"class","thumb end-thumb svelte-ynwhj4"),Re(u,"left",e[4]+"%"),k(t,"class","range-slider svelte-ynwhj4"),Re(t,"--start-percent",e[5]+"%"),Re(t,"--end-percent",e[4]+"%")},m(g,b){te(g,t,b),D(t,n),D(n,r),D(t,i);for(let R=0;R<d.length;R+=1)d[R].m(t,null);D(t,o),D(t,s),e[15](s),D(t,a),D(t,u),e[18](u),e[21](t),l||(f=[be(r,"mousedown",e[13]),be(r,"touchstart",e[14]),be(s,"mousedown",e[16]),be(s,"touchstart",e[17]),be(u,"mousedown",e[19]),be(u,"touchstart",e[20])],l=!0)},p(g,b){if(b[0]&8){p=g[3];let R;for(R=0;R<p.length;R+=1){const I=Dr(g,p,R);d[R]?d[R].p(I,b):(d[R]=Tr(I),d[R].c(),d[R].m(t,o))}for(;R<d.length;R+=1)d[R].d(1);d.length=p.length}b[0]&32&&Re(s,"left",g[5]+"%"),b[0]&16&&Re(u,"left",g[4]+"%"),b[0]&32&&Re(t,"--start-percent",g[5]+"%"),b[0]&16&&Re(t,"--end-percent",g[4]+"%")},i:Ne,o:Ne,d(g){g&&ee(t),Pn(d,g),e[15](null),e[18](null),e[21](null),l=!1,Je(f)}}}function au(e,t,n){let r,i,o,{min:s=0}=t,{max:a=100}=t,{startValue:u}=t,{endValue:l}=t,{markers:f=[]}=t;const p=Qr();let d,g,b,R=!1,I=null,C=null,G=0;function N(v,M){R=!0,I=M,C=d.getBoundingClientRect(),M==="range"&&(G=l-u),window.addEventListener("mousemove",X),window.addEventListener("mouseup",j)}function X(v){if(!R)return;const M=Math.min(Math.max(0,(v.clientX-C.left)/C.width),1),B=Math.round(M*(a-s)+s);if(I==="start")n(8,u=Math.min(B,l)),p("startChange",u);else if(I==="end")n(9,l=Math.max(B,u)),p("endChange",l);else if(I==="range"){let T=B-Math.floor(G/2),O=B+Math.ceil(G/2);T<s&&(T=s,O=s+G),O>a&&(O=a,T=a-G),T=Math.max(s,T),O=Math.min(a,O),n(8,u=T),n(9,l=O),p("startChange",u),p("endChange",l)}}function j(){R=!1,window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",j)}function q(v,M){v.preventDefault(),R=!0,I=M,C=d.getBoundingClientRect(),M==="range"&&(G=l-u),window.addEventListener("touchmove",A,{passive:!1}),window.addEventListener("touchend",c)}function A(v){if(v.preventDefault(),!R)return;const M=v.touches[0],B=Math.min(Math.max(0,(M.clientX-C.left)/C.width),1),T=Math.round(B*(a-s)+s);if(I==="start")n(8,u=Math.min(T,l)),p("startChange",u);else if(I==="end")n(9,l=Math.max(T,u)),p("endChange",l);else if(I==="range"){let O=T-Math.floor(G/2),F=T+Math.ceil(G/2);O<s&&(O=s,F=s+G),F>a&&(F=a,O=a-G),O=Math.max(s,O),F=Math.min(a,F),n(8,u=O),n(9,l=F),p("startChange",u),p("endChange",l)}}function c(){R=!1,window.removeEventListener("touchmove",A),window.removeEventListener("touchend",c)}const h=v=>N(v,"range"),y=v=>q(v,"range");function x(v){Be[v?"unshift":"push"](()=>{g=v,n(1,g)})}const m=v=>N(v,"start"),V=v=>q(v,"start");function _(v){Be[v?"unshift":"push"](()=>{b=v,n(2,b)})}const L=v=>N(v,"end"),S=v=>q(v,"end");function w(v){Be[v?"unshift":"push"](()=>{d=v,n(0,d)})}return e.$$set=v=>{"min"in v&&n(10,s=v.min),"max"in v&&n(11,a=v.max),"startValue"in v&&n(8,u=v.startValue),"endValue"in v&&n(9,l=v.endValue),"markers"in v&&n(12,f=v.markers)},e.$$.update=()=>{e.$$.dirty[0]&3328&&n(5,r=a>s?(u-s)/(a-s)*100:0),e.$$.dirty[0]&3584&&n(4,i=a>s?(l-s)/(a-s)*100:100),e.$$.dirty[0]&7168&&n(3,o=f.map(v=>({...v,percent:a>s?(v.index-s)/(a-s)*100:0})))},[d,g,b,o,i,r,N,q,u,l,s,a,f,h,y,x,m,V,_,L,S,w]}class uu extends cn{constructor(t){super(),fn(this,t,au,lu,ln,{min:10,max:11,startValue:8,endValue:9,markers:12},null,[-1,-1])}}function fu(e){const t=e.slice(),n=Ti(t[0][t[1]]);return t[13]=n,t}function cu(e){let t,n=e[4]?"Click on a circle to pin it here.":"Hover over a circle to see details here.",r;return{c(){t=P("p"),r=Me(n),k(t,"class","placeholder-text svelte-1o3uqb7")},m(i,o){te(i,t,o),D(t,r)},p(i,o){o&16&&n!==(n=i[4]?"Click on a circle to pin it here.":"Hover over a circle to see details here.")&&Pe(r,n)},d(i){i&&ee(t)}}}function hu(e){let t,n,r=ht(e[0].title,e[3])+"",i,o,s,a,u,l=e[0].date.toISOString().split("T")[0]+"",f,p,d,g,b,R=ht(e[0].text||e[0].article_text,e[3])+"",I=e[4]&&Rr(e),C=(e[0].url||e[0].link||e[0].href||e[0].permalink||e[0].item_url)&&Nr(e);function G(c,h){return h&3&&(s=null),s==null&&(s=!!(c[1]==="topic"&&Ti(c[0][c[1]]).sub)),s?Lr:du}function N(c,h){return h===Lr?fu(c):c}let X=G(e,-1),j=X(N(e,X)),q=e[6]&&Ir(e),A=e[0].summary&&Or(e);return{c(){I&&I.c(),t=oe(),n=P("h1"),i=oe(),C&&C.c(),o=oe(),j.c(),a=oe(),u=P("h2"),f=Me(l),p=oe(),q&&q.c(),d=oe(),A&&A.c(),g=oe(),b=P("p"),k(n,"class","svelte-1o3uqb7"),k(u,"class","svelte-1o3uqb7"),k(b,"class","svelte-1o3uqb7")},m(c,h){I&&I.m(c,h),te(c,t,h),te(c,n,h),n.innerHTML=r,te(c,i,h),C&&C.m(c,h),te(c,o,h),j.m(c,h),te(c,a,h),te(c,u,h),D(u,f),te(c,p,h),q&&q.m(c,h),te(c,d,h),A&&A.m(c,h),te(c,g,h),te(c,b,h),b.innerHTML=R},p(c,h){c[4]?I?I.p(c,h):(I=Rr(c),I.c(),I.m(t.parentNode,t)):I&&(I.d(1),I=null),h&9&&r!==(r=ht(c[0].title,c[3])+"")&&(n.innerHTML=r),c[0].url||c[0].link||c[0].href||c[0].permalink||c[0].item_url?C?C.p(c,h):(C=Nr(c),C.c(),C.m(o.parentNode,o)):C&&(C.d(1),C=null),X===(X=G(c,h))&&j?j.p(N(c,X),h):(j.d(1),j=X(N(c,X)),j&&(j.c(),j.m(a.parentNode,a))),h&1&&l!==(l=c[0].date.toISOString().split("T")[0]+"")&&Pe(f,l),c[6]?q?q.p(c,h):(q=Ir(c),q.c(),q.m(d.parentNode,d)):q&&(q.d(1),q=null),c[0].summary?A?A.p(c,h):(A=Or(c),A.c(),A.m(g.parentNode,g)):A&&(A.d(1),A=null),h&9&&R!==(R=ht(c[0].text||c[0].article_text,c[3])+"")&&(b.innerHTML=R)},d(c){I&&I.d(c),c&&ee(t),c&&ee(n),c&&ee(i),C&&C.d(c),c&&ee(o),j.d(c),c&&ee(a),c&&ee(u),c&&ee(p),q&&q.d(c),c&&ee(d),A&&A.d(c),c&&ee(g),c&&ee(b)}}}function Rr(e){let t,n,r,i,o,s;return{c(){t=P("div"),n=P("span"),n.textContent="\u{1F4CC} Pinned",r=oe(),i=P("button"),i.textContent="\u2715",k(n,"class","pin-indicator svelte-1o3uqb7"),k(i,"class","unpin-btn svelte-1o3uqb7"),k(t,"class","pin-header svelte-1o3uqb7")},m(a,u){te(a,t,u),D(t,n),D(t,r),D(t,i),o||(s=be(i,"click",e[9]),o=!0)},p:Ne,d(a){a&&ee(t),o=!1,s()}}}function Nr(e){let t,n,r;return{c(){t=P("a"),n=Me("View on Factually"),k(t,"class","article-link svelte-1o3uqb7"),k(t,"href",r=e[0].url||e[0].link||e[0].href||e[0].permalink||e[0].item_url),k(t,"target","_blank"),k(t,"rel","noopener noreferrer")},m(i,o){te(i,t,o),D(t,n)},p(i,o){o&1&&r!==(r=i[0].url||i[0].link||i[0].href||i[0].permalink||i[0].item_url)&&k(t,"href",r)},d(i){i&&ee(t)}}}function du(e){let t,n=(e[5]?e[5](e[1],e[0][e[1]]):e[0][e[1]])+"",r;return{c(){t=P("span"),r=Me(n),Re(t,"background",e[2](sn(e[0][e[1]]))),k(t,"class","svelte-1o3uqb7")},m(i,o){te(i,t,o),D(t,r)},p(i,o){o&35&&n!==(n=(i[5]?i[5](i[1],i[0][i[1]]):i[0][i[1]])+"")&&Pe(r,n),o&7&&Re(t,"background",i[2](sn(i[0][i[1]])))},d(i){i&&ee(t)}}}function Lr(e){let t,n,r=e[13].main+"",i,o,s,a=e[13].sub+"",u;return{c(){t=P("span"),n=P("span"),i=Me(r),o=oe(),s=P("span"),u=Me(a),k(n,"class","topic-main svelte-1o3uqb7"),k(s,"class","topic-sub svelte-1o3uqb7"),k(t,"class","topic-badge svelte-1o3uqb7"),Re(t,"background",e[2](sn(e[0][e[1]])))},m(l,f){te(l,t,f),D(t,n),D(n,i),D(t,o),D(t,s),D(s,u)},p(l,f){f&3&&r!==(r=l[13].main+"")&&Pe(i,r),f&3&&a!==(a=l[13].sub+"")&&Pe(u,a),f&7&&Re(t,"background",l[2](sn(l[0][l[1]])))},d(l){l&&ee(t)}}}function Ir(e){let t=e[6](e[1],e[0][e[1]]),n,r=t&&zr(e);return{c(){r&&r.c(),n=Wr()},m(i,o){r&&r.m(i,o),te(i,n,o)},p(i,o){o&67&&(t=i[6](i[1],i[0][i[1]])),t?r?r.p(i,o):(r=zr(i),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(i){r&&r.d(i),i&&ee(n)}}}function zr(e){let t,n,r=e[6](e[1],e[0][e[1]])+"",i;return{c(){t=P("p"),n=P("em"),i=Me(r),k(t,"class","svelte-1o3uqb7")},m(o,s){te(o,t,s),D(t,n),D(n,i)},p(o,s){s&67&&r!==(r=o[6](o[1],o[0][o[1]])+"")&&Pe(i,r)},d(o){o&&ee(t)}}}function Or(e){let t,n=ht(e[0].summary,e[3])+"";return{c(){t=P("p"),k(t,"class","summary svelte-1o3uqb7")},m(r,i){te(r,t,i),t.innerHTML=n},p(r,i){i&9&&n!==(n=ht(r[0].summary,r[3])+"")&&(t.innerHTML=n)},d(r){r&&ee(t)}}}function pu(e){let t;function n(o,s){return o[0]?hu:cu}let r=n(e),i=r(e);return{c(){t=P("div"),i.c(),k(t,"class","detail-card svelte-1o3uqb7")},m(o,s){te(o,t,s),i.m(t,null)},p(o,[s]){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(t,null)))},i:Ne,o:Ne,d(o){o&&ee(t),i.d()}}}function sn(e){if(!e)return"";const t=String(e);return t.includes(";")?t.split(";")[0].trim():t}function Ti(e){if(!e)return{main:"",sub:""};const t=String(e),n=t.match(/^(.+?)\s*\(Read:\s*(.+?)\)\s*$/);return n?{main:n[1].trim(),sub:n[2].trim()}:{main:t,sub:""}}function ht(e,t){if(!t||!e)return e;try{const n=new RegExp(`(${t})`,"gi");return e.replace(n,"<mark>$1</mark>")}catch{const r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(`(${r})`,"gi");return e.replace(i,"<mark>$1</mark>")}}function mu(e,t,n){const r=Qr();let{hoveredData:i}=t,{domainColumn:o}=t,{data:s}=t,{colorScale:a}=t,{searchQuery:u=""}=t,{isPinned:l=!1}=t,{labelOverride:f=null}=t,{descriptionOverride:p=null}=t;Fn(()=>{a.domain(s.map(g=>g[o]))});const d=()=>r("unpin");return e.$$set=g=>{"hoveredData"in g&&n(0,i=g.hoveredData),"domainColumn"in g&&n(1,o=g.domainColumn),"data"in g&&n(8,s=g.data),"colorScale"in g&&n(2,a=g.colorScale),"searchQuery"in g&&n(3,u=g.searchQuery),"isPinned"in g&&n(4,l=g.isPinned),"labelOverride"in g&&n(5,f=g.labelOverride),"descriptionOverride"in g&&n(6,p=g.descriptionOverride)},[i,o,a,u,l,f,p,r,s,d]}class gu extends cn{constructor(t){super(),fn(this,t,mu,pu,ln,{hoveredData:0,domainColumn:1,data:8,colorScale:2,searchQuery:3,isPinned:4,labelOverride:5,descriptionOverride:6})}}function Pr(e,t,n){const r=e.slice();return r[72]=t[n],r}function Fr(e,t,n){const r=e.slice();return r[75]=t[n],r}function _u(e){let t;return{c(){t=P("div"),t.innerHTML='<p class="waiting-text svelte-18ox7jl">Waiting for data...</p>',k(t,"class","loading-overlay svelte-18ox7jl")},m(n,r){te(n,t,r)},p:Ne,i:Ne,o:Ne,d(n){n&&ee(t)}}}function yu(e){let t,n,r,i;function o(p,d){return p[20]==="downloading"?ku:p[20]==="parsing"?bu:vu}let s=o(e),a=s(e);function u(p,d){return p[20]==="downloading"?Su:xu}let l=u(e),f=l(e);return{c(){t=P("div"),n=P("div"),r=P("div"),a.c(),i=oe(),f.c(),k(r,"class","progress-header svelte-18ox7jl"),k(n,"class","progress-wrap svelte-18ox7jl"),k(t,"class","loading-overlay svelte-18ox7jl")},m(p,d){te(p,t,d),D(t,n),D(n,r),a.m(r,null),D(n,i),f.m(n,null)},p(p,d){s!==(s=o(p))&&(a.d(1),a=s(p),a&&(a.c(),a.m(r,null))),l===(l=u(p))&&f?f.p(p,d):(f.d(1),f=l(p),f&&(f.c(),f.m(n,null)))},i:Ne,o:Ne,d(p){p&&ee(t),a.d(),f.d()}}}function wu(e){let t,n,r,i;function o(u){e[42](u)}function s(u){e[43](u)}let a={data:e[6],domainColumn:e[1],selectedValues:e[3],opacity:e[14],searchQuery:e[10],showAnnotations:e[16],highlightedData:e[9],startDate:e[4],endDate:e[5],uniqueValues:e[2],clusterLabels:e[17]};return e[11]!==void 0&&(a.hoveredData=e[11]),e[12]!==void 0&&(a.selectedData=e[12]),t=new su({props:a}),Be.push(()=>Kt(t,"hoveredData",o)),Be.push(()=>Kt(t,"selectedData",s)),{c(){jn(t.$$.fragment)},m(u,l){an(t,u,l),i=!0},p(u,l){const f={};l[0]&64&&(f.data=u[6]),l[0]&2&&(f.domainColumn=u[1]),l[0]&8&&(f.selectedValues=u[3]),l[0]&16384&&(f.opacity=u[14]),l[0]&1024&&(f.searchQuery=u[10]),l[0]&65536&&(f.showAnnotations=u[16]),l[0]&512&&(f.highlightedData=u[9]),l[0]&16&&(f.startDate=u[4]),l[0]&32&&(f.endDate=u[5]),l[0]&4&&(f.uniqueValues=u[2]),l[0]&131072&&(f.clusterLabels=u[17]),!n&&l[0]&2048&&(n=!0,f.hoveredData=u[11],Wt(()=>n=!1)),!r&&l[0]&4096&&(r=!0,f.selectedData=u[12],Wt(()=>r=!1)),t.$set(f)},i(u){i||(je(t.$$.fragment,u),i=!0)},o(u){Qe(t.$$.fragment,u),i=!1},d(u){un(t,u)}}}function vu(e){let t;return{c(){t=Me("Loading...")},m(n,r){te(n,t,r)},d(n){n&&ee(t)}}}function bu(e){let t;return{c(){t=Me("Processing...")},m(n,r){te(n,t,r)},d(n){n&&ee(t)}}}function ku(e){let t;return{c(){t=Me("Downloading data...")},m(n,r){te(n,t,r)},d(n){n&&ee(t)}}}function xu(e){let t;return{c(){t=P("div"),k(t,"class","progress-bar indeterminate svelte-18ox7jl")},m(n,r){te(n,t,r)},p:Ne,d(n){n&&ee(t)}}}function Su(e){let t;function n(o,s){return o[22]?Eu:Mu}let r=n(e),i=r(e);return{c(){i.c(),t=Wr()},m(o,s){i.m(o,s),te(o,t,s)},p(o,s){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){i.d(o),o&&ee(t)}}}function Mu(e){let t,n,r,i=dt(e[21])+"",o;return{c(){t=P("div"),n=oe(),r=P("div"),o=Me(i),k(t,"class","progress-bar indeterminate svelte-18ox7jl"),k(r,"class","progress-label svelte-18ox7jl")},m(s,a){te(s,t,a),te(s,n,a),te(s,r,a),D(r,o)},p(s,a){a[0]&2097152&&i!==(i=dt(s[21])+"")&&Pe(o,i)},d(s){s&&ee(t),s&&ee(n),s&&ee(r)}}}function Eu(e){let t,n,r,i,o,s,a=dt(e[21])+"",u,l,f=dt(e[22])+"",p,d;return{c(){t=P("div"),n=P("div"),r=oe(),i=P("div"),o=Me(e[23]),s=Me("% ("),u=Me(a),l=Me(" / "),p=Me(f),d=Me(")"),k(n,"class","progress-fill svelte-18ox7jl"),Re(n,"width",e[23]+"%"),k(t,"class","progress-bar svelte-18ox7jl"),k(i,"class","progress-label svelte-18ox7jl")},m(g,b){te(g,t,b),D(t,n),te(g,r,b),te(g,i,b),D(i,o),D(i,s),D(i,u),D(i,l),D(i,p),D(i,d)},p(g,b){b[0]&8388608&&Re(n,"width",g[23]+"%"),b[0]&8388608&&Pe(o,g[23]),b[0]&2097152&&a!==(a=dt(g[21])+"")&&Pe(u,a),b[0]&4194304&&f!==(f=dt(g[22])+"")&&Pe(p,f)},d(g){g&&ee(t),g&&ee(r),g&&ee(i)}}}function Cu(e){let t;return{c(){t=P("span"),t.textContent="\u2039",k(t,"class","toggle-arrow svelte-18ox7jl")},m(n,r){te(n,t,r)},d(n){n&&ee(t)}}}function Au(e){let t;return{c(){t=P("span"),t.textContent="\u203A",k(t,"class","toggle-arrow svelte-18ox7jl")},m(n,r){te(n,t,r)},d(n){n&&ee(t)}}}function jr(e){let t,n,r,i,o,s,a,u,l,f,p,d,g,b,R,I,C,G,N,X,j,q,A,c,h,y,x,m,V,_,L,S,w,v,M,B,T,O,F,$,ie,le,ue,K,Z,ce,se,_e,ge,ye,de,Q=e[13].length&&Vr(e),pe=e[2].length&&Hr(e);function he(H){e[50](H)}function ke(H){e[51](H)}let E={min:0,max:e[24],markers:e[25]};e[7]!==void 0&&(E.startValue=e[7]),e[8]!==void 0&&(E.endValue=e[8]),w=new uu({props:E}),Be.push(()=>Kt(w,"startValue",he)),Be.push(()=>Kt(w,"endValue",ke)),w.$on("startChange",e[52]),w.$on("endChange",e[53]);function re(H,ne){return H[15]?Tu:Du}let Y=re(e),fe=Y(e);return{c(){t=P("div"),n=P("div"),r=P("span"),r.textContent="Filters",i=oe(),o=P("button"),o.textContent="Reset",s=oe(),a=P("div"),u=P("label"),u.textContent="Search",l=oe(),f=P("input"),p=oe(),Q&&Q.c(),d=oe(),pe&&pe.c(),g=oe(),b=P("div"),R=P("label"),R.textContent="Opacity",I=oe(),C=P("input"),G=oe(),N=P("div"),X=P("span"),X.textContent="Date range",j=oe(),q=P("div"),A=P("input"),y=oe(),x=P("span"),x.textContent="\u2013",m=oe(),V=P("input"),S=oe(),jn(w.$$.fragment),B=oe(),T=P("div"),O=P("button"),O.textContent="-1W",F=oe(),$=P("button"),$.textContent="-1D",ie=oe(),le=P("button"),fe.c(),ue=oe(),K=P("button"),K.textContent="+1D",Z=oe(),ce=P("button"),ce.textContent="+1W",se=oe(),_e=P("details"),_e.innerHTML=`<summary class="svelte-18ox7jl">About this map</summary> 
            <div class="info-content svelte-18ox7jl"><p class="svelte-18ox7jl">A semantic map shows how pieces of language relate to each other based on meaning. Each dot here represents a correction or clarification published on Factually.gov.sg. Dots with similar misinformation themes appear closer together. Explore patterns on the map by shortening the time range and scrubbing the timeline, or conducting a search.</p></div>`,k(r,"class","panel-title svelte-18ox7jl"),k(o,"class","reset-btn svelte-18ox7jl"),k(n,"class","panel-header svelte-18ox7jl"),k(u,"class","filter-label svelte-18ox7jl"),k(u,"for","search-input"),k(f,"id","search-input"),k(f,"type","text"),k(f,"class","filter-input svelte-18ox7jl"),k(f,"placeholder","Search keywords..."),k(a,"class","filter-section svelte-18ox7jl"),k(R,"class","filter-label svelte-18ox7jl"),k(R,"for","opacity-slider"),k(C,"id","opacity-slider"),k(C,"type","range"),k(C,"class","filter-range svelte-18ox7jl"),k(C,"min","0.1"),k(C,"max","1"),k(C,"step","0.05"),k(b,"class","filter-section svelte-18ox7jl"),k(X,"class","filter-label svelte-18ox7jl"),k(A,"id","start-date"),k(A,"type","date"),k(A,"class","filter-input date-input svelte-18ox7jl"),A.value=c=nt(e[4]),k(A,"max",h=nt(e[26])),k(x,"class","date-separator svelte-18ox7jl"),k(V,"id","end-date"),k(V,"type","date"),k(V,"class","filter-input date-input svelte-18ox7jl"),V.value=_=nt(e[5]),k(V,"max",L=nt(e[26])),k(q,"class","date-inputs svelte-18ox7jl"),k(O,"class","nav-btn svelte-18ox7jl"),k($,"class","nav-btn svelte-18ox7jl"),k(le,"class","nav-btn play-btn svelte-18ox7jl"),k(K,"class","nav-btn svelte-18ox7jl"),k(ce,"class","nav-btn svelte-18ox7jl"),k(T,"class","date-navigation svelte-18ox7jl"),k(N,"class","filter-section date-section svelte-18ox7jl"),k(_e,"class","info-accordion svelte-18ox7jl"),k(t,"class","panel-content svelte-18ox7jl")},m(H,ne){te(H,t,ne),D(t,n),D(n,r),D(n,i),D(n,o),D(t,s),D(t,a),D(a,u),D(a,l),D(a,f),Rt(f,e[10]),D(t,p),Q&&Q.m(t,null),D(t,d),pe&&pe.m(t,null),D(t,g),D(t,b),D(b,R),D(b,I),D(b,C),Rt(C,e[14]),D(t,G),D(t,N),D(N,X),D(N,j),D(N,q),D(q,A),D(q,y),D(q,x),D(q,m),D(q,V),D(N,S),an(w,N,null),D(N,B),D(N,T),D(T,O),D(T,F),D(T,$),D(T,ie),D(T,le),fe.m(le,null),D(T,ue),D(T,K),D(T,Z),D(T,ce),D(t,se),D(t,_e),ge=!0,ye||(de=[be(o,"click",e[38]),be(f,"input",e[45]),be(f,"input",e[36]),be(C,"change",e[47]),be(C,"input",e[47]),be(C,"input",e[37]),be(A,"change",e[48]),be(V,"change",e[49]),be(O,"click",e[54]),be($,"click",e[55]),be(le,"click",e[35]),be(K,"click",e[56]),be(ce,"click",e[57])],ye=!0)},p(H,ne){ne[0]&1024&&f.value!==H[10]&&Rt(f,H[10]),H[13].length?Q?Q.p(H,ne):(Q=Vr(H),Q.c(),Q.m(t,d)):Q&&(Q.d(1),Q=null),H[2].length?pe?pe.p(H,ne):(pe=Hr(H),pe.c(),pe.m(t,g)):pe&&(pe.d(1),pe=null),ne[0]&16384&&Rt(C,H[14]),(!ge||ne[0]&16&&c!==(c=nt(H[4])))&&(A.value=c),(!ge||ne[0]&67108864&&h!==(h=nt(H[26])))&&k(A,"max",h),(!ge||ne[0]&32&&_!==(_=nt(H[5])))&&(V.value=_),(!ge||ne[0]&67108864&&L!==(L=nt(H[26])))&&k(V,"max",L);const ae={};ne[0]&16777216&&(ae.max=H[24]),ne[0]&33554432&&(ae.markers=H[25]),!v&&ne[0]&128&&(v=!0,ae.startValue=H[7],Wt(()=>v=!1)),!M&&ne[0]&256&&(M=!0,ae.endValue=H[8],Wt(()=>M=!1)),w.$set(ae),Y!==(Y=re(H))&&(fe.d(1),fe=Y(H),fe&&(fe.c(),fe.m(le,null)))},i(H){ge||(je(w.$$.fragment,H),ge=!0)},o(H){Qe(w.$$.fragment,H),ge=!1},d(H){H&&ee(t),Q&&Q.d(),pe&&pe.d(),un(w),fe.d(),ye=!1,Je(de)}}}function Vr(e){let t,n,r,i,o,s,a,u=e[13],l=[];for(let f=0;f<u.length;f+=1)l[f]=qr(Fr(e,u,f));return{c(){t=P("div"),n=P("label"),n.textContent="Colour by",r=oe(),i=P("select"),o=P("option"),o.textContent="Select column";for(let f=0;f<l.length;f+=1)l[f].c();k(n,"class","filter-label svelte-18ox7jl"),k(n,"for","domain-column"),o.__value="",o.value=o.__value,o.disabled=!0,k(i,"id","domain-column"),k(i,"class","filter-select svelte-18ox7jl"),e[1]===void 0&&Yt(()=>e[46].call(i)),k(t,"class","filter-section svelte-18ox7jl")},m(f,p){te(f,t,p),D(t,n),D(t,r),D(t,i),D(i,o);for(let d=0;d<l.length;d+=1)l[d].m(i,null);$n(i,e[1]),s||(a=[be(i,"change",e[31]),be(i,"change",e[46])],s=!0)},p(f,p){if(p[0]&536879104){u=f[13];let d;for(d=0;d<u.length;d+=1){const g=Fr(f,u,d);l[d]?l[d].p(g,p):(l[d]=qr(g),l[d].c(),l[d].m(i,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=u.length}p[0]&8194&&$n(i,f[1])},d(f){f&&ee(t),Pn(l,f),s=!1,Je(a)}}}function qr(e){let t,n=(e[29][e[75]]||e[75])+"",r,i;return{c(){t=P("option"),r=Me(n),t.__value=i=e[75],t.value=t.__value},m(o,s){te(o,t,s),D(t,r)},p(o,s){s[0]&8192&&n!==(n=(o[29][o[75]]||o[75])+"")&&Pe(r,n),s[0]&8192&&i!==(i=o[75])&&(t.__value=i,t.value=t.__value)},d(o){o&&ee(t)}}}function Hr(e){let t,n,r,i,o,s,a,u,l,f=e[2],p=[];for(let d=0;d<f.length;d+=1)p[d]=Br(Pr(e,f,d));return{c(){t=P("div"),n=P("label"),n.textContent="Highlight",r=oe(),i=P("select"),o=P("option"),s=Me("\u2605 Show All");for(let d=0;d<p.length;d+=1)p[d].c();k(n,"class","filter-label svelte-18ox7jl"),k(n,"for","value-select"),o.__value="__ALL__",o.value=o.__value,o.selected=a=e[3].size===0,k(i,"id","value-select"),i.multiple=!0,k(i,"size","5"),k(i,"class","filter-select multi-select svelte-18ox7jl"),k(t,"class","filter-section svelte-18ox7jl")},m(d,g){te(d,t,g),D(t,n),D(t,r),D(t,i),D(i,o),D(o,s);for(let b=0;b<p.length;b+=1)p[b].m(i,null);u||(l=be(i,"change",e[32]),u=!0)},p(d,g){if(g[0]&8&&a!==(a=d[3].size===0)&&(o.selected=a),g[0]&1073741836){f=d[2];let b;for(b=0;b<f.length;b+=1){const R=Pr(d,f,b);p[b]?p[b].p(R,g):(p[b]=Br(R),p[b].c(),p[b].m(i,null))}for(;b<p.length;b+=1)p[b].d(1);p.length=f.length}},d(d){d&&ee(t),Pn(p,d),u=!1,l()}}}function Br(e){let t,n=e[30](e[72])+"",r,i,o;return{c(){t=P("option"),r=Me(n),t.__value=i=e[72],t.value=t.__value,t.selected=o=e[3].has(e[72])},m(s,a){te(s,t,a),D(t,r)},p(s,a){a[0]&4&&n!==(n=s[30](s[72])+"")&&Pe(r,n),a[0]&4&&i!==(i=s[72])&&(t.__value=i,t.value=t.__value),a[0]&12&&o!==(o=s[3].has(s[72]))&&(t.selected=o)},d(s){s&&ee(t)}}}function Du(e){let t;return{c(){t=Me("\u25B6")},m(n,r){te(n,t,r)},d(n){n&&ee(t)}}}function Tu(e){let t;return{c(){t=Me("\u23F8")},m(n,r){te(n,t,r)},d(n){n&&ee(t)}}}function Xr(e){let t,n,r,i,o,s,a;return i=new gu({props:{hoveredData:e[28],data:e[0],domainColumn:e[1],colorScale:e[27],searchQuery:e[10],isPinned:!!e[12]}}),i.$on("unpin",e[59]),{c(){t=P("button"),t.textContent="\xD7",n=oe(),r=P("div"),jn(i.$$.fragment),k(t,"class","panel-close svelte-18ox7jl"),k(t,"aria-label","Close"),k(r,"class","panel-content svelte-18ox7jl")},m(u,l){te(u,t,l),te(u,n,l),te(u,r,l),an(i,r,null),o=!0,s||(a=be(t,"click",e[58]),s=!0)},p(u,l){const f={};l[0]&268435456&&(f.hoveredData=u[28]),l[0]&1&&(f.data=u[0]),l[0]&2&&(f.domainColumn=u[1]),l[0]&134217728&&(f.colorScale=u[27]),l[0]&1024&&(f.searchQuery=u[10]),l[0]&4096&&(f.isPinned=!!u[12]),i.$set(f)},i(u){o||(je(i.$$.fragment,u),o=!0)},o(u){Qe(i.$$.fragment,u),o=!1},d(u){u&&ee(t),u&&ee(n),u&&ee(r),un(i),s=!1,a()}}}function Ru(e){let t,n,r,i,o,s,a,u,l,f,p,d,g,b,R,I;const C=[wu,yu,_u],G=[];function N(h,y){return h[6].length?0:h[19]?1:2}s=N(e),a=G[s]=C[s](e);function X(h,y){return h[18]?Au:Cu}let j=X(e),q=j(e),A=!e[18]&&jr(e),c=e[28]&&Xr(e);return{c(){t=P("div"),n=P("header"),n.innerHTML=`<div class="title-row svelte-18ox7jl"><h1 class="title svelte-18ox7jl">What Gets Corrected \u{1F440}</h1> 
      <div class="header-right svelte-18ox7jl"><a href="https://github.com/wongpeiting/factually-semantic-map" target="_blank" rel="noopener noreferrer" class="help-btn svelte-18ox7jl" title="View on GitHub">?</a> 
        <span class="data-date svelte-18ox7jl">Data as of Feb 5, 2026.</span></div></div> 
    <p class="tagline svelte-18ox7jl">Mapping claims the Singapore government has publicly challenged on Factually.</p> 
    <p class="subtitle svelte-18ox7jl">Each dot is a disputed claim, grouped by similarity. Together, they reveal themes most likely to prompt clarification and correction.</p>`,r=oe(),i=P("main"),o=P("div"),a.c(),u=oe(),l=P("aside"),f=P("button"),q.c(),p=oe(),A&&A.c(),d=oe(),g=P("aside"),c&&c.c(),k(n,"class","header svelte-18ox7jl"),k(o,"class","scatterplot-wrapper svelte-18ox7jl"),k(f,"class","panel-toggle svelte-18ox7jl"),k(f,"aria-label","Toggle filters"),k(l,"class","floating-panel filter-panel svelte-18ox7jl"),Nt(l,"collapsed",e[18]),k(g,"class","floating-panel detail-panel svelte-18ox7jl"),Nt(g,"visible",!!e[28]),k(i,"class","main-content svelte-18ox7jl"),k(t,"class","app-container svelte-18ox7jl")},m(h,y){te(h,t,y),D(t,n),D(t,r),D(t,i),D(i,o),G[s].m(o,null),D(i,u),D(i,l),D(l,f),q.m(f,null),D(l,p),A&&A.m(l,null),D(i,d),D(i,g),c&&c.m(g,null),b=!0,R||(I=be(f,"click",e[44]),R=!0)},p(h,y){let x=s;s=N(h),s===x?G[s].p(h,y):(gn(),Qe(G[x],1,1,()=>{G[x]=null}),_n(),a=G[s],a?a.p(h,y):(a=G[s]=C[s](h),a.c()),je(a,1),a.m(o,null)),j!==(j=X(h))&&(q.d(1),q=j(h),q&&(q.c(),q.m(f,null))),h[18]?A&&(gn(),Qe(A,1,1,()=>{A=null}),_n()):A?(A.p(h,y),y[0]&262144&&je(A,1)):(A=jr(h),A.c(),je(A,1),A.m(l,null)),(!b||y[0]&262144)&&Nt(l,"collapsed",h[18]),h[28]?c?(c.p(h,y),y[0]&268435456&&je(c,1)):(c=Xr(h),c.c(),je(c,1),c.m(g,null)):c&&(gn(),Qe(c,1,1,()=>{c=null}),_n()),(!b||y[0]&268435456)&&Nt(g,"visible",!!h[28])},i(h){b||(je(a),je(A),je(c),b=!0)},o(h){Qe(a),Qe(A),Qe(c),b=!1},d(h){h&&ee(t),G[s].d(),q.d(),A&&A.d(),c&&c.d(),R=!1,I()}}}function Nu(){try{const e=new URLSearchParams(window.location.search),t=e.get("url"),n=e.get("filename"),r=e.get("bucket");if(t&&/^https?:\/\//i.test(t))return t;if(n){let i="";return r?/^https?:\/\//i.test(r)?i=r:r.includes(".")?i=`https://${r}`:i=`https://${r}.s3.amazonaws.com`:i={BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_S3_BASE_URL||{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_BASE_URL||"https://pink-slime-public.s3.amazonaws.com/",i&&!i.endsWith("/")&&(i+="/"),i?i+n:n}return{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}catch(e){return console.warn("Failed to resolve data URL from query params:",e),{BASE_URL:"/factually-semantic-map/",MODE:"production",DEV:!1,PROD:!0}.VITE_DATA_URL||"data.csv"}}function dt(e){if(!e||e<=0)return"0 KB";const t=["B","KB","MB","GB","TB"];let n=e,r=0;for(;n>=1024&&r<t.length-1;)n/=1024,r++;const i=r===0?0:1;return`${n.toFixed(i)} ${t[r]}`}function nt(e){return e?e.toISOString().split("T")[0]:""}function Lu(e,t,n){let r,i,o,s,a,u,l="",f=[],p=[],d="target",g=[],b=new Set,R=.85,I=null,C=null,G=[],N=[],X=0,j=0,q=!1,A=null,c=[],h="",y=!1,x=null,m=[],V=null,_=!1;const L={target:"Directed at",org:"Organisation",state:"State"},S=["General Clarification","General Explainer"];function w(z){if(!z)return z;const W=String(z),U=W.match(/^(.+?)\s*\(Read:\s*.+?\)\s*$/),J=U?U[1].trim():W;return S.includes(J)?`\u2605 ${J}`:J}const v=[{date:new Date("2020-07-10"),label:"GE2020"},{date:new Date("2025-05-03"),label:"GE2025"}];let M=!1,B="idle",T=0,O=0,F=0;Fn(async()=>{try{n(19,M=!0),n(20,B="downloading"),n(21,T=0),n(22,O=0),n(23,F=0),n(39,l=Nu()),console.log("Loading data from:",l);const z=await fetch(l,{mode:"cors",cache:"no-store"});if(!z.ok)throw new Error(`HTTP ${z.status}`);const W=z.headers.get("content-length");n(22,O=W?parseInt(W,10):0);let U="";if(z.body&&z.body.getReader){const J=z.body.getReader(),xe=[];let Se=0;for(;;){const{done:Le,value:Oe}=await J.read();if(Le)break;xe.push(Oe),Se+=Oe.byteLength,n(21,T=Se),O&&n(23,F=Math.round(Se/O*100))}const De=new Uint8Array(Se);let Ce=0;for(const Le of xe)De.set(Le,Ce),Ce+=Le.byteLength;U=new TextDecoder().decode(De),console.log("CSV head:",U.split(`
`).slice(0,5).join(`
`))}else U=await z.text();n(20,B="parsing"),await Promise.resolve($(U));try{const J=await fetch("cluster_labels.json");J.ok&&(n(17,m=await J.json()),console.log("Loaded cluster labels:",m))}catch(J){console.warn("Could not load cluster labels:",J)}n(20,B="idle")}catch(z){console.error("Failed to load CSV:",z)}finally{n(19,M=!1)}return()=>{A&&clearInterval(A)}});function $(z){const W=z.split(/\r?\n/);if(W.length>0){const xe=W[0].split(",").map(Se=>Se.trim().toLowerCase()).join(",");W[0]=xe,z=W.join(`
`)}const U=Hi.parse(z,{header:!0});console.log("Parsed CSV fields:",U.meta.fields),console.log("Parsed rows (before filter):",U.data.length),console.log("Sample row:",U.data[0]),n(0,f=U.data.filter(J=>J.x&&J.y&&J.date).map((J,xe)=>({...J,x:+J.x,y:+J.y,date:new Date(J.date),id:xe}))),console.log("Data after filter:",f.length),console.log("Sample data point:",f[0]),console.log("domainColumn:",d),console.log("columns:",p),console.log("allDates:",N.length,"from",N[0],"to",N[N.length-1]),n(40,p=U.meta.fields||[]),n(41,N=[...new Set(f.map(J=>J.date.getTime()))].sort((J,xe)=>J-xe).map(J=>new Date(J))),n(4,I=N[0]),n(5,C=N[N.length-1]),n(7,X=0),n(8,j=N.length-1),K(),d&&n(2,g=[...new Set(f.map(J=>J[d]).filter(J=>J!=null&&J!==""))].sort((J,xe)=>String(J).localeCompare(String(xe))))}function ie(z){n(1,d=z.target.value),n(2,g=d?[...new Set(f.map(W=>W[d]).filter(Boolean))].sort((W,U)=>String(W).localeCompare(String(U))):[]),n(3,b=new Set),n(16,y=!1)}function le(z){const W=[...z.target.selectedOptions].map(xe=>xe.value),U=W.includes("__ALL__"),J=W.length===g.length;U||J||W.length===0?(n(3,b=new Set),n(9,c=[])):(n(3,b=new Set(W)),n(9,c=f.filter(xe=>b.has(xe[d])&&(!I||xe.date>=I)&&(!C||xe.date<=C)))),n(16,y=!1)}function ue(z,W,U=!1){U?(n(4,I=N[z]||N[0]),n(5,C=N[W]||N[N.length-1])):(n(4,I=z),n(5,C=W)),n(16,y=!1),K()}function K(){if(I){const z=I.getTime();n(7,X=Math.max(0,N.findIndex(W=>W.getTime()>=z)))}else n(7,X=0);if(C){const z=C.getTime();let W=-1;for(let U=N.length-1;U>=0;U--)if(N[U].getTime()<=z){W=U;break}n(8,j=W>=0?W:N.length-1)}else n(8,j=N.length-1);X>j&&n(7,X=j),j<X&&n(8,j=X)}function Z(z,W){if(z.detail!==void 0)W==="start"?(n(7,X=z.detail),X>j&&n(7,X=j)):(n(8,j=z.detail),j<X&&n(8,j=X)),ue(X,j,!0);else{const U=z.target.value?new Date(z.target.value):null;W==="start"?ue(U,C):ue(I,U),K()}}function ce(z){const W=j-X;let U=X+z,J=j+z;U<0&&(U=0,J=Math.min(W,N.length-1)),J>=N.length&&(J=N.length-1,U=Math.max(0,J-W)),n(7,X=U),n(8,j=J),ue(X,j,!0)}function se(){q?(clearInterval(A),n(15,q=!1)):(n(15,q=!0),n(16,y=!1),A=setInterval(()=>{if(j>=N.length-1){clearInterval(A),n(15,q=!1);return}ce(1)},500))}function _e(z){n(10,h=z.target.value),n(16,y=!1)}function ge(){n(16,y=!1)}function ye(){q&&A&&(clearInterval(A),n(15,q=!1));const z=p.includes("target")?"target":p.includes("org")?"org":s[0]||"";n(1,d=z),n(3,b=new Set),n(9,c=[]),n(10,h=""),n(16,y=!1),n(14,R=.02),n(14,R=+R),N.length?(n(7,X=0),n(8,j=N.length-1),ue(X,j,!0)):(n(4,I=null),n(5,C=null),n(7,X=0),n(8,j=0))}function de(z){x=z,n(11,x)}function Q(z){V=z,n(12,V)}const pe=()=>n(18,_=!_);function he(){h=this.value,n(10,h)}function ke(){d=zi(this),n(1,d),n(40,p),n(13,s),n(13,s),n(40,p)}function E(){R=Li(this.value),n(14,R)}const re=z=>Z(z,"start"),Y=z=>Z(z,"end");function fe(z){X=z,n(7,X)}function H(z){j=z,n(8,j)}const ne=z=>Z(z,"start"),ae=z=>Z(z,"end"),we=()=>ce(-7),ve=()=>ce(-1),me=()=>ce(1),Te=()=>ce(7),Ae=()=>n(12,V=null),Ee=()=>n(12,V=null);return e.$$.update=()=>{if(e.$$.dirty[1]&256&&/^https?:\/\//i.test(l),e.$$.dirty[0]&512&&new Set(c.map(z=>z.id)),e.$$.dirty[0]&6144&&n(28,r=V||x),e.$$.dirty[1]&512&&n(13,s=p.filter(z=>z==="target"||z==="org"||z==="state")),e.$$.dirty[0]&8194|e.$$.dirty[1]&512&&(!p||p.length===0||(s.length&&!s.includes(d)?n(1,d=s[0]):s.length===0&&n(1,d=""))),e.$$.dirty[0]&3&&d&&f.length>0&&n(2,g=[...new Set(f.flatMap(z=>{const W=z[d];if(W==null||W==="")return[];const U=String(W);return U.startsWith("No target;")?[U]:U.includes(";")?U.split(";").map(J=>J.trim()):[U]}))].sort((z,W)=>String(z).localeCompare(String(W)))),e.$$.dirty[0]&6&&n(27,i=Vn(fi).domain(d?g:[])),e.$$.dirty[1]&1024&&N.length>0&&N[0],e.$$.dirty[1]&1024&&n(26,o=N.length>0?N[N.length-1]:null),e.$$.dirty[1]&1024&&n(25,a=N.length>0?v.map(z=>{let W=0,U=1/0;return N.forEach((J,xe)=>{const Se=Math.abs(J.getTime()-z.date.getTime());Se<U&&(U=Se,W=xe)}),{index:W,label:z.label}}).filter(z=>z.index>=0&&z.index<=N.length-1):[]),e.$$.dirty[0]&1535|e.$$.dirty[1]&1024){N.length&&X===0&&N.length-1;const z=b.size>0&&b.size<g.length,W=h&&h.trim().length>0;n(6,G=f.map(U=>{var Ce,Le,Oe,Ve,We,$e,et,ft,Zn;const J=(!I||U.date>=I)&&(!C||U.date<=C);let xe=!0;if(z){const Ie=(Ce=U[d])!=null?Ce:"";Ie.startsWith("No target;")?xe=b.has(Ie):xe=b.has(Ie)||[...b].some(Ri=>Ie.includes(Ri))}let Se=!0;if(W)try{const Ie=new RegExp(h,"i");Se=Ie.test((Le=U.title)!=null?Le:"")||Ie.test((Oe=U.text)!=null?Oe:"")||Ie.test((Ve=U.article_text)!=null?Ve:"")||Ie.test((We=U.summary)!=null?We:"")}catch{const Ie=h.toLowerCase();Se=(($e=U.title)!=null?$e:"").toLowerCase().includes(Ie)||((et=U.text)!=null?et:"").toLowerCase().includes(Ie)||((ft=U.article_text)!=null?ft:"").toLowerCase().includes(Ie)||((Zn=U.summary)!=null?Zn:"").toLowerCase().includes(Ie)}const De=J&&xe&&Se;return{...U,isActive:De,isHighlighted:De}})),console.log("filteredData length:",G.length,"active:",G.filter(U=>U.isActive).length)}e.$$.dirty[0]&128|e.$$.dirty[1]&1024&&N.length>1&&X/(N.length-1)*100,e.$$.dirty[0]&256|e.$$.dirty[1]&1024&&N.length>1&&j/(N.length-1)*100,e.$$.dirty[1]&1024&&n(24,u=N.length>0?N.length-1:0)},[f,d,g,b,I,C,G,X,j,c,h,x,V,s,R,q,y,m,_,M,B,T,O,F,u,a,o,i,r,L,w,ie,le,Z,ce,se,_e,ge,ye,l,p,N,de,Q,pe,he,ke,E,re,Y,fe,H,ne,ae,we,ve,me,Te,Ae,Ee]}class Iu extends cn{constructor(t){super(),fn(this,t,Lu,Ru,ln,{},null,[-1,-1,-1])}}new Iu({target:document.getElementById("app")});
